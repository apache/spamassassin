------------------------------------------------------------------------
r21445 | jm | 2004-06-19 22:08:19 +0000 (Sat, 19 Jun 2004) | 1 line

minor doco tweaks
------------------------------------------------------------------------
r21444 | sidney | 2004-06-19 21:40:20 +0000 (Sat, 19 Jun 2004) | 1 line

bug #3521: replace use of platform dependent system call with perl version
------------------------------------------------------------------------
r21443 | sidney | 2004-06-19 08:22:41 +0000 (Sat, 19 Jun 2004) | 1 line

bug #3513: fix spamc tests under Windows
------------------------------------------------------------------------
r21439 | parker | 2004-06-19 04:38:53 +0000 (Sat, 19 Jun 2004) | 1 line

Bug 3503: config needs to be copied for sql/ldap configs as well
------------------------------------------------------------------------
r21433 | jm | 2004-06-19 02:03:13 +0000 (Sat, 19 Jun 2004) | 1 line

allow_user_rules fixes: block user-defined SenderBase rules; sanitise arguments to many regexp rules; run helper apps as uid=user euid=user; ensure regexps are valid before they are used in the ruleset. fix a couple of rules to work with these changes.
------------------------------------------------------------------------
r21432 | parker | 2004-06-19 01:33:19 +0000 (Sat, 19 Jun 2004) | 1 line

Bug 3334: create sed_path cache to be used by sed_path and clear the cache in compile_now after running the test msg
------------------------------------------------------------------------
r21429 | parker | 2004-06-19 00:47:12 +0000 (Sat, 19 Jun 2004) | 1 line

Bug 3519: add documentation about failures with postgresql less than 7.4.2
------------------------------------------------------------------------
r21409 | jm | 2004-06-18 06:01:35 +0000 (Fri, 18 Jun 2004) | 1 line

script was not executable, fixed
------------------------------------------------------------------------
r21408 | jm | 2004-06-18 05:56:28 +0000 (Fri, 18 Jun 2004) | 1 line

bug 3509: make building spamc easier for packagers with new version.h.pl script
------------------------------------------------------------------------
r21406 | jm | 2004-06-18 05:50:28 +0000 (Fri, 18 Jun 2004) | 1 line

bug 3511: add support for multi-valued RHSBLs; add multi.surbl.org as well
------------------------------------------------------------------------
r21389 | parker | 2004-06-17 20:21:39 +0000 (Thu, 17 Jun 2004) | 1 line

Bug 3518: change char(200) to char(5) to bring it in line with the current database revision
------------------------------------------------------------------------
r21353 | mss | 2004-06-16 18:33:35 +0000 (Wed, 16 Jun 2004) | 3 lines

* Removed some obsolete entries from the ignore list.
* Prepared for Module::Build :)

------------------------------------------------------------------------
r21338 | jm | 2004-06-16 02:41:16 +0000 (Wed, 16 Jun 2004) | 1 line

bug 3467: uri_to_domain should only return domains with valid TLDs
------------------------------------------------------------------------
r21335 | quinlan | 2004-06-16 01:48:57 +0000 (Wed, 16 Jun 2004) | 3 lines

bug 3495: remove DNS_FROM_RFC_WHOIS_B due to high score and poor FP rate,
rename DNS_FROM_RFC_WHOIS_A to DNS_FROM_RFC_WHOIS

------------------------------------------------------------------------
r21322 | parker | 2004-06-15 23:00:26 +0000 (Tue, 15 Jun 2004) | 1 line

Bug 3508: Type in variable name
------------------------------------------------------------------------
r21320 | jm | 2004-06-15 22:24:25 +0000 (Tue, 15 Jun 2004) | 1 line

test update: ensure 2 hashcash tokens in multiple headers work sensibly
------------------------------------------------------------------------
r21294 | quinlan | 2004-06-15 16:14:56 +0000 (Tue, 15 Jun 2004) | 3 lines

move some network tests out into the network test section and set their
non-net score set scores to 0

------------------------------------------------------------------------
r21257 | quinlan | 2004-06-15 05:38:36 +0000 (Tue, 15 Jun 2004) | 2 lines

bug 3447: fix test failures

------------------------------------------------------------------------
r21256 | quinlan | 2004-06-15 05:38:03 +0000 (Tue, 15 Jun 2004) | 15 lines

bug 3447
- change TCR lambda to 50 everywhere and add lambda value to output
- add -t option to perceptron for tuning FP/FN ratio (workable solution for
  now)
- add -h option to perceptron
- remove extra newline from rewrite-cf-with-new-scores (noticible when you
  run it four times in a row)
- update runGA to be more or less what I used
  - revert 50_scores.cf before runs: very important
  - iterate over thresholds (relatively cheap) to find optimal FN/FP point
    (used: 4.2 for set0, 4.8 for set1 and set2, 4.9 for set3)
  - also rewrite and validate scores on each iteration
- masses/mk-baseline-results: fix some option names
- some other minor changes

------------------------------------------------------------------------
r21255 | quinlan | 2004-06-15 05:37:36 +0000 (Tue, 15 Jun 2004) | 5 lines

bug 3447
- change SPF_PASS and SPF_HELO_PASS to be userconf rules so perceptron does
  not try to assign them a score
- new scores!

------------------------------------------------------------------------
r21251 | quinlan | 2004-06-15 02:33:54 +0000 (Tue, 15 Jun 2004) | 3 lines

remove svn:mime-type flag from all these files so I can svn diff them
(they are not binary files, so the flag isn't really needed)

------------------------------------------------------------------------
r21195 | quinlan | 2004-06-14 09:40:00 +0000 (Mon, 14 Jun 2004) | 2 lines

documentation update, remove ancient statistics

------------------------------------------------------------------------
r21065 | quinlan | 2004-06-11 04:43:19 +0000 (Fri, 11 Jun 2004) | 2 lines

now you only have to change SCORESET once

------------------------------------------------------------------------
r21042 | quinlan | 2004-06-11 00:40:23 +0000 (Fri, 11 Jun 2004) | 2 lines

add "\n" 

------------------------------------------------------------------------
r21041 | quinlan | 2004-06-11 00:30:15 +0000 (Fri, 11 Jun 2004) | 2 lines

more clean-up of output

------------------------------------------------------------------------
r21040 | quinlan | 2004-06-10 23:41:14 +0000 (Thu, 10 Jun 2004) | 3 lines

use consistent naming for ham vs. spam
make output of fp-fn-statistics non-confusing

------------------------------------------------------------------------
r21039 | quinlan | 2004-06-10 23:38:03 +0000 (Thu, 10 Jun 2004) | 4 lines

turn on score ranges code
picks initial weights between [range_lo..range_hi)
change output to be non-confusing

------------------------------------------------------------------------
r21038 | quinlan | 2004-06-10 23:10:31 +0000 (Thu, 10 Jun 2004) | 2 lines

Call the files ham or call them nonspam, but don't call them both!!!!!!!!!!

------------------------------------------------------------------------
r21036 | parker | 2004-06-10 19:45:47 +0000 (Thu, 10 Jun 2004) | 1 line

Bug 3498 - Update documentation
------------------------------------------------------------------------
r20962 | parker | 2004-06-09 21:01:47 +0000 (Wed, 09 Jun 2004) | 1 line

Bug 3471: add sanity check so too many tokens do not get expired
------------------------------------------------------------------------
r20961 | jm | 2004-06-09 20:13:34 +0000 (Wed, 09 Jun 2004) | 1 line

bug 3442: renamed the .lock file to .mutex for the flock-locking case, since it is really a mutual-exclusion semaphore, not a lock.  in other words, it sticks around after unlocking.
------------------------------------------------------------------------
r20960 | jm | 2004-06-09 20:11:23 +0000 (Wed, 09 Jun 2004) | 1 line

reinstating accidentally-deleted line from last patch
------------------------------------------------------------------------
r20959 | felicity | 2004-06-09 20:02:05 +0000 (Wed, 09 Jun 2004) | 1 line

bug 3482: having the children reset the signal handling removed perl-internal signal handles as well, such as __WARN__, which broke the debug output.  we now explicitly only reset the signals that we changed in the parent via 2 new functions in spamd where all the signal handling should happen.
------------------------------------------------------------------------
r20958 | felicity | 2004-06-09 19:58:37 +0000 (Wed, 09 Jun 2004) | 1 line

bug 3490: spamd wasn't warning if the pidfile or socket was failing to be removed during a restart
------------------------------------------------------------------------
r20956 | felicity | 2004-06-09 16:48:36 +0000 (Wed, 09 Jun 2004) | 1 line

wordsmithing the file lock POD
------------------------------------------------------------------------
r20922 | felicity | 2004-06-08 21:08:32 +0000 (Tue, 08 Jun 2004) | 1 line

fix broken spf test -- expected __SPF_PASS and __SPF_HELO_PASS which were renamed the other day
------------------------------------------------------------------------
r20921 | felicity | 2004-06-08 20:58:51 +0000 (Tue, 08 Jun 2004) | 1 line

bug 3295: FORGED_DEF_WHITELIST and FORGED_IN_WHITELIST will fail in non-forged situations like when mails are received via mailing list.  reverting to test mode for now.
------------------------------------------------------------------------
r20920 | felicity | 2004-06-08 20:49:51 +0000 (Tue, 08 Jun 2004) | 1 line

bug 3485: missing meta dependencies...  __OUTLOOK_MUA was renamed __ANY_OUTLOOK_MUA, and __DRUGS_ERECTILE7 doesn't exist.  fixed the first, removed the second.
------------------------------------------------------------------------
r20919 | felicity | 2004-06-08 20:42:47 +0000 (Tue, 08 Jun 2004) | 1 line

bug 3483: the fix to 3345 caused the journal to not sync to the DB in the case where scan wasn't possible.  we now allow the sync to occur if the db is accessible only, which fixes both 3345 and 3483.
------------------------------------------------------------------------
r20897 | quinlan | 2004-06-08 05:47:34 +0000 (Tue, 08 Jun 2004) | 2 lines

minor comment change

------------------------------------------------------------------------
r20896 | jm | 2004-06-08 03:39:49 +0000 (Tue, 08 Jun 2004) | 1 line

bug 3391: CPAN familiarity required during INSTALL, doco fixes
------------------------------------------------------------------------
r20892 | jm | 2004-06-08 02:34:06 +0000 (Tue, 08 Jun 2004) | 1 line

bug 3479: reinstate SPF_PASS, SPF_HELO_PASS, but with very small scores
------------------------------------------------------------------------
r20885 | felicity | 2004-06-07 20:41:15 +0000 (Mon, 07 Jun 2004) | 1 line

small typo
------------------------------------------------------------------------
r20884 | felicity | 2004-06-07 20:25:46 +0000 (Mon, 07 Jun 2004) | 1 line

remove more metachars before doing diff
------------------------------------------------------------------------
r20883 | quinlan | 2004-06-07 19:28:18 +0000 (Mon, 07 Jun 2004) | 2 lines

minor fix

------------------------------------------------------------------------
r20844 | jm | 2004-06-06 02:50:42 +0000 (Sun, 06 Jun 2004) | 1 line

doco fixes: a few 'its' cleared up
------------------------------------------------------------------------
r20843 | felicity | 2004-06-06 02:05:01 +0000 (Sun, 06 Jun 2004) | 1 line

bug 3474: spamd was doing getpwnam() instead of getgrnam() for some reason.  doh...
------------------------------------------------------------------------
r20839 | felicity | 2004-06-05 19:06:33 +0000 (Sat, 05 Jun 2004) | 1 line

bug 3446: the spamd children would inherit the parent's signal handler which caused lockups among other issues.  also, if max-conn-per-child is 1, don't bother copying the configuration around since each child will only process 1 message.
------------------------------------------------------------------------
r20836 | parker | 2004-06-05 15:50:10 +0000 (Sat, 05 Jun 2004) | 1 line

Bug 3476 change -u to -U for psql command
------------------------------------------------------------------------
r20826 | jm | 2004-06-05 01:16:17 +0000 (Sat, 05 Jun 2004) | 1 line

bug 3438: conflicting API documentation in PerMsgLearner.  fixed
------------------------------------------------------------------------
r20825 | quinlan | 2004-06-04 21:30:56 +0000 (Fri, 04 Jun 2004) | 3 lines

promote T_INCOMPLETE_TEMPLATE_CX to UNRESOLVED_TEMPLATE (also removed the
/s modifier, it's not needed since there's no "." in the expression)

------------------------------------------------------------------------
r20797 | quinlan | 2004-06-03 21:57:56 +0000 (Thu, 03 Jun 2004) | 2 lines

almost finished with T_INCOMPLETE_TEMPLATE*

------------------------------------------------------------------------
r20793 | felicity | 2004-06-03 19:19:51 +0000 (Thu, 03 Jun 2004) | 1 line

bug 3465: typo in bayessql test got my() repeated warnings
------------------------------------------------------------------------
r20790 | parker | 2004-06-03 18:06:04 +0000 (Thu, 03 Jun 2004) | 1 line

Bug 3415: add a warning about old versions of DBD::Pg
------------------------------------------------------------------------
r20771 | parker | 2004-06-03 05:38:27 +0000 (Thu, 03 Jun 2004) | 1 line

Bug 3457: Remove subselect in test in bayessql.t, start using new clear_database call, also add a test for clear_database
------------------------------------------------------------------------
r20768 | jm | 2004-06-03 03:22:26 +0000 (Thu, 03 Jun 2004) | 1 line

bug 3462: fix 'make distcheck'
------------------------------------------------------------------------
r20764 | quinlan | 2004-06-02 23:18:35 +0000 (Wed, 02 Jun 2004) | 4 lines

promote RATWARE_RCVD_PF and RATWARE_RCVD_AT with no changes
remove T_MANY_MX_5 and T_MANY_MX_10
add last batch of T_INCOMPLETE_TEMPLATE* variations to finish this rule off

------------------------------------------------------------------------
r20760 | felicity | 2004-06-02 19:19:16 +0000 (Wed, 02 Jun 2004) | 1 line

ADDRESS_IN_SUBJECT description was misleading (address can appear anywhere, not just at the front)
------------------------------------------------------------------------
r20743 | felicity | 2004-06-01 20:47:42 +0000 (Tue, 01 Jun 2004) | 1 line

bug 3453: add more platform support for masses/cpucount
------------------------------------------------------------------------
r20723 | sidney | 2004-06-01 00:50:39 +0000 (Tue, 01 Jun 2004) | 1 line

bug #3452: more correct fix using proper C idiom to suppress unreferenced formal parameter warning
------------------------------------------------------------------------
r20719 | sidney | 2004-05-31 22:44:55 +0000 (Mon, 31 May 2004) | 1 line

Bug 3433: remove some compiler warnings from spamc build and compile with warnings on
------------------------------------------------------------------------
r20716 | sidney | 2004-05-31 21:41:06 +0000 (Mon, 31 May 2004) | 1 line

Bug 3433: remove some compiler warnings from spamc build
------------------------------------------------------------------------
r20715 | mss | 2004-05-31 21:15:21 +0000 (Mon, 31 May 2004) | 2 lines

bug 3433: Added a README about the script

------------------------------------------------------------------------
r20714 | mss | 2004-05-31 21:03:54 +0000 (Mon, 31 May 2004) | 2 lines

bug 3433: to make it really obvious, rename it :)

------------------------------------------------------------------------
r20713 | mss | 2004-05-31 21:02:23 +0000 (Mon, 31 May 2004) | 2 lines

bug 3433: wave the clusestick for people who don't read the docu

------------------------------------------------------------------------
r20712 | felicity | 2004-05-31 19:59:28 +0000 (Mon, 31 May 2004) | 1 line

bug 3450: spamd shouldn't be started by default upon installation of the RPM.  leave that up to the admin.
------------------------------------------------------------------------
r20711 | felicity | 2004-05-31 19:55:50 +0000 (Mon, 31 May 2004) | 1 line

bug 3347: change the process name to make it easier to see which spamd is parent and which spamd is child
------------------------------------------------------------------------
r20710 | parker | 2004-05-31 19:48:15 +0000 (Mon, 31 May 2004) | 1 line

bug 3381: restore did not like a spam_count or ham_count == 0
------------------------------------------------------------------------
r20709 | mss | 2004-05-31 19:23:01 +0000 (Mon, 31 May 2004) | 2 lines

nothing fancy, just a newline

------------------------------------------------------------------------
r20708 | parker | 2004-05-31 19:17:48 +0000 (Mon, 31 May 2004) | 1 line

bug 3378: add some logic to nspam_nham_change to only update spam or ham count when necessary
------------------------------------------------------------------------
r20705 | parker | 2004-05-31 19:10:08 +0000 (Mon, 31 May 2004) | 1 line

bug 3414: fixed up schmea for postgresql
------------------------------------------------------------------------
r20695 | mss | 2004-05-31 16:09:35 +0000 (Mon, 31 May 2004) | 2 lines

bug 3451: the LOG_* stuff is an evil hack for Windows, should be cleanup up one day

------------------------------------------------------------------------
r20694 | mss | 2004-05-31 15:32:36 +0000 (Mon, 31 May 2004) | 2 lines

Not the most elegant way to add -Wall but should work for everybody with a GNU toolchain. If anybody uses something else which doesn't support -Wall, please supply a patch ;-)

------------------------------------------------------------------------
r20693 | mss | 2004-05-31 15:23:19 +0000 (Mon, 31 May 2004) | 2 lines

I need to get -Wall into the default Makefile :-/

------------------------------------------------------------------------
r20692 | mss | 2004-05-31 15:21:43 +0000 (Mon, 31 May 2004) | 2 lines

the fail: target is actually needed under Windows, too

------------------------------------------------------------------------
r20688 | mss | 2004-05-31 13:47:30 +0000 (Mon, 31 May 2004) | 2 lines

svn:ignore blibdirs

------------------------------------------------------------------------
r20687 | mss | 2004-05-31 13:41:22 +0000 (Mon, 31 May 2004) | 2 lines

bug 3431: fourth part, finally :) a conflict held this and number three back

------------------------------------------------------------------------
r20685 | quinlan | 2004-05-31 06:15:16 +0000 (Mon, 31 May 2004) | 2 lines

change SPF_PASS and SPF_HELO_PASS to be prerequisite rules

------------------------------------------------------------------------
r20683 | quinlan | 2004-05-31 05:55:49 +0000 (Mon, 31 May 2004) | 2 lines

removing T_SPF_PASS_NO_SBL - all of my hits are really spam

------------------------------------------------------------------------
r20682 | quinlan | 2004-05-31 05:11:02 +0000 (Mon, 31 May 2004) | 2 lines

T_MANY_MX* variations not as good as I thought they would be

------------------------------------------------------------------------
r20681 | quinlan | 2004-05-31 05:08:39 +0000 (Mon, 31 May 2004) | 2 lines

fix T_RATWARE_RCVD_PF_1

------------------------------------------------------------------------
r20679 | quinlan | 2004-05-31 04:46:03 +0000 (Mon, 31 May 2004) | 4 lines

remove T_REDIR_AOL_CLICKTHRU and T_SAVE_BUCKS
add T_MANY_MX_* for EnvelopeFrom instead of From:addr
fix description for T_DNS_FROM_SECURITYSAGE

------------------------------------------------------------------------
r20678 | quinlan | 2004-05-31 04:32:23 +0000 (Mon, 31 May 2004) | 2 lines

typo

------------------------------------------------------------------------
r20677 | quinlan | 2004-05-31 04:30:14 +0000 (Mon, 31 May 2004) | 2 lines

one of the SenderBase rules not working great in wider testing, so remove it

------------------------------------------------------------------------
r20676 | quinlan | 2004-05-31 04:13:41 +0000 (Mon, 31 May 2004) | 2 lines

remove -firsttrusted test rules

------------------------------------------------------------------------
r20675 | quinlan | 2004-05-31 04:08:34 +0000 (Mon, 31 May 2004) | 2 lines

some descriptions

------------------------------------------------------------------------
r20672 | quinlan | 2004-05-31 02:08:39 +0000 (Mon, 31 May 2004) | 4 lines

switch RCVD_IN_XBL, RCVD_IN_RFC_IPWHOIS, and RCVD_IN_DSBL to use
  -notfirsthop instead of -firsttrusted since it preserves the original hit
  rate much better with most or all of the FP benefit of -firstttrusted

------------------------------------------------------------------------
r20664 | sidney | 2004-05-30 23:50:00 +0000 (Sun, 30 May 2004) | 1 line

bug #3443: fix race conditions that left spamd zombies durin make test
------------------------------------------------------------------------
r20662 | quinlan | 2004-05-30 21:21:15 +0000 (Sun, 30 May 2004) | 2 lines

fix error that killed RCVD_IN_XBL hits for the weekly run

------------------------------------------------------------------------
r20659 | quinlan | 2004-05-30 19:46:46 +0000 (Sun, 30 May 2004) | 2 lines

remove T_RCVD_IN_RFC_IPWHOIS - already got promoted, not needed

------------------------------------------------------------------------
r20658 | quinlan | 2004-05-30 19:45:46 +0000 (Sun, 30 May 2004) | 2 lines

remove T_RCVD_IN_XBL and T_RCVD_IN_DSBL - not needed now

------------------------------------------------------------------------
r20619 | duncf | 2004-05-30 01:14:35 +0000 (Sun, 30 May 2004) | 1 line

add missing files to manifest
------------------------------------------------------------------------
r20598 | mss | 2004-05-29 14:37:07 +0000 (Sat, 29 May 2004) | 6 lines

Cleaned up the handling of networking related command line switches a bit:
* Invalid IP-addresses/hostnames weren't handled before -- spamd was always falling back to 127.0.0.1 silently.
* Even though the code looks different, hostnames for -i never worked. Those also fell back to 127.0.0.1 silently. Now the first available IP-address is used (or spamd dies if none is available).
* Added feature: ports can now be specified as names, too.
* Added feature: giving just the -i switch without a value will make spamd listen on all interfaces (0.0.0.0). That's still limited by the host filter (given by -A).

------------------------------------------------------------------------
r20580 | quinlan | 2004-05-29 06:15:56 +0000 (Sat, 29 May 2004) | 2 lines

renames

------------------------------------------------------------------------
r20579 | quinlan | 2004-05-29 06:13:47 +0000 (Sat, 29 May 2004) | 2 lines

renames

------------------------------------------------------------------------
r20578 | quinlan | 2004-05-29 06:12:57 +0000 (Sat, 29 May 2004) | 2 lines

fix compile error

------------------------------------------------------------------------
r20574 | jm | 2004-05-29 04:04:41 +0000 (Sat, 29 May 2004) | 1 line

promoted T_FAKE_HELO_MAIL_COM_DOM
------------------------------------------------------------------------
r20570 | quinlan | 2004-05-29 03:05:59 +0000 (Sat, 29 May 2004) | 3 lines

promote Subject test for sexually-explicit
revise header template rule

------------------------------------------------------------------------
r20567 | quinlan | 2004-05-29 02:03:29 +0000 (Sat, 29 May 2004) | 2 lines

remove most of the T_MANY_MX* rules

------------------------------------------------------------------------
r20566 | quinlan | 2004-05-29 01:59:12 +0000 (Sat, 29 May 2004) | 2 lines

remove T_DNS_FROM_AHBL_RHSBL - no real improvement with EnvelopeFrom

------------------------------------------------------------------------
r20565 | quinlan | 2004-05-29 01:57:39 +0000 (Sat, 29 May 2004) | 5 lines

change the three DNSBLS that improved the most via -firsttrusted logic
  to use it: RCVD_IN_XBL, RCVD_IN_DSBL
promote all of the RFC-Ignorant EnvelopeFrom rules, delete the old
  RFC-Ignorant From: rules

------------------------------------------------------------------------
r20564 | jm | 2004-05-29 01:22:13 +0000 (Sat, 29 May 2004) | 1 line

'spamtrap' commands are no longer supported; remove them from the Conf.pm parsing code
------------------------------------------------------------------------
r20563 | jm | 2004-05-29 01:18:17 +0000 (Sat, 29 May 2004) | 1 line

bug 2987: finish reordering Conf items to put frequently-used user options at top.   also took the opportunity to fix up some of the text, too
------------------------------------------------------------------------
r20562 | jm | 2004-05-29 00:50:22 +0000 (Sat, 29 May 2004) | 1 line

why was this using these modules?  that doesn't work
------------------------------------------------------------------------
r20560 | jm | 2004-05-29 00:42:21 +0000 (Sat, 29 May 2004) | 1 line

bug 3431: other third of the patch applied ;)
------------------------------------------------------------------------
r20559 | quinlan | 2004-05-28 23:52:51 +0000 (Fri, 28 May 2004) | 4 lines

switch NJABL dynamic test to use new zone
rename RCVD_IN_NJABL_DIALUP to RCVD_IN_NJABL_DUL to match other rules
(maybe they should all be named *DYN instead, though)

------------------------------------------------------------------------
r20555 | mss | 2004-05-28 22:27:43 +0000 (Fri, 28 May 2004) | 2 lines

bug 3431: added tags _REMOTEHOSTNAME_ and _REMOTEHOSTADDR_

------------------------------------------------------------------------
r20554 | mss | 2004-05-28 22:20:51 +0000 (Fri, 28 May 2004) | 2 lines

bug 3441: completing the fix (note to myself: vi doesn't always DWIM)

------------------------------------------------------------------------
r20552 | mss | 2004-05-28 21:47:40 +0000 (Fri, 28 May 2004) | 2 lines

bug 3441: make sure the string we free was allocated by us.

------------------------------------------------------------------------
r20551 | felicity | 2004-05-28 20:12:05 +0000 (Fri, 28 May 2004) | 1 line

3.0.0 is really 3.000000, so fix it in the spec file
------------------------------------------------------------------------
r20550 | felicity | 2004-05-28 20:02:01 +0000 (Fri, 28 May 2004) | 1 line

bug 3340: new conf code has a multi-level hash which has CODE references.  skip that in the config copy function.
------------------------------------------------------------------------
r20549 | quinlan | 2004-05-28 19:40:58 +0000 (Fri, 28 May 2004) | 2 lines

update SenderBase tests to use revised subtest format

------------------------------------------------------------------------
r20548 | quinlan | 2004-05-28 19:39:04 +0000 (Fri, 28 May 2004) | 6 lines

revise and update the DNSBL documentation
change SenderBase tests to be prefixed with "sb:" instead of relying on
  the set name to distinguish them
lower magnitude cut-off for SB_NSP_VOLUME_SPIKE based on test rule results
  and remove those test rules

------------------------------------------------------------------------
r20537 | jm | 2004-05-28 07:26:43 +0000 (Fri, 28 May 2004) | 1 line

oops; test failure
------------------------------------------------------------------------
r20536 | jm | 2004-05-28 07:25:45 +0000 (Fri, 28 May 2004) | 1 line

moved another method, and some documentation, over to new Parser class.  also had to convert some constants back into vars for the move; possible TODO: move them to Constants.pm
------------------------------------------------------------------------
r20529 | jm | 2004-05-28 07:06:55 +0000 (Fri, 28 May 2004) | 1 line

Conf reorg continued; broke out parsing code into a separate parsing class.  also fixed some bugs that 'make test' hadn't shown up; however 'make test' is failing in t/spamd_allow_user_rules.t due to spamc coredumping when the -u switch is used ;)
------------------------------------------------------------------------
r20528 | jm | 2004-05-28 07:06:33 +0000 (Fri, 28 May 2004) | 1 line

Conf reorg continued; broke out parsing code into a separate parsing class.  also fixed some bugs that 'make test' hadn't shown up; however 'make test' is failing in t/spamd_allow_user_rules.t due to spamc coredumping when the -u switch is used ;)
------------------------------------------------------------------------
r20527 | jm | 2004-05-28 07:00:20 +0000 (Fri, 28 May 2004) | 1 line

removed some not-so-hot ratware rules
------------------------------------------------------------------------
r20526 | jm | 2004-05-28 05:36:53 +0000 (Fri, 28 May 2004) | 1 line

bug 2987: first part of Conf reorg.  adopt new model which allows us to move conf items around.  also faster: 0m23.763s for 100 --lint runs, compared with 0m26.861s for the old style
------------------------------------------------------------------------
r20522 | mss | 2004-05-27 23:00:45 +0000 (Thu, 27 May 2004) | 2 lines

ANSI comment :)

------------------------------------------------------------------------
r20521 | mss | 2004-05-27 22:42:09 +0000 (Thu, 27 May 2004) | 2 lines

EX_NOTSPAM == EX_OK *grmbl*

------------------------------------------------------------------------
r20520 | mss | 2004-05-27 22:36:33 +0000 (Thu, 27 May 2004) | 3 lines

* 'goto finish' is the way to go because else we miss WSACleanup() on Windows
* Removed a FIXME added by me, added a descriptive comment instead.

------------------------------------------------------------------------
r20519 | mss | 2004-05-27 22:24:43 +0000 (Thu, 27 May 2004) | 4 lines

* Refactored the username determination into its own subroutine. This actually fixed a bug on Windows as WSACleanup() is now called on failure.
* Made the memory for username allocated dynamically. Why always use 255 bytes with some weird buffer handling when often a few bytes are enough?
* Got rid of an ifdef-bug on Windows I introduced before.

------------------------------------------------------------------------
r20518 | mss | 2004-05-27 21:22:45 +0000 (Thu, 27 May 2004) | 5 lines

Some code cleanup:
* Mostly fixed indentations and spacing.
* Replaced two simple cases with guard clauses instead of if() or #ifdef
* Replaced the double WSACleanup() with a goto. This is a case where gotos aren't evil :)

------------------------------------------------------------------------
r20515 | mss | 2004-05-27 19:12:53 +0000 (Thu, 27 May 2004) | 2 lines

Some more help/usage/versioning cleanup.

------------------------------------------------------------------------
r20503 | mss | 2004-05-27 12:48:55 +0000 (Thu, 27 May 2004) | 2 lines

Added some maintenance stuff I forgot for the spamc versioning.

------------------------------------------------------------------------
r20500 | mss | 2004-05-27 12:35:47 +0000 (Thu, 27 May 2004) | 2 lines

Added often-requested -V switch to spamc. Finally one can check out which version of spamc is installed on his box :)

------------------------------------------------------------------------
r20497 | mss | 2004-05-27 11:07:12 +0000 (Thu, 27 May 2004) | 4 lines

* spamc now returns success if it was called with -h (like any good tool).
* In main, the return value of read_args is honored.
* Added a missing newline in the help I accidently removed before.

------------------------------------------------------------------------
r20489 | mss | 2004-05-26 21:19:27 +0000 (Wed, 26 May 2004) | 4 lines

Rearranged the help (again?), make it break before 80 chars.

Also added a few empty lines and a FALLTHROUGH to make the code easier to read.

------------------------------------------------------------------------
r20471 | quinlan | 2004-05-26 12:09:17 +0000 (Wed, 26 May 2004) | 3 lines

remove low TTL domains
add some new domains

------------------------------------------------------------------------
r20452 | duncf | 2004-05-26 04:04:29 +0000 (Wed, 26 May 2004) | 1 line

Added UPGRADE to MANIFEST. Damn MANIFEST
------------------------------------------------------------------------
r20451 | jm | 2004-05-26 01:44:24 +0000 (Wed, 26 May 2004) | 1 line

comment about TTLs
------------------------------------------------------------------------
r20450 | jm | 2004-05-26 01:36:01 +0000 (Wed, 26 May 2004) | 1 line

bug 3419: use NS queries instead of MX to lessen load
------------------------------------------------------------------------
r20449 | jm | 2004-05-26 01:25:12 +0000 (Wed, 26 May 2004) | 1 line

bug 3320: insecure setuid eval possibly worked around using a similar fix to bug 3325
------------------------------------------------------------------------
r20444 | quinlan | 2004-05-25 19:39:19 +0000 (Tue, 25 May 2004) | 5 lines

do some checking for T_HAS_TEMPLATE* rules since we're not catching all
  the ham yet
remove T_SPECIAL_BY_CHOICE* because it sucks
add some more T_MANY_MX variants

------------------------------------------------------------------------
r20428 | mss | 2004-05-25 11:18:43 +0000 (Tue, 25 May 2004) | 2 lines

Tiny docu update.

------------------------------------------------------------------------
r20372 | jm | 2004-05-24 19:22:26 +0000 (Mon, 24 May 2004) | 1 line

some code from the weekend; fix UTF-8 warnings due to UTF-8-tainted data from HTML-Parser, and some interesting new ratware Received header rules
------------------------------------------------------------------------
r20371 | jm | 2004-05-24 19:14:14 +0000 (Mon, 24 May 2004) | 1 line

clarified Duncan's clarification
------------------------------------------------------------------------
r20364 | quinlan | 2004-05-24 17:26:23 +0000 (Mon, 24 May 2004) | 2 lines

add new attempt at template rule

------------------------------------------------------------------------
r20283 | duncf | 2004-05-24 03:42:04 +0000 (Mon, 24 May 2004) | 5 lines

More documentation changes. Created "UPGRADE" to deal with upgrade
notes rather than sticking them in INSTALL. This is useful for Debian
since they've already installed SA, so we don't need to show them how;
yet upgrade issues are still relavent.

------------------------------------------------------------------------
r20282 | duncf | 2004-05-24 03:32:33 +0000 (Mon, 24 May 2004) | 2 lines

Clarified user_prefs stuff. Was a debian patch

------------------------------------------------------------------------
r20280 | duncf | 2004-05-24 03:23:05 +0000 (Mon, 24 May 2004) | 3 lines

Added note about anti-From munging thingy in procmailrc.example
I'd had this as a debian specific patch before, but that's unnecessary!

------------------------------------------------------------------------
r20274 | duncf | 2004-05-24 01:51:38 +0000 (Mon, 24 May 2004) | 5 lines

Made some updates to the README -- removed some stuff referring to old
code. Also added Apache Incubator notice (I think we're required to
under ASF policy, someone correct me if I'm wrong. Also, I'm assuming
Sponsor = Apache BOD)

------------------------------------------------------------------------
r20272 | felicity | 2004-05-23 23:15:44 +0000 (Sun, 23 May 2004) | 1 line

bug 3422: fix FPs for RCVD_ILLEGAL_IP, only use untrusted relays, use the parsed data, not the raw received string...
------------------------------------------------------------------------
r20236 | quinlan | 2004-05-23 06:35:54 +0000 (Sun, 23 May 2004) | 2 lines

this needs to be case-insensitive

------------------------------------------------------------------------
r20232 | quinlan | 2004-05-23 04:47:30 +0000 (Sun, 23 May 2004) | 3 lines

be less restrictive about score ranges and mutability (mutability is
probably what makes the most difference)

------------------------------------------------------------------------
r20228 | quinlan | 2004-05-22 21:05:32 +0000 (Sat, 22 May 2004) | 2 lines

alphabetize

------------------------------------------------------------------------
r20227 | quinlan | 2004-05-22 21:04:29 +0000 (Sat, 22 May 2004) | 2 lines

formatting

------------------------------------------------------------------------
r20226 | quinlan | 2004-05-22 21:04:04 +0000 (Sat, 22 May 2004) | 2 lines

remove 58/8 and 59/8 - no longer reserved

------------------------------------------------------------------------
r20225 | quinlan | 2004-05-22 20:53:21 +0000 (Sat, 22 May 2004) | 2 lines

update list of well-connected domains (see bug 3419)

------------------------------------------------------------------------
r20217 | felicity | 2004-05-22 16:56:36 +0000 (Sat, 22 May 2004) | 1 line

bug 3345: sometimes for a bayes scan we can't tie the db, so we will skip the scan but still try the opportunistic calls which expect a tied db...  we will now only do the opportunistic calls if the scan completes sucessfully.
------------------------------------------------------------------------
r20213 | parker | 2004-05-22 14:55:32 +0000 (Sat, 22 May 2004) | 1 line

Bug 3377: Remove trailing comma in table create
------------------------------------------------------------------------
r20206 | quinlan | 2004-05-22 05:17:41 +0000 (Sat, 22 May 2004) | 2 lines

try using -firsttrusted for most DNSBL tests

------------------------------------------------------------------------
r20205 | quinlan | 2004-05-22 05:16:53 +0000 (Sat, 22 May 2004) | 2 lines

remove OPM and an old comment

------------------------------------------------------------------------
r20204 | quinlan | 2004-05-22 03:57:21 +0000 (Sat, 22 May 2004) | 3 lines

add rule for sexually-explicit tag
add new version of XBL test that should FP less

------------------------------------------------------------------------
r20203 | quinlan | 2004-05-22 01:53:29 +0000 (Sat, 22 May 2004) | 2 lines

performance tweaks (21% faster)

------------------------------------------------------------------------
r20202 | felicity | 2004-05-21 23:52:43 +0000 (Fri, 21 May 2004) | 1 line

rh bug 123739: -P is still documented, even though it's been removed from the parameter parsing section.
------------------------------------------------------------------------
r20201 | quinlan | 2004-05-21 21:43:10 +0000 (Fri, 21 May 2004) | 5 lines

rename CT_BOUND_DDNUM to MIME_BOUND_DD_DIGITS per convention
remove some poor test rules
revise T_OFFER_BY_CHOICE* to T_SPECIAL_BY_CHOICE*
promote MSGID_YAHOO_CAPS and MSGID_SPAM_CAPS (bugs 3395 and 3399)

------------------------------------------------------------------------
r20200 | mss | 2004-05-21 19:08:20 +0000 (Fri, 21 May 2004) | 2 lines

Added ->finish() calls to SYNOPSIS

------------------------------------------------------------------------
r20199 | mss | 2004-05-21 19:01:32 +0000 (Fri, 21 May 2004) | 2 lines

Removed some code duplication, now Message.pm is used to parse mail headers. Also made it possible to free some mem after the mail is parsed.

------------------------------------------------------------------------
r20186 | felicity | 2004-05-21 06:47:30 +0000 (Fri, 21 May 2004) | 1 line

fix long descriptions
------------------------------------------------------------------------
r20185 | felicity | 2004-05-21 06:44:37 +0000 (Fri, 21 May 2004) | 1 line

put in a default score for CT_BOUND_DDNUM ...
------------------------------------------------------------------------
r20178 | felicity | 2004-05-21 05:58:40 +0000 (Fri, 21 May 2004) | 1 line

promote CT_BOUND_DDNUM ...  exceptional rule, at least for now...
------------------------------------------------------------------------
r20177 | duncf | 2004-05-21 04:20:54 +0000 (Fri, 21 May 2004) | 1 line

Apparently my wishlist is a 404 -- if you want to buy me stuff, just send me an e-mail :-)
------------------------------------------------------------------------
r20175 | quinlan | 2004-05-21 02:47:26 +0000 (Fri, 21 May 2004) | 2 lines

some T_MANY_MX* tests

------------------------------------------------------------------------
r20174 | yackley | 2004-05-21 02:10:51 +0000 (Fri, 21 May 2004) | 1 line

Updated fraud tests, updated many_mx testes, removed tests for bug: 3349
------------------------------------------------------------------------
r20173 | quinlan | 2004-05-21 01:49:30 +0000 (Fri, 21 May 2004) | 2 lines

bug 3410: add envelope-from testing for RFC-ignorant (much better results!)

------------------------------------------------------------------------
r20172 | quinlan | 2004-05-21 01:48:36 +0000 (Fri, 21 May 2004) | 2 lines

no -rhs needed since the non-RHS blacklist was dropped

------------------------------------------------------------------------
r20171 | quinlan | 2004-05-20 19:15:51 +0000 (Thu, 20 May 2004) | 2 lines

some code formatting clean-up

------------------------------------------------------------------------
r20170 | quinlan | 2004-05-20 19:13:03 +0000 (Thu, 20 May 2004) | 4 lines

add check_rbl_envfrom for RFCI DSN test (bug 3410) and add
  T_DNS_FROM_RFCI_DSN to tests it
some code formatting clean-up

------------------------------------------------------------------------
r20169 | felicity | 2004-05-20 18:21:50 +0000 (Thu, 20 May 2004) | 1 line

whowhere.com seems to be everyone else's FPs for the MSGID_CAPS rules, so add them to the negative look-ahead ...
------------------------------------------------------------------------
r20168 | quinlan | 2004-05-20 18:11:29 +0000 (Thu, 20 May 2004) | 2 lines

new version of OBSCURED_EMAIL

------------------------------------------------------------------------
r20167 | quinlan | 2004-05-20 18:01:35 +0000 (Thu, 20 May 2004) | 3 lines

add some T_MSGID_CAPS* variants (bug 3399)
remove T_HEXOCTDWORD* due to poor results (bug 3403)

------------------------------------------------------------------------
r10719 | felicity | 2004-05-19 17:24:08 +0000 (Wed, 19 May 2004) | 1 line

circular meta dependencies ought to trigger a --lint warning.  added a --lint generic 'something is wrong' message.  instead of exiting with # of errors, exit 1 if errors, 0 if not. (don't overflow the exit code...)
------------------------------------------------------------------------
r10714 | yackley | 2004-05-19 03:33:13 +0000 (Wed, 19 May 2004) | 1 line

Fixed test fraud rule typo
------------------------------------------------------------------------
r10713 | yackley | 2004-05-19 03:29:13 +0000 (Wed, 19 May 2004) | 1 line

Updated test fraud rules
------------------------------------------------------------------------
r10712 | quinlan | 2004-05-18 09:00:10 +0000 (Tue, 18 May 2004) | 3 lines

add option to only read first N lines (useful for doing comparisons
between old mass-check logs and new ones if you're impatient)

------------------------------------------------------------------------
r10711 | quinlan | 2004-05-18 08:58:33 +0000 (Tue, 18 May 2004) | 2 lines

default score set should be 0

------------------------------------------------------------------------
r10710 | quinlan | 2004-05-18 08:54:19 +0000 (Tue, 18 May 2004) | 3 lines

some test rule churn
bug 3403: rule for detecting encoded IP addresses

------------------------------------------------------------------------
r10709 | quinlan | 2004-05-18 08:53:22 +0000 (Tue, 18 May 2004) | 2 lines

lower DOMAIN_RATIO threshold a bit

------------------------------------------------------------------------
r10708 | mss | 2004-05-18 07:47:00 +0000 (Tue, 18 May 2004) | 2 lines

Consistently prefix all internal function with an underscore.

------------------------------------------------------------------------
r10707 | yackley | 2004-05-18 05:51:06 +0000 (Tue, 18 May 2004) | 1 line

Updated test fraud rules
------------------------------------------------------------------------
r10706 | mss | 2004-05-17 22:58:23 +0000 (Mon, 17 May 2004) | 2 lines

bug 3353: this is the correct fix, hopefully

------------------------------------------------------------------------
r10705 | mss | 2004-05-17 22:35:00 +0000 (Mon, 17 May 2004) | 2 lines

bug 3354: the local[0-9] syslog facilities didn't work because [0-9] are non-word characters (?)

------------------------------------------------------------------------
r10703 | felicity | 2004-05-16 23:01:51 +0000 (Sun, 16 May 2004) | 1 line

bug 3399: more suggested message-id based rules
------------------------------------------------------------------------
r10702 | yackley | 2004-05-16 21:36:15 +0000 (Sun, 16 May 2004) | 1 line

Bug 3374: Promoted DRUG_DOSAGE to 20_drugs.cf
------------------------------------------------------------------------
r10701 | quinlan | 2004-05-16 20:25:17 +0000 (Sun, 16 May 2004) | 2 lines

get most of the tenpass stuff to the point where it runs

------------------------------------------------------------------------
r10700 | quinlan | 2004-05-16 09:51:41 +0000 (Sun, 16 May 2004) | 2 lines

promote a few of the SenderBase rules that have been in testing

------------------------------------------------------------------------
r10699 | quinlan | 2004-05-16 09:10:58 +0000 (Sun, 16 May 2004) | 2 lines

add <th> and <dt> as whitespace tags (reduces BACKHAIR_* hits some)

------------------------------------------------------------------------
r10692 | felicity | 2004-05-16 08:30:36 +0000 (Sun, 16 May 2004) | 1 line

bug 3396: new rule suggestion, look for content-type boundary format
------------------------------------------------------------------------
r10691 | felicity | 2004-05-16 08:25:04 +0000 (Sun, 16 May 2004) | 1 line

bug 3395: suggested rule T_YAHOO_MSGID_CAPS
------------------------------------------------------------------------
r10689 | felicity | 2004-05-16 08:12:54 +0000 (Sun, 16 May 2004) | 1 line

update INSTALL doc to talk a little about CPAN, and how we don't support third party modules...
------------------------------------------------------------------------
r10687 | quinlan | 2004-05-16 06:47:23 +0000 (Sun, 16 May 2004) | 4 lines

bug 3372: HTML parser confused by blank lines in paragraph
  buffer up text until a new whitespace tag is encountered,
  when printing the buffer, collapse whitespace reasonably correctly

------------------------------------------------------------------------
r10686 | yackley | 2004-05-16 04:52:12 +0000 (Sun, 16 May 2004) | 1 line

Updated test rules for PER_DOSE and fraud
------------------------------------------------------------------------
r10685 | quinlan | 2004-05-15 19:27:00 +0000 (Sat, 15 May 2004) | 2 lines

formatting, don't use T_ prefix for prerequisite tests

------------------------------------------------------------------------
r10684 | quinlan | 2004-05-15 19:26:05 +0000 (Sat, 15 May 2004) | 2 lines

switch to using new flag for HTML_MESSAGE

------------------------------------------------------------------------
r10683 | felicity | 2004-05-15 18:52:29 +0000 (Sat, 15 May 2004) | 1 line

skip using a variable for a constant in mbx code, also change 'foo ;' to just 'foo;'
------------------------------------------------------------------------
r10681 | mss | 2004-05-15 15:43:43 +0000 (Sat, 15 May 2004) | 2 lines

This makes more sense.

------------------------------------------------------------------------
r10680 | mss | 2004-05-15 13:19:29 +0000 (Sat, 15 May 2004) | 2 lines

bug 3383: added support for folded Message-Ids

------------------------------------------------------------------------
r10679 | quinlan | 2004-05-15 11:10:06 +0000 (Sat, 15 May 2004) | 3 lines

remove some old testing code
add html_message flag for HTML_MESSAGE

------------------------------------------------------------------------
r10678 | jm | 2004-05-15 08:24:40 +0000 (Sat, 15 May 2004) | 1 line

oops, leftover test code
------------------------------------------------------------------------
r10672 | jm | 2004-05-15 04:49:27 +0000 (Sat, 15 May 2004) | 1 line

bug 3325: Insecure dependency in Dns.pm line 214: fixed, here at least.  seems to be tickling a perl bug...
------------------------------------------------------------------------
r10669 | yackley | 2004-05-15 04:03:51 +0000 (Sat, 15 May 2004) | 1 line

Fixed typo in rule name T__FRAUD_BARRISTR
------------------------------------------------------------------------
r10668 | jm | 2004-05-15 03:46:10 +0000 (Sat, 15 May 2004) | 1 line

oops, MIME::Base64 listed twice
------------------------------------------------------------------------
r10667 | jm | 2004-05-15 02:37:55 +0000 (Sat, 15 May 2004) | 1 line

bug 3322: fixed LDAP driver problems when there's no username/password, thanks to Turbo Fredriksson.  also updated ldap/README.testing for Debian unstable.
------------------------------------------------------------------------
r10666 | jm | 2004-05-15 01:38:42 +0000 (Sat, 15 May 2004) | 1 line

bug 3368: URL parsing assumed mailto if scheme was missing in a href.  Fixed
------------------------------------------------------------------------
r10665 | jm | 2004-05-15 01:33:37 +0000 (Sat, 15 May 2004) | 1 line

bug 2372: added support for the parsing of mbx mailboxes (the mailbox format used within the University of Washington's IMAP implementation -- http://www.washington.edu/imap/).  Thanks to John Newman for this patch
------------------------------------------------------------------------
r10649 | felicity | 2004-05-14 16:56:59 +0000 (Fri, 14 May 2004) | 1 line

bug 3384: if a message came in with a doctype set, but no other html tags, we could get undefined/division by 0 errors when rendering/setting HTML results.
------------------------------------------------------------------------
r10633 | yackley | 2004-05-14 01:54:38 +0000 (Fri, 14 May 2004) | 1 line

Added my fraud rule meta set
------------------------------------------------------------------------
r10630 | mss | 2004-05-14 00:00:01 +0000 (Fri, 14 May 2004) | 2 lines

Fix up the SYNOPSIS (parse() was missing the data)

------------------------------------------------------------------------
r10629 | quinlan | 2004-05-13 23:02:15 +0000 (Thu, 13 May 2004) | 5 lines

clean up anchor code - no additional ham hits, spam hits changed as follows:
  HTML_LINK_CLICK_CAPS increased from 3.14% to 3.82%
  HTML_LINK_CLICK_HERE increased from 15.16% to 19.71%
  HTML_LINK_PUSH_HERE increased from 2.02% to 2.23%

------------------------------------------------------------------------
r10614 | jm | 2004-05-13 04:28:40 +0000 (Thu, 13 May 2004) | 1 line

bug 3197: Dutch translation, thanks to Jesse Houwing
------------------------------------------------------------------------
r10613 | quinlan | 2004-05-13 03:36:39 +0000 (Thu, 13 May 2004) | 3 lines

some test rules (some really added due to other changes forthcoming in
whitespace handling, but these are safe to check in now)

------------------------------------------------------------------------
r10612 | yackley | 2004-05-13 03:34:21 +0000 (Thu, 13 May 2004) | 1 line

Submitted rules for bugs 3374 & 3349, added a few more MANY_MX rules
------------------------------------------------------------------------
r10611 | sidney | 2004-05-13 02:25:44 +0000 (Thu, 13 May 2004) | 1 line

Bug #3039 further fixes for WIN32 and remove use of %m left over from calls to syslog
------------------------------------------------------------------------
r10600 | jm | 2004-05-12 07:16:59 +0000 (Wed, 12 May 2004) | 1 line

bug 3039: added log-to-stderr support for spamc, -l switch
------------------------------------------------------------------------
r10599 | jm | 2004-05-12 06:38:54 +0000 (Wed, 12 May 2004) | 1 line

bug in Received; double-unpacking of IP addrs
------------------------------------------------------------------------
r10598 | yackley | 2004-05-12 04:17:00 +0000 (Wed, 12 May 2004) | 1 line

Fixed slight typo in T_MANY_MX_4.
------------------------------------------------------------------------
r10597 | yackley | 2004-05-12 03:10:26 +0000 (Wed, 12 May 2004) | 1 line

Added rules to check From addresses for high numbered MX hosts.
------------------------------------------------------------------------
r10592 | quinlan | 2004-05-11 10:02:07 +0000 (Tue, 11 May 2004) | 2 lines

fix annoying warning

------------------------------------------------------------------------
r10591 | jm | 2004-05-11 07:19:44 +0000 (Tue, 11 May 2004) | 1 line

added a diagnostic method to --lint, which lists the versions of various installed modules for debugging
------------------------------------------------------------------------
r10589 | felicity | 2004-05-11 04:46:05 +0000 (Tue, 11 May 2004) | 1 line

specify which version of the Storable module is found
------------------------------------------------------------------------
r10583 | jm | 2004-05-10 17:54:29 +0000 (Mon, 10 May 2004) | 1 line

need DB_File for this test
------------------------------------------------------------------------
r10577 | quinlan | 2004-05-10 08:56:14 +0000 (Mon, 10 May 2004) | 2 lines

some test rules resurrected from the past

------------------------------------------------------------------------
r10574 | felicity | 2004-05-10 05:10:10 +0000 (Mon, 10 May 2004) | 1 line

bug 3366: a from address of 'foo@bar...' was causing issues with Net::DNS.  1) don't bother doing an A or MX lookup on 'bar...' -- trim it to 'bar.', then notice that it's not at made up of at least 2 parts and skip.  2) in all_from_addrs, unique the list of addresses, and also deal with the 'bar...' names -- squish to 'bar.'.
------------------------------------------------------------------------
r10572 | quinlan | 2004-05-10 00:54:06 +0000 (Mon, 10 May 2004) | 2 lines

update of SenderBase rules

------------------------------------------------------------------------
r10571 | jm | 2004-05-09 22:46:56 +0000 (Sun, 09 May 2004) | 1 line

bug 3327: fix 'undefined' warning in spamd_utf8.t
------------------------------------------------------------------------
r10570 | jm | 2004-05-09 22:45:16 +0000 (Sun, 09 May 2004) | 1 line

a couple of things that people say should never be in legit mail
------------------------------------------------------------------------
r10569 | quinlan | 2004-05-09 20:17:04 +0000 (Sun, 09 May 2004) | 5 lines

update of corpus tools
- more retries and reliability stuff for corpus-nightly
- more complete crontab
- updates to summary script

------------------------------------------------------------------------
r10565 | quinlan | 2004-05-08 08:41:24 +0000 (Sat, 08 May 2004) | 2 lines

add SenderBase tests

------------------------------------------------------------------------
r10564 | jm | 2004-05-08 00:51:32 +0000 (Sat, 08 May 2004) | 1 line

bug 3327: spamd_utf8.t test fails if the locale is not installed
------------------------------------------------------------------------
r10563 | felicity | 2004-05-07 19:43:30 +0000 (Fri, 07 May 2004) | 4 lines

replace code for decode_ulong_to_ip.  in a test, 100_000 iterations
took 0.81 seconds, whereas the new version, same 100_000 iterations took
0.55 seconds.

------------------------------------------------------------------------
r10553 | jm | 2004-05-07 05:16:17 +0000 (Fri, 07 May 2004) | 1 line

bug 3009: Matt Kettler's antidrug.cf ruleset taken out of testing and added to core ruleset
------------------------------------------------------------------------
r10552 | jm | 2004-05-07 04:36:42 +0000 (Fri, 07 May 2004) | 1 line

spam spotted in wild evading URIBL, so deal with several URI obfuscations: http://0x425c45de/, http://66.92.0x45.221/, http://1113343455/, http://slashdot.org@1113343456/ in get_uri_list
------------------------------------------------------------------------
r10551 | quinlan | 2004-05-07 02:20:36 +0000 (Fri, 07 May 2004) | 2 lines

SA doesn't "block", so say "label" instead

------------------------------------------------------------------------
r10550 | quinlan | 2004-05-07 01:32:46 +0000 (Fri, 07 May 2004) | 3 lines

replace FROM_NO_LOWER with T_FROM_NO_LOWER_3
promote T_ADVERT_CODE to ENGLISH_UCE_SUBJECT

------------------------------------------------------------------------
r10543 | quinlan | 2004-05-06 08:56:48 +0000 (Thu, 06 May 2004) | 2 lines

translations

------------------------------------------------------------------------
r10542 | quinlan | 2004-05-06 08:34:27 +0000 (Thu, 06 May 2004) | 2 lines

bug 2419: merging a bunch of Bayes ranges

------------------------------------------------------------------------
r10541 | jm | 2004-05-06 05:47:53 +0000 (Thu, 06 May 2004) | 1 line

bug 3241: added an implementation of an NFS-safe unlocker.  Thanks to Alexis Rosen for reminding me on this.  also tweaked the test scripts to avoid frequent test failures I'm getting on linux 2.6.x kernels due to un-shut-down spamd
------------------------------------------------------------------------
r10540 | quinlan | 2004-05-06 05:40:46 +0000 (Thu, 06 May 2004) | 2 lines

so long, goodbye

------------------------------------------------------------------------
r10538 | jm | 2004-05-06 05:00:30 +0000 (Thu, 06 May 2004) | 1 line

bug 3046: added --socketowner, --socketgroup, --socketmode parameters to spamd
------------------------------------------------------------------------
r10537 | jm | 2004-05-06 04:11:20 +0000 (Thu, 06 May 2004) | 1 line

merged in newer version of antidrug.cf: v0.65
------------------------------------------------------------------------
r10536 | quinlan | 2004-05-06 02:36:40 +0000 (Thu, 06 May 2004) | 3 lines

remove T_FROM_DELPHI
add T_FROM_NO_LOWER_4 variant

------------------------------------------------------------------------
r10535 | quinlan | 2004-05-05 22:20:28 +0000 (Wed, 05 May 2004) | 2 lines

minor typo (no effect)

------------------------------------------------------------------------
r10534 | quinlan | 2004-05-05 22:09:54 +0000 (Wed, 05 May 2004) | 3 lines

need a normalization factor since number of ranks will differ between
wanted and unwanted

------------------------------------------------------------------------
r10533 | quinlan | 2004-05-05 21:34:19 +0000 (Wed, 05 May 2004) | 3 lines

new wanted/unwanted ranking system
add -i option for IG ranking system

------------------------------------------------------------------------
r10532 | quinlan | 2004-05-05 08:59:13 +0000 (Wed, 05 May 2004) | 2 lines

promote HTML size tests

------------------------------------------------------------------------
r10529 | quinlan | 2004-05-05 06:19:45 +0000 (Wed, 05 May 2004) | 2 lines

bunch of rule stuff

------------------------------------------------------------------------
r10528 | quinlan | 2004-05-05 05:46:36 +0000 (Wed, 05 May 2004) | 2 lines

fix SPF bug where one-word HELO hostnames were being checked

------------------------------------------------------------------------
r10527 | jm | 2004-05-05 04:53:07 +0000 (Wed, 05 May 2004) | 1 line

attempt to placate Dan
------------------------------------------------------------------------
r10526 | quinlan | 2004-05-05 04:34:17 +0000 (Wed, 05 May 2004) | 5 lines

as predicted, spammers are already using SPF in good numbers
last week of email:
  5.063   2.1322   6.6538    0.243   1.00   -0.00  SPF_HELO_PASS
  0.625   0.5330   0.6750    0.441   0.01   -0.00  SPF_PASS

------------------------------------------------------------------------
r10521 | quinlan | 2004-05-04 23:13:40 +0000 (Tue, 04 May 2004) | 2 lines

bug 3351: possible FROM_NO_LOWER replacements

------------------------------------------------------------------------
r10518 | quinlan | 2004-05-04 13:53:48 +0000 (Tue, 04 May 2004) | 2 lines

typo

------------------------------------------------------------------------
r10517 | jm | 2004-05-04 02:52:52 +0000 (Tue, 04 May 2004) | 1 line

flock() Locker code was using a non-blocking method where it should have been using blocking
------------------------------------------------------------------------
r10516 | felicity | 2004-05-03 22:55:54 +0000 (Mon, 03 May 2004) | 1 line

do more error checking during header parsing.  don't allow undef header values, etc.  also, get_header() wasn't checking for an undef return value from header() or raw_header(), which happens if a query is made for a non-existant header.
------------------------------------------------------------------------
r10504 | quinlan | 2004-05-03 04:31:19 +0000 (Mon, 03 May 2004) | 2 lines

more possible Senderbase rules

------------------------------------------------------------------------
r10502 | parker | 2004-05-03 02:05:12 +0000 (Mon, 03 May 2004) | 1 line

Implement tok_touch_all to update useful tokens in one call
------------------------------------------------------------------------
r10501 | quinlan | 2004-05-03 00:18:27 +0000 (Mon, 03 May 2004) | 3 lines

some rule promotions
remove some SenderBase rules

------------------------------------------------------------------------
r10500 | quinlan | 2004-05-03 00:15:12 +0000 (Mon, 03 May 2004) | 2 lines

replace X_MESSAGE_INFO with less-narrow version

------------------------------------------------------------------------
r10499 | quinlan | 2004-05-03 00:14:10 +0000 (Mon, 03 May 2004) | 2 lines

replace RCVD_NUMERIC_HELO with better eval

------------------------------------------------------------------------
r10498 | quinlan | 2004-05-03 00:13:47 +0000 (Mon, 03 May 2004) | 3 lines

promote HTML_TEXT_AFTER_BODY
promote HTML_TEXT_AFTER_HTML

------------------------------------------------------------------------
r10497 | quinlan | 2004-05-02 21:51:16 +0000 (Sun, 02 May 2004) | 2 lines

always start with a reasonable default configuration

------------------------------------------------------------------------
r10496 | felicity | 2004-05-02 21:34:43 +0000 (Sun, 02 May 2004) | 1 line

M::SA::Received is really part of Metadata, so move it to the appropriate area.  undo some metadata reference kluges.  be more complete in finish() calls -- instead of just deleting certain keys, go ahead and delete them all.  also get rid of the useless "$self={}" statements ("%{$self} = ()" is what was meant...)
------------------------------------------------------------------------
r10495 | parker | 2004-05-02 20:40:49 +0000 (Sun, 02 May 2004) | 1 line

Bug 3344: added a comment
------------------------------------------------------------------------
r10494 | parker | 2004-05-02 20:27:44 +0000 (Sun, 02 May 2004) | 1 line

Bug 3344: Avoid calling sqrt on negative number
------------------------------------------------------------------------
r10493 | quinlan | 2004-05-02 19:32:11 +0000 (Sun, 02 May 2004) | 2 lines

T_PERCENT_RANDOM*

------------------------------------------------------------------------
r10488 | felicity | 2004-05-02 17:30:37 +0000 (Sun, 02 May 2004) | 1 line

two things: move receive_date from Bayes and ArchiveIterator and put it in Util instead -- two copies of the same logic code makes no sense.  add a --before option to mass-check, works in the same was as --after.
------------------------------------------------------------------------
r10486 | felicity | 2004-05-02 16:01:35 +0000 (Sun, 02 May 2004) | 1 line

bug 3343: rewrote most of split_domain() to be more efficient and do better handling of exception cases
------------------------------------------------------------------------
r10485 | felicity | 2004-05-01 22:19:32 +0000 (Sat, 01 May 2004) | 1 line

bug 3341: added documentation that IP::Country::Fast is required if using the optional pluging RelayCountry.
------------------------------------------------------------------------
r10479 | quinlan | 2004-05-01 08:42:07 +0000 (Sat, 01 May 2004) | 2 lines

separate out prefix characters

------------------------------------------------------------------------
r10478 | quinlan | 2004-05-01 07:25:01 +0000 (Sat, 01 May 2004) | 2 lines

add perl version and archname

------------------------------------------------------------------------
r10475 | quinlan | 2004-05-01 06:32:13 +0000 (Sat, 01 May 2004) | 2 lines

just wait for the results :-)

------------------------------------------------------------------------
r10474 | felicity | 2004-05-01 06:01:35 +0000 (Sat, 01 May 2004) | 1 line

found that get_uri_list() can get called before check() which is what sets PerMsgStatus->{html}, which get_uri_list() was using to get the HTML parsed uris.  modified get_uri_list() to use the metadata directly, which is set.  also added a test to look for this type of thing.  also moved the scope of a variable in html_uri to where it was used, not the whole function.
------------------------------------------------------------------------
r10473 | quinlan | 2004-05-01 05:27:21 +0000 (Sat, 01 May 2004) | 2 lines

add parsing for a HTTP format

------------------------------------------------------------------------
r10472 | felicity | 2004-05-01 03:49:28 +0000 (Sat, 01 May 2004) | 1 line

urls don't have leading/trailing whitespace
------------------------------------------------------------------------
r10471 | felicity | 2004-05-01 03:41:01 +0000 (Sat, 01 May 2004) | 1 line

uri_to_domain was letting a bunch of stuff through that it really shouldn't -- terms with whitespace, single 'word' domains (www), etc.
------------------------------------------------------------------------
r10468 | jm | 2004-05-01 02:11:41 +0000 (Sat, 01 May 2004) | 1 line

more comprehensive handling of the (sick, sick, sick) rules for TLD delegation -- now deals with 3 and 4 level TLDs correctly
------------------------------------------------------------------------
r10462 | quinlan | 2004-05-01 00:41:01 +0000 (Sat, 01 May 2004) | 2 lines

add T_X_MESSAGE_INFO just in case a + is not always there

------------------------------------------------------------------------
r10456 | quinlan | 2004-04-30 21:59:07 +0000 (Fri, 30 Apr 2004) | 3 lines

T_HTML_TEXT_AFTER_HTML and T_HTML_TEXT_AFTER_HTML test rules, remove
code and rules later if it doesn't hit enough spam to matter

------------------------------------------------------------------------
r10453 | quinlan | 2004-04-30 19:27:59 +0000 (Fri, 30 Apr 2004) | 2 lines

add version requirement -- doesn't seem to trigger with t/spf.t though

------------------------------------------------------------------------
r10449 | quinlan | 2004-04-30 08:46:16 +0000 (Fri, 30 Apr 2004) | 2 lines

this hurts so bad

------------------------------------------------------------------------
r10448 | quinlan | 2004-04-30 08:45:01 +0000 (Fri, 30 Apr 2004) | 2 lines

removing RCVD_IN_AHBL_*

------------------------------------------------------------------------
r10447 | quinlan | 2004-04-30 07:28:52 +0000 (Fri, 30 Apr 2004) | 3 lines

promote T_X_MESSAGE_INFO to X_MESSAGE_INFO
promote T_REDIRECTOR to URI_REDIRECTOR

------------------------------------------------------------------------
r10446 | quinlan | 2004-04-30 07:22:23 +0000 (Fri, 30 Apr 2004) | 2 lines

just say no

------------------------------------------------------------------------
r10439 | quinlan | 2004-04-30 03:59:37 +0000 (Fri, 30 Apr 2004) | 2 lines

might as well do rawbody too

------------------------------------------------------------------------
r10438 | quinlan | 2004-04-30 02:28:40 +0000 (Fri, 30 Apr 2004) | 2 lines

revise RND rules

------------------------------------------------------------------------
r10434 | felicity | 2004-04-29 21:36:51 +0000 (Thu, 29 Apr 2004) | 1 line

backup more per-user state when running spamd w/ setuid.  also, set setuid_to_user more appropriately for what the code actually does.
------------------------------------------------------------------------
r10425 | felicity | 2004-04-29 16:25:06 +0000 (Thu, 29 Apr 2004) | 1 line

bug 3329: modify debug output to be clearer that there are multiple queries per domain -- we're not querying the same thing multiple times
------------------------------------------------------------------------
r10423 | felicity | 2004-04-29 07:19:10 +0000 (Thu, 29 Apr 2004) | 1 line

for some extra debugging information, let us know what version of Net::DNS is installed if we find it installed. :)
------------------------------------------------------------------------
r10422 | felicity | 2004-04-29 07:12:25 +0000 (Thu, 29 Apr 2004) | 1 line

some conf variables can be undef, so don't try to back those up when doing compile_now() stuff...
------------------------------------------------------------------------
r10420 | jm | 2004-04-29 06:57:50 +0000 (Thu, 29 Apr 2004) | 1 line

some leftovers of dev code
------------------------------------------------------------------------
r10417 | felicity | 2004-04-29 06:33:13 +0000 (Thu, 29 Apr 2004) | 1 line

when doing DB upgrades, we need to make sure the lock doesn't go stale, so periodically (once every 1000 tokens), update the lock.
------------------------------------------------------------------------
r10413 | felicity | 2004-04-29 05:55:15 +0000 (Thu, 29 Apr 2004) | 1 line

bug 3064: added 'use_bayes_rules' config option to disable the bayes rules in an easy-to-use option.  lets people disable checking while still allowing learning/db repair tools/etc.
------------------------------------------------------------------------
r10412 | felicity | 2004-04-29 05:29:15 +0000 (Thu, 29 Apr 2004) | 1 line

bug 3296: lower the default number of connections per child to 200
------------------------------------------------------------------------
r10410 | quinlan | 2004-04-29 05:18:21 +0000 (Thu, 29 Apr 2004) | 2 lines

use standard naming

------------------------------------------------------------------------
r10409 | quinlan | 2004-04-29 05:17:16 +0000 (Thu, 29 Apr 2004) | 3 lines

promote RCVD_IN_AHBL_RHSBL
change __RCVD_NUMERIC_HELO to use an eval ignoring private address spaces

------------------------------------------------------------------------
r10408 | felicity | 2004-04-29 05:06:14 +0000 (Thu, 29 Apr 2004) | 1 line

fix spamc_E test -- spamd-related tests should only stop spamd once, and spamd will get stopped if spamc returns an error, so put the failure one at the end.
------------------------------------------------------------------------
r10407 | felicity | 2004-04-29 04:59:04 +0000 (Thu, 29 Apr 2004) | 1 line

bug 2762: if spamd is restarted, and a file needs to get written (AWL or Bayes for instance) which is configured to be outside the default area (ie: awl_path /var/foo/bar/blah), the file will be created by the user launching spamd (root in most cases) which could end up being unaccessible by children processes.   in compile_now(), we backup the default configuration values which include __userstate__, reset the defaults after init(), then after the whole check() completes, reset to the init() values.  this lets spamd (and any other caller, optionally,) put all the startup files in a temp area.
------------------------------------------------------------------------
r10405 | jm | 2004-04-29 04:40:47 +0000 (Thu, 29 Apr 2004) | 1 line

Rank replaced by information gain, defined as 'the average reduction in the entropy of C (classification) given the value of X (the rule)'.
------------------------------------------------------------------------
r10404 | quinlan | 2004-04-29 04:39:45 +0000 (Thu, 29 Apr 2004) | 2 lines

some HTML rules

------------------------------------------------------------------------
r10401 | felicity | 2004-04-29 03:43:44 +0000 (Thu, 29 Apr 2004) | 1 line

update comment
------------------------------------------------------------------------
r10400 | jm | 2004-04-29 03:15:28 +0000 (Thu, 29 Apr 2004) | 1 line

calling unlock multiple times is OK, allow that without a warning
------------------------------------------------------------------------
r10399 | jm | 2004-04-29 02:56:01 +0000 (Thu, 29 Apr 2004) | 1 line

--deencap didn't deal with the case where a local scanner overwrote the remote scanner's X-Spam-Checker-Version header.  fix by grovelling through the body parts :(
------------------------------------------------------------------------
r10398 | quinlan | 2004-04-29 01:54:46 +0000 (Thu, 29 Apr 2004) | 2 lines

keyword space, function no space

------------------------------------------------------------------------
r10397 | felicity | 2004-04-29 01:40:07 +0000 (Thu, 29 Apr 2004) | 1 line

untie the DBs after we preload everything, prespawn...
------------------------------------------------------------------------
r10396 | quinlan | 2004-04-29 01:28:51 +0000 (Thu, 29 Apr 2004) | 4 lines

bug 3291: update references to activating auto-whitelist with -a in the docs
also move some upgrade notes from README to INSTALL (needs more work and
cleaning)

------------------------------------------------------------------------
r10395 | jm | 2004-04-29 01:18:32 +0000 (Thu, 29 Apr 2004) | 1 line

test for spamc -E
------------------------------------------------------------------------
r10394 | parker | 2004-04-29 01:02:59 +0000 (Thu, 29 Apr 2004) | 26 lines

Bug 3225: Bayes Optimization

Many optimizations for bayes storage.

1) Implement a tok_get_all that fetches multiple tokens at one time, instead of one at a time.

2) Modify SQL storage so that it keeps a running tally for total
tokens, oldest/newest token age instead using expensive select
count(*)/min(atime)/max(atime) calls.

3) In SQL, clean up tokens whose spam_count and ham_count both equal
0.

4) Added some basic caching in SQL code to avoid doing some SQL
operations.

5) Switched SQL backend to use userids instead of username for keys in
all of it's tables.

6) Removed some dead code.

7) We now store tokens as the lower 40 bits of a SHA1 hash.

8) Updated to backup/restore code to support the new database format.


------------------------------------------------------------------------
r10393 | jm | 2004-04-29 00:51:55 +0000 (Thu, 29 Apr 2004) | 1 line

bug 2855: added spamc -E switch, to return exit code based on spam/nonspam status in normal use
------------------------------------------------------------------------
r10392 | jm | 2004-04-29 00:39:48 +0000 (Thu, 29 Apr 2004) | 1 line

bug 2641 'fix' reverted: I was wrong, virtual-config-dir was doing exactly what it's supposed to do.
------------------------------------------------------------------------
r10391 | jm | 2004-04-29 00:26:41 +0000 (Thu, 29 Apr 2004) | 1 line

bug 2776: make test fails in de_DE locale
------------------------------------------------------------------------
r10390 | jm | 2004-04-29 00:11:22 +0000 (Thu, 29 Apr 2004) | 1 line

bug 3017: fix dccifd bug when message is empty
------------------------------------------------------------------------
r10389 | jm | 2004-04-28 23:51:45 +0000 (Wed, 28 Apr 2004) | 1 line

removed terse-report from all intl files; added a lock_method line to demo local.cf file
------------------------------------------------------------------------
r10388 | jm | 2004-04-28 23:40:25 +0000 (Wed, 28 Apr 2004) | 1 line

tiny tweak
------------------------------------------------------------------------
r10387 | felicity | 2004-04-28 23:35:55 +0000 (Wed, 28 Apr 2004) | 1 line

if the first bayes tie succeeds, but the second fails, we don't untie the first.  also, extra cleanup in permsglearner...
------------------------------------------------------------------------
r10386 | jm | 2004-04-28 23:34:07 +0000 (Wed, 28 Apr 2004) | 1 line

bug 2641: spamd was using wrong path for virtual-config-dir user_prefs file
------------------------------------------------------------------------
r10385 | jm | 2004-04-28 23:17:25 +0000 (Wed, 28 Apr 2004) | 1 line

refactored and fixed spamd syslog code.  the flag 'ndelay' is now used, which should speed us up some; redundant calls to openlog() removed for efficiency; the 'try with a different switch' message is now only output once.
------------------------------------------------------------------------
r10384 | jm | 2004-04-28 23:00:55 +0000 (Wed, 28 Apr 2004) | 1 line

avoid cases where msgid could contain ','
------------------------------------------------------------------------
r10383 | jm | 2004-04-28 22:49:17 +0000 (Wed, 28 Apr 2004) | 1 line

rewrote flock() sleep code to use a single SIGALRM-based timeout
------------------------------------------------------------------------
r10382 | jm | 2004-04-28 22:34:31 +0000 (Wed, 28 Apr 2004) | 1 line

updated comments
------------------------------------------------------------------------
r10381 | jm | 2004-04-28 22:32:17 +0000 (Wed, 28 Apr 2004) | 1 line

bug 3242: NFS-unsafe locker added, using flock().  currently it's polling (attempt lock,sleep,attempt lock,sleep).  controlled using the 'lock_method' config parameter.
------------------------------------------------------------------------
r10380 | felicity | 2004-04-28 22:28:35 +0000 (Wed, 28 Apr 2004) | 1 line

sa-learn wasn't cleaning up the parsed message after it was finished...
------------------------------------------------------------------------
r10377 | felicity | 2004-04-28 21:35:08 +0000 (Wed, 28 Apr 2004) | 1 line

added log msg when spamd spawns
------------------------------------------------------------------------
r10370 | jm | 2004-04-28 19:12:32 +0000 (Wed, 28 Apr 2004) | 1 line

I've been getting a number of FPs on FORGED_DEF_WHITELIST, due to older mailing list software.  Given this, lowering score to avoid FPs
------------------------------------------------------------------------
r10367 | quinlan | 2004-04-28 18:10:12 +0000 (Wed, 28 Apr 2004) | 2 lines

add tflags net

------------------------------------------------------------------------
r10366 | quinlan | 2004-04-28 18:08:54 +0000 (Wed, 28 Apr 2004) | 3 lines

new SenderBase rules
promote new timezone rules

------------------------------------------------------------------------
r10351 | quinlan | 2004-04-28 06:02:43 +0000 (Wed, 28 Apr 2004) | 2 lines

use a bit more complicated message

------------------------------------------------------------------------
r10348 | felicity | 2004-04-28 05:00:32 +0000 (Wed, 28 Apr 2004) | 1 line

streamline the body modification test: just pass the file glob, don't bother pre-reading the message into memory.
------------------------------------------------------------------------
r10346 | jm | 2004-04-28 04:28:30 +0000 (Wed, 28 Apr 2004) | 1 line

bug 3057: added Return-path compression for exim
------------------------------------------------------------------------
r10345 | jm | 2004-04-28 04:27:06 +0000 (Wed, 28 Apr 2004) | 1 line

bug 3126: added test to ensure that body text is not modified during scanning
------------------------------------------------------------------------
r10344 | jm | 2004-04-28 04:04:05 +0000 (Wed, 28 Apr 2004) | 1 line

bug 2798: added code to log message-id, resent-message-id, the tests hit, autolearn status, and several other things in a mass-check compatible format to syslog.  Would appreciate comments / additions...
------------------------------------------------------------------------
r10340 | jm | 2004-04-28 03:28:14 +0000 (Wed, 28 Apr 2004) | 1 line

refactored spamd eval { } block into its own method, for clarity
------------------------------------------------------------------------
r10339 | jm | 2004-04-28 03:19:48 +0000 (Wed, 28 Apr 2004) | 1 line

ensure $client gets closed
------------------------------------------------------------------------
r10338 | jm | 2004-04-28 02:28:25 +0000 (Wed, 28 Apr 2004) | 1 line

avoid extra tok_get() call
------------------------------------------------------------------------
r10337 | jm | 2004-04-28 02:11:46 +0000 (Wed, 28 Apr 2004) | 1 line

bug 2769: message_filter() reportedly returned the wrong error codes
------------------------------------------------------------------------
r10336 | jm | 2004-04-28 02:06:23 +0000 (Wed, 28 Apr 2004) | 1 line

bug 2266: add 'add_header' tags to display information about the message's Bayesian classification and the tokens used; patch contributed by David Koppelman
------------------------------------------------------------------------
r10335 | felicity | 2004-04-28 01:55:36 +0000 (Wed, 28 Apr 2004) | 1 line

bug 3318: added a test for encoded redirects
------------------------------------------------------------------------
r10334 | felicity | 2004-04-28 01:46:38 +0000 (Wed, 28 Apr 2004) | 1 line

bug 3318: fully unencode URIs that are found.
------------------------------------------------------------------------
r10333 | jm | 2004-04-28 01:22:34 +0000 (Wed, 28 Apr 2004) | 1 line

test for include
------------------------------------------------------------------------
r10332 | jm | 2004-04-28 01:12:19 +0000 (Wed, 28 Apr 2004) | 1 line

bug 1244: 'include' facility added to user_prefs.  also fixed a bug where 'loadplugin' with a relative path was broken
------------------------------------------------------------------------
r10326 | felicity | 2004-04-27 21:01:17 +0000 (Tue, 27 Apr 2004) | 1 line

bug 3308: more work on get_uri_list ...
------------------------------------------------------------------------
r10324 | felicity | 2004-04-27 20:28:45 +0000 (Tue, 27 Apr 2004) | 1 line

updated comment info
------------------------------------------------------------------------
r10323 | felicity | 2004-04-27 20:25:18 +0000 (Tue, 27 Apr 2004) | 1 line

bug 3317: copy_config() needs to deal with the one-off object copying (in this case the trusted networks object array) _before_ dealing with standard reference copying.
------------------------------------------------------------------------
r10321 | felicity | 2004-04-27 19:33:57 +0000 (Tue, 27 Apr 2004) | 1 line

bug 3308: turns out that a lot of browsers (IE, Mozilla, Thunderbird, Opera, etc) will allow non-valid URLs such as 'http:www', and 'http:/www', in addition to 'http://www'.  I modified the appropriate parts of the code to handle those.  Moved a section of get_uri_list into its own Util function, and added tests to make sure we can canonify uris properly.
------------------------------------------------------------------------
r10320 | parker | 2004-04-27 19:09:02 +0000 (Tue, 27 Apr 2004) | 1 line

Minor tweaks to bayes restore
------------------------------------------------------------------------
r10312 | parker | 2004-04-27 14:29:07 +0000 (Tue, 27 Apr 2004) | 1 line

Bug 3049: Bayes database backup/restore
------------------------------------------------------------------------
r10311 | parker | 2004-04-27 14:27:56 +0000 (Tue, 27 Apr 2004) | 1 line

Bug 3049: Bayes database backup/restore
------------------------------------------------------------------------
r10305 | jm | 2004-04-27 07:10:18 +0000 (Tue, 27 Apr 2004) | 1 line

revise to handle a legit die() case
------------------------------------------------------------------------
r10304 | jm | 2004-04-27 07:05:05 +0000 (Tue, 27 Apr 2004) | 1 line

bug 1832: avoid nmap crashing spamd by trapping die()s from all socket operations
------------------------------------------------------------------------
r10302 | quinlan | 2004-04-27 03:51:06 +0000 (Tue, 27 Apr 2004) | 2 lines

add net flag

------------------------------------------------------------------------
r10300 | jm | 2004-04-27 02:03:13 +0000 (Tue, 27 Apr 2004) | 1 line

bug 3122: USER_IN_BLACKLIST penalty should not be added to AWL, as this makes it harder to de-blacklist
------------------------------------------------------------------------
r10299 | jm | 2004-04-27 01:47:24 +0000 (Tue, 27 Apr 2004) | 1 line

bug 2198: spamd tests now do not log to syslog at all, except for one new one -- spamd_syslog.t
------------------------------------------------------------------------
r10298 | jm | 2004-04-27 01:36:47 +0000 (Tue, 27 Apr 2004) | 1 line

bug 2419: expand Bayes score breakdown near the extremes
------------------------------------------------------------------------
r10297 | felicity | 2004-04-27 00:32:37 +0000 (Tue, 27 Apr 2004) | 1 line

digging around, SIGCHLD=IGNORE doesn't have guaranteed behavior on most platforms.  so change the restart and kill handlers appropriately -- kill sets to default then dies, restart sends kills and does a wait for each process.
------------------------------------------------------------------------
r10296 | felicity | 2004-04-27 00:28:54 +0000 (Tue, 27 Apr 2004) | 1 line

bug 3312: world-writable path taint check was invalid.  the mode&2 == 2 not 1.  gah!
------------------------------------------------------------------------
r10294 | felicity | 2004-04-26 22:49:44 +0000 (Mon, 26 Apr 2004) | 1 line

add a test for bug 2292, parsing from addresses out of the comment section of the From header...
------------------------------------------------------------------------
r10293 | felicity | 2004-04-26 22:39:36 +0000 (Mon, 26 Apr 2004) | 1 line

bug 2292: whitelist_from would have issues when the From header had a comment with an email address in it which was whitelisted.  changed to using the get('...:addr') code instead which knows how to ignore comments and the like.
------------------------------------------------------------------------
r10292 | felicity | 2004-04-26 21:02:29 +0000 (Mon, 26 Apr 2004) | 1 line

bug 3304: turns out that if you set a constant to qr/.../, you need to do =~CONSTANT, not =~/CONSTANT/ ...
------------------------------------------------------------------------
r10291 | felicity | 2004-04-26 20:38:01 +0000 (Mon, 26 Apr 2004) | 1 line

bug 3290: whitelist_addrs.t was failing because we ignore squirrelmail headers in 3.0.  changed the IP in the received header prior to the squirrelmail header to match the t/data/nice/002 mail so the test succeeds.  the other tests didn't break when doing this, so ... :)
------------------------------------------------------------------------
r10290 | quinlan | 2004-04-26 20:22:32 +0000 (Mon, 26 Apr 2004) | 2 lines

BondedSender data in SenderBase appears to be stale or incomplete

------------------------------------------------------------------------
r10289 | quinlan | 2004-04-26 19:05:00 +0000 (Mon, 26 Apr 2004) | 3 lines

revise T_BAD_TIMEZONE*
add T_RCVD_IN_BSP_* to see if SenderBase BSP is working now

------------------------------------------------------------------------
r10288 | felicity | 2004-04-26 18:57:25 +0000 (Mon, 26 Apr 2004) | 1 line

update spamd pod/usage...
------------------------------------------------------------------------
r10286 | felicity | 2004-04-26 18:41:54 +0000 (Mon, 26 Apr 2004) | 1 line

bug 3308: redirector handling didn't deal with 'http:/www ...', while things like the yahoo redirector does.  so handle that, also fix uris that come through with only one forward-slash.  also, add debugging output for list of URIs found.
------------------------------------------------------------------------
r10276 | quinlan | 2004-04-26 06:47:54 +0000 (Mon, 26 Apr 2004) | 2 lines

Cuba

------------------------------------------------------------------------
r10275 | quinlan | 2004-04-26 06:40:50 +0000 (Mon, 26 Apr 2004) | 2 lines

lint

------------------------------------------------------------------------
r10274 | quinlan | 2004-04-26 05:31:53 +0000 (Mon, 26 Apr 2004) | 3 lines

remove T_HTML_FONT_SIZE_BIG
remove HTML_FONT_FACE_ODD

------------------------------------------------------------------------
r10273 | quinlan | 2004-04-26 03:39:42 +0000 (Mon, 26 Apr 2004) | 4 lines

remove some test rules
replace LOTS_OF_STUFF with T_LOTS_OF_STUFF_13
add T_ENTITY_HEX_ANY

------------------------------------------------------------------------
r10268 | quinlan | 2004-04-26 00:39:29 +0000 (Mon, 26 Apr 2004) | 3 lines

revise T_ENTITY*
tweak T_INVALID_RCVD_TZ_ABSURD_A

------------------------------------------------------------------------
r10267 | quinlan | 2004-04-25 22:51:54 +0000 (Sun, 25 Apr 2004) | 2 lines

some test rules

------------------------------------------------------------------------
r10266 | felicity | 2004-04-25 22:46:45 +0000 (Sun, 25 Apr 2004) | 1 line

fix debug output issue in bayes expiry
------------------------------------------------------------------------
r10265 | felicity | 2004-04-25 22:38:14 +0000 (Sun, 25 Apr 2004) | 1 line

make expiry percent, period, and max exponent config variables instead of strictly hardcoded values
------------------------------------------------------------------------
r10264 | quinlan | 2004-04-25 22:05:12 +0000 (Sun, 25 Apr 2004) | 2 lines

some time zone rules

------------------------------------------------------------------------
r10263 | quinlan | 2004-04-25 21:48:33 +0000 (Sun, 25 Apr 2004) | 2 lines

tweak T_BAD_TIMEZONE_CST*

------------------------------------------------------------------------
r10262 | felicity | 2004-04-25 20:58:40 +0000 (Sun, 25 Apr 2004) | 1 line

move the euid and config change-back to after the client connection is closed in the child...
------------------------------------------------------------------------
r10256 | quinlan | 2004-04-25 10:22:12 +0000 (Sun, 25 Apr 2004) | 2 lines

remove now unnecessary backhair code

------------------------------------------------------------------------
r10255 | quinlan | 2004-04-25 10:21:43 +0000 (Sun, 25 Apr 2004) | 6 lines

promote T_URIBL_WS_SURBL to URIBL_WS_SURBL
promote T_URIBL_BE_SURBL to URIBL_BE_SURBL
promote SENDERBASE_NEW_BULK (hits about 8% of spam real-time)
promote HTML_BACKHAIR*
settle on a single T_BAD_TIMEZONE* version

------------------------------------------------------------------------
r10246 | parker | 2004-04-25 06:44:07 +0000 (Sun, 25 Apr 2004) | 1 line

remove warning
------------------------------------------------------------------------
r10219 | quinlan | 2004-04-24 07:53:53 +0000 (Sat, 24 Apr 2004) | 3 lines

revise T_ENTITY_* rules (rawbody is only type really working, test other
decimal codes, also experiment with leading zeroes)

------------------------------------------------------------------------
r10218 | quinlan | 2004-04-24 04:25:58 +0000 (Sat, 24 Apr 2004) | 2 lines

adjust threshold for SUSPICIOUS_RECIPS

------------------------------------------------------------------------
r10217 | quinlan | 2004-04-24 04:22:36 +0000 (Sat, 24 Apr 2004) | 5 lines

remove TO_HAS_SPACES and T_TO_HAS_SPACES*
promote T_LONG_HOSTNAME_25_A to URI_LONG_HOSTNAME
remove T_GEVALIACOFFEE
add some T_LOTS_OF_STUFF* variations

------------------------------------------------------------------------
r10216 | quinlan | 2004-04-24 04:02:04 +0000 (Sat, 24 Apr 2004) | 2 lines

a few variations

------------------------------------------------------------------------
r10215 | quinlan | 2004-04-24 03:33:05 +0000 (Sat, 24 Apr 2004) | 3 lines

add backhair_count rules
add T_BAD_TIMEZONE* rules

------------------------------------------------------------------------
r10214 | quinlan | 2004-04-24 03:32:27 +0000 (Sat, 24 Apr 2004) | 2 lines

add backhair_count

------------------------------------------------------------------------
r10213 | quinlan | 2004-04-24 03:31:53 +0000 (Sat, 24 Apr 2004) | 2 lines

some revisions to the time zone code

------------------------------------------------------------------------
r10212 | quinlan | 2004-04-24 03:29:13 +0000 (Sat, 24 Apr 2004) | 2 lines

remove redundant orbitz entry

------------------------------------------------------------------------
r10211 | quinlan | 2004-04-24 03:28:25 +0000 (Sat, 24 Apr 2004) | 2 lines

add a few whitelist entries

------------------------------------------------------------------------
r10210 | quinlan | 2004-04-24 02:14:12 +0000 (Sat, 24 Apr 2004) | 2 lines

whitespace only

------------------------------------------------------------------------
r10201 | felicity | 2004-04-23 21:23:53 +0000 (Fri, 23 Apr 2004) | 1 line

bug 3288: kh and ni are subdelegated cctld ...
------------------------------------------------------------------------
r10198 | felicity | 2004-04-23 20:18:45 +0000 (Fri, 23 Apr 2004) | 1 line

fix rcvd_parser.t errors
------------------------------------------------------------------------
r10190 | jm | 2004-04-23 01:05:55 +0000 (Fri, 23 Apr 2004) | 1 line

added T_SA_MARKED_UP to track how many encapsulated mails get through to the scanner
------------------------------------------------------------------------
r10189 | jm | 2004-04-23 01:04:16 +0000 (Fri, 23 Apr 2004) | 1 line

added support for --deencap switch: de-encapsulate only mails that were marked up on a specific host
------------------------------------------------------------------------
r10188 | felicity | 2004-04-22 20:48:35 +0000 (Thu, 22 Apr 2004) | 1 line

adding some comments for get_uri_list()
------------------------------------------------------------------------
r10187 | felicity | 2004-04-22 20:25:22 +0000 (Thu, 22 Apr 2004) | 1 line

bug 3287: URI parsing should ignore/strip leading/trailing whitespace.
------------------------------------------------------------------------
r10186 | felicity | 2004-04-22 20:15:17 +0000 (Thu, 22 Apr 2004) | 1 line

let GC handle the temp array
------------------------------------------------------------------------
r10185 | felicity | 2004-04-22 19:47:55 +0000 (Thu, 22 Apr 2004) | 1 line

during expiry, handle the situation where the newest tokens is in the future by resetting the newest token stamp to current time, and changing any token atimes > newest atime to newest atime.
------------------------------------------------------------------------
r10184 | felicity | 2004-04-22 19:12:34 +0000 (Thu, 22 Apr 2004) | 1 line

add prelim docs for upgrading to 3.0
------------------------------------------------------------------------
r10183 | quinlan | 2004-04-22 18:31:35 +0000 (Thu, 22 Apr 2004) | 2 lines

add T_URIBL_BE_SURBL

------------------------------------------------------------------------
r10182 | quinlan | 2004-04-22 18:24:10 +0000 (Thu, 22 Apr 2004) | 2 lines

need to ignore case when ignoring repeated addresses

------------------------------------------------------------------------
r10169 | quinlan | 2004-04-22 07:42:15 +0000 (Thu, 22 Apr 2004) | 2 lines

drill down a bit on SenderBase rules

------------------------------------------------------------------------
r10168 | quinlan | 2004-04-22 06:52:16 +0000 (Thu, 22 Apr 2004) | 4 lines

merge VERY_SUSP_RECIPS into SUSPICIOUS_RECIPS (hit rate for
  VERY_SUSP_RECIPS is too low and scores were close to each other anyway)
test different thresholds for new SUSPICIOUS_RECIPS code

------------------------------------------------------------------------
r10167 | parker | 2004-04-22 06:08:32 +0000 (Thu, 22 Apr 2004) | 1 line

another SHA1 cleanup
------------------------------------------------------------------------
r10166 | quinlan | 2004-04-22 04:59:49 +0000 (Thu, 22 Apr 2004) | 2 lines

merge AOL redirect rules

------------------------------------------------------------------------
r10165 | quinlan | 2004-04-22 04:48:44 +0000 (Thu, 22 Apr 2004) | 2 lines

remove extra step

------------------------------------------------------------------------
r10164 | quinlan | 2004-04-22 04:21:00 +0000 (Thu, 22 Apr 2004) | 2 lines

oops, forgot to check these in too

------------------------------------------------------------------------
r10163 | sidney | 2004-04-22 04:18:14 +0000 (Thu, 22 Apr 2004) | 1 line

Change sha1.t test to match changed function names in SHA1.pm
------------------------------------------------------------------------
r10162 | quinlan | 2004-04-22 03:57:11 +0000 (Thu, 22 Apr 2004) | 3 lines

use same naming as Digest::SHA1 for exported functions
rename SHA1 to perl_sha1 for better clarity

------------------------------------------------------------------------
r10159 | sidney | 2004-04-22 00:19:53 +0000 (Thu, 22 Apr 2004) | 1 line

Add sha1bin function for binary form of SHA1 using Digest::SHA1 if available or else slow pure perl. Update test cases for the changes
------------------------------------------------------------------------
r10146 | quinlan | 2004-04-21 06:06:58 +0000 (Wed, 21 Apr 2004) | 2 lines

bug 3285: SUSPICIOUS_RECIPS triggers on "user@dom.ain" <user@dom.ain>

------------------------------------------------------------------------
r10145 | quinlan | 2004-04-21 06:02:33 +0000 (Wed, 21 Apr 2004) | 2 lines

URI scheme removal should be case-insensitive

------------------------------------------------------------------------
r10144 | jm | 2004-04-21 03:05:34 +0000 (Wed, 21 Apr 2004) | 1 line

bug 3201: current Mailman not detected by __KNOWN_MAILING_LIST
------------------------------------------------------------------------
r10143 | jm | 2004-04-21 01:59:00 +0000 (Wed, 21 Apr 2004) | 1 line

bug 3236: ignore SquirrelMail injection Received headers
------------------------------------------------------------------------
r10142 | quinlan | 2004-04-21 01:25:29 +0000 (Wed, 21 Apr 2004) | 2 lines

fix undef warning for malformed URLs

------------------------------------------------------------------------
r10141 | quinlan | 2004-04-21 01:08:19 +0000 (Wed, 21 Apr 2004) | 2 lines

fixes for T_REDIRECTOR

------------------------------------------------------------------------
r10139 | jm | 2004-04-20 23:55:16 +0000 (Tue, 20 Apr 2004) | 1 line

bug 3009: antidrug.cf, several good anti-drug-spam rules, added. thanks to Matt Kettler
------------------------------------------------------------------------
r10138 | jm | 2004-04-20 23:43:59 +0000 (Tue, 20 Apr 2004) | 1 line

bug 2539: updated RAND rules from Fred T
------------------------------------------------------------------------
r10137 | jm | 2004-04-20 23:41:28 +0000 (Tue, 20 Apr 2004) | 1 line

oops, didn't mean to check that in
------------------------------------------------------------------------
r10136 | jm | 2004-04-20 23:38:19 +0000 (Tue, 20 Apr 2004) | 1 line

bug 2539: added more rules to catch RAND signs thanks to Fred T
------------------------------------------------------------------------
r10134 | quinlan | 2004-04-20 21:07:30 +0000 (Tue, 20 Apr 2004) | 2 lines

remove test rule

------------------------------------------------------------------------
r10133 | quinlan | 2004-04-20 20:07:34 +0000 (Tue, 20 Apr 2004) | 2 lines

remove old score

------------------------------------------------------------------------
r10132 | quinlan | 2004-04-20 20:06:58 +0000 (Tue, 20 Apr 2004) | 2 lines

remove old scores

------------------------------------------------------------------------
r10131 | quinlan | 2004-04-20 20:06:04 +0000 (Tue, 20 Apr 2004) | 6 lines

replace MSGID_FROM_MTA_SHORT with MSGID_FROM_MTA_ID
remove MSGID_FROM_MTA_LATER and MSGID_FROM_MTA_BACKUP
remove URL shortening rules
add T_LOTS_OF_STUFF*
add T_TO_HAS_SPACES*

------------------------------------------------------------------------
r10122 | jm | 2004-04-20 06:26:31 +0000 (Tue, 20 Apr 2004) | 1 line

added 'id=' to rcvd_parser.t test cases -- still a lot of failures however
------------------------------------------------------------------------
r10121 | jm | 2004-04-20 06:24:47 +0000 (Tue, 20 Apr 2004) | 1 line

added 'envelope_sender_header' config setting for sites to override EnvelopeFrom heuristics
------------------------------------------------------------------------
r10120 | jm | 2004-04-20 06:05:51 +0000 (Tue, 20 Apr 2004) | 1 line

bug 2321: list of headers checked by whitelist_to and whitelist_from was incomplete
------------------------------------------------------------------------
r10115 | felicity | 2004-04-20 03:08:50 +0000 (Tue, 20 Apr 2004) | 1 line

spamd would complain about a pidfile, even if it wasn't supposed to make one ...
------------------------------------------------------------------------
r10114 | felicity | 2004-04-20 03:03:37 +0000 (Tue, 20 Apr 2004) | 1 line

log_socket may not be defined when spamd ends (when usage() runs, for instance...)
------------------------------------------------------------------------
r10113 | quinlan | 2004-04-20 02:20:10 +0000 (Tue, 20 Apr 2004) | 2 lines

add cleaner version of MSGID_FROM_MTA*

------------------------------------------------------------------------
r10112 | felicity | 2004-04-20 02:13:32 +0000 (Tue, 20 Apr 2004) | 1 line

bug 3283: had some issues with umask settings
------------------------------------------------------------------------
r10111 | felicity | 2004-04-19 23:33:53 +0000 (Mon, 19 Apr 2004) | 1 line

bug 3268: get_uri_list() was using decoded_body to find URIs, then looking at the HTML parser results for more uris.  however, the decoded_body has the HTML in it, so we were looking at the HTML twice, sometimes grabbing newline-separated uris.  so disable passing in a text array, and use the rendered text for RE matching, let the HTML parsing do the right thing there.  also, revert the redirector code.
------------------------------------------------------------------------
r10110 | felicity | 2004-04-19 23:20:33 +0000 (Mon, 19 Apr 2004) | 1 line

bug 3268: rule to look for generic HTTP redirects.  ignore redirects that are to the same domain.
------------------------------------------------------------------------
r10109 | jm | 2004-04-19 17:52:49 +0000 (Mon, 19 Apr 2004) | 1 line

no need to use $1
------------------------------------------------------------------------
r10108 | jm | 2004-04-19 17:49:06 +0000 (Mon, 19 Apr 2004) | 1 line

fix regression: more than 1 layer of redirection not caught
------------------------------------------------------------------------
r10107 | quinlan | 2004-04-19 17:31:45 +0000 (Mon, 19 Apr 2004) | 2 lines

another one

------------------------------------------------------------------------
r10106 | quinlan | 2004-04-19 17:26:02 +0000 (Mon, 19 Apr 2004) | 2 lines

add rules for URL obfuscation services

------------------------------------------------------------------------
r10105 | felicity | 2004-04-19 16:29:16 +0000 (Mon, 19 Apr 2004) | 1 line

minor uri-based cleanup
------------------------------------------------------------------------
r10104 | felicity | 2004-04-19 16:00:42 +0000 (Mon, 19 Apr 2004) | 1 line

fix redirect handler again
------------------------------------------------------------------------
r10103 | quinlan | 2004-04-19 15:37:13 +0000 (Mon, 19 Apr 2004) | 3 lines

Nevermind, looks okay (too early in the morning).
I think this method is still going to miss encoded redirects, though.

------------------------------------------------------------------------
r10102 | quinlan | 2004-04-19 15:34:26 +0000 (Mon, 19 Apr 2004) | 2 lines

comment out infinite loop

------------------------------------------------------------------------
r10095 | felicity | 2004-04-19 05:13:10 +0000 (Mon, 19 Apr 2004) | 1 line

fix up uri parsing code -- we have been catching URIs on multiple lines and embedding newlines, so strip those out.  do better version of unencoding.  deal with redirectors by adding in all of the redirection urls as well.  it made all my results better/more accurate, so plus plus. :)
------------------------------------------------------------------------
r10067 | quinlan | 2004-04-16 23:17:15 +0000 (Fri, 16 Apr 2004) | 2 lines

change from Fisher-Yates shuffle to SHA1 shuffle

------------------------------------------------------------------------
r10054 | jm | 2004-04-16 20:51:22 +0000 (Fri, 16 Apr 2004) | 1 line

BIZ_TLD_2 -> BIZ_TLD
------------------------------------------------------------------------
r10053 | quinlan | 2004-04-16 20:39:21 +0000 (Fri, 16 Apr 2004) | 2 lines

TLD rules

------------------------------------------------------------------------
r10052 | quinlan | 2004-04-16 20:34:21 +0000 (Fri, 16 Apr 2004) | 2 lines

remove MIME_ODD_CASE - last spam hit in Jan 2003

------------------------------------------------------------------------
r10051 | felicity | 2004-04-16 20:22:08 +0000 (Fri, 16 Apr 2004) | 1 line

bug 3272: logic in copy_config for checking source + dest for hash reference was wrong. oops.
------------------------------------------------------------------------
r10049 | felicity | 2004-04-16 19:08:45 +0000 (Fri, 16 Apr 2004) | 1 line

bug 3276: spamd's -m didn't work right wrt max-connects per child.  spun it off into --max-conn-per-child, fixed docs and such.
------------------------------------------------------------------------
r10043 | quinlan | 2004-04-16 05:44:40 +0000 (Fri, 16 Apr 2004) | 2 lines

try some looser T_INFO_TLD rules

------------------------------------------------------------------------
r10042 | felicity | 2004-04-16 05:09:53 +0000 (Fri, 16 Apr 2004) | 1 line

bug 3240: __ANY_QUALCOMM_MUA got removed in 2.61, but it's a subrule for FORGED_QUALCOMM_TAGS ...  oops.
------------------------------------------------------------------------
r10041 | felicity | 2004-04-16 04:59:34 +0000 (Fri, 16 Apr 2004) | 1 line

bug 3269: message parser needs to return mime boundary states for the MIME_MISSING_BOUNDARY rule to figure out if boundaries are missing
------------------------------------------------------------------------
r10040 | felicity | 2004-04-16 04:34:02 +0000 (Fri, 16 Apr 2004) | 1 line

bug 3269: mime header information was expected to be lowercased, but wasn't, causing issues.
------------------------------------------------------------------------
r10039 | felicity | 2004-04-16 04:20:35 +0000 (Fri, 16 Apr 2004) | 1 line

bug 3275: ':addr' was a little broken as it was trying to remove multiple addresses without checking for quotes and such first.
------------------------------------------------------------------------
r10038 | felicity | 2004-04-16 04:06:21 +0000 (Fri, 16 Apr 2004) | 1 line

better rule output in debug mode
------------------------------------------------------------------------
r10037 | felicity | 2004-04-16 04:00:22 +0000 (Fri, 16 Apr 2004) | 1 line

more pre/post-daemonize stuff
------------------------------------------------------------------------
r10035 | felicity | 2004-04-15 23:26:19 +0000 (Thu, 15 Apr 2004) | 1 line

better deal with pidfile and daemonizing and such
------------------------------------------------------------------------
r10034 | felicity | 2004-04-15 23:13:07 +0000 (Thu, 15 Apr 2004) | 1 line

move parts around in spamd so that errors are displayed before becoming a daemon (like Storable is needed but not available ...)
------------------------------------------------------------------------
r10033 | felicity | 2004-04-15 20:53:50 +0000 (Thu, 15 Apr 2004) | 1 line

bug 3272: modify how the configuration is backed up for spamd.  added new copy_config() API method to allow third party folks to backup/restore the config.
------------------------------------------------------------------------
r10030 | felicity | 2004-04-15 04:11:37 +0000 (Thu, 15 Apr 2004) | 1 line

bug 3262: attempt to improve NO_COST
------------------------------------------------------------------------
r10026 | felicity | 2004-04-15 03:54:12 +0000 (Thu, 15 Apr 2004) | 1 line

updated docs to point at pyzor website and remove repeated pointers for razor and dcc
------------------------------------------------------------------------
r10025 | felicity | 2004-04-15 03:41:02 +0000 (Thu, 15 Apr 2004) | 1 line

reimplement ADVERT_CODE* rules
------------------------------------------------------------------------
r10023 | jm | 2004-04-15 02:34:22 +0000 (Thu, 15 Apr 2004) | 1 line

some updates to plugin doco and a bugfix in URIDNSBL
------------------------------------------------------------------------
r10022 | felicity | 2004-04-15 02:17:18 +0000 (Thu, 15 Apr 2004) | 1 line

bug 3269: found that _check_attachments() was always looking at the message header, and not the MIME part headers. :(
------------------------------------------------------------------------
r10006 | felicity | 2004-04-14 21:21:24 +0000 (Wed, 14 Apr 2004) | 1 line

found a few other holdouts for 'required_hits' -- should be 'required_score' now...
------------------------------------------------------------------------
r10004 | felicity | 2004-04-14 20:21:50 +0000 (Wed, 14 Apr 2004) | 1 line

bug 3270: have spamassassin and spamd check to make sure they're the same version as the modules that they load.  this will avoid an issue which has come up where people have, for instance, the 'spamassassin' script from 2.31 running with modules from 2.63, and then complaining there are issues.
------------------------------------------------------------------------
r10000 | felicity | 2004-04-14 03:23:56 +0000 (Wed, 14 Apr 2004) | 1 line

bug 3097: switch spamd from doing 'fork per message' to a 'prefork' model
------------------------------------------------------------------------
r9999 | jm | 2004-04-14 02:06:35 +0000 (Wed, 14 Apr 2004) | 1 line

attempting to remove the non-deterministic element from 'make test'
------------------------------------------------------------------------
r9998 | felicity | 2004-04-14 01:49:16 +0000 (Wed, 14 Apr 2004) | 1 line

bayes magic dump should display in unsigned mode...
------------------------------------------------------------------------
r9997 | quinlan | 2004-04-14 01:40:38 +0000 (Wed, 14 Apr 2004) | 2 lines

add T_BIZ_TLD*

------------------------------------------------------------------------
r9996 | quinlan | 2004-04-13 17:02:41 +0000 (Tue, 13 Apr 2004) | 2 lines

name change

------------------------------------------------------------------------
r9990 | quinlan | 2004-04-13 04:16:33 +0000 (Tue, 13 Apr 2004) | 2 lines

remove HTML_RELAYING_FRAME (just about the worst HTML rule we have)

------------------------------------------------------------------------
r9989 | quinlan | 2004-04-13 04:11:02 +0000 (Tue, 13 Apr 2004) | 2 lines

remove HTML_IMAGE_AREA* rules

------------------------------------------------------------------------
r9988 | quinlan | 2004-04-13 04:01:00 +0000 (Tue, 13 Apr 2004) | 2 lines

remove HTML color rules

------------------------------------------------------------------------
r9987 | quinlan | 2004-04-13 03:38:07 +0000 (Tue, 13 Apr 2004) | 2 lines

guess size if we don't know it (should help HTML_IMAGE_RATIO a bit)

------------------------------------------------------------------------
r9979 | quinlan | 2004-04-12 20:42:28 +0000 (Mon, 12 Apr 2004) | 3 lines

remove T_URIBL_DSBL
add T_URIBL_SA_SURBL

------------------------------------------------------------------------
r9964 | quinlan | 2004-04-11 08:31:10 +0000 (Sun, 11 Apr 2004) | 4 lines

bug 3252: remove redundant HTML_FONTCOLOR_NAME
clean up HTML color tests (test both fg and bg, simplify naming)
remove low performing HTML_WITH_BGCOLOR

------------------------------------------------------------------------
r9960 | felicity | 2004-04-10 17:23:59 +0000 (Sat, 10 Apr 2004) | 1 line

one of the bayesstore 'not implemented' messages was wrong.  we were also caching the token magic_re when we didn't need to (it's only used in 1 place).
------------------------------------------------------------------------
r9952 | felicity | 2004-04-09 19:19:00 +0000 (Fri, 09 Apr 2004) | 1 line

move ConfSource*.pm to Conf/*.pm, again for perl-OO-y-ish-ness...
------------------------------------------------------------------------
r9949 | felicity | 2004-04-09 18:54:54 +0000 (Fri, 09 Apr 2004) | 1 line

make *Locker.pm into Locker/*.pm to be more perl-OO-y.  also, make set_running_expire_token refresh the bayes db lock.
------------------------------------------------------------------------
r9940 | felicity | 2004-04-08 16:14:57 +0000 (Thu, 08 Apr 2004) | 1 line

bug 3251: for things like sa-learn, the bayes db gets locked, then a bunch of learning occurs, then the db is unlocked.  however, if the learning takes more than 600 seconds (10 mins), another process would see the lock as stale and break it, even though the original process is still going.  now, everytime a lock is requested (which is still per message), the lock file will be 'refreshed' via utime().
------------------------------------------------------------------------
r9882 | quinlan | 2004-04-06 11:43:19 +0000 (Tue, 06 Apr 2004) | 3 lines

promote T_URIBL_SC_SURBL to URIBL_SC_SURBL
demote URIBL_DSBL to T_URIBL_DSBL

------------------------------------------------------------------------
r9881 | jm | 2004-04-06 02:49:33 +0000 (Tue, 06 Apr 2004) | 1 line

added RHSBL lookup capability to URIBL plugin
------------------------------------------------------------------------
r9879 | jm | 2004-04-05 22:18:23 +0000 (Mon, 05 Apr 2004) | 1 line

oops typo, and added T_X_MESSAGE_INFO
------------------------------------------------------------------------
r9878 | jm | 2004-04-05 21:48:49 +0000 (Mon, 05 Apr 2004) | 1 line

promoted a stack of T_ rules
------------------------------------------------------------------------
r9875 | jm | 2004-04-05 18:49:11 +0000 (Mon, 05 Apr 2004) | 1 line

promoted T_FORGED_MUA_THEBAT_BOUN; added a couple of RND-tag rules
------------------------------------------------------------------------
r9866 | quinlan | 2004-04-05 03:55:14 +0000 (Mon, 05 Apr 2004) | 2 lines

fix taint error

------------------------------------------------------------------------
r9865 | quinlan | 2004-04-05 02:34:02 +0000 (Mon, 05 Apr 2004) | 2 lines

fix scores for HTML_IMAGE_ONLY_*

------------------------------------------------------------------------
r9864 | felicity | 2004-04-05 02:23:38 +0000 (Mon, 05 Apr 2004) | 1 line

bug 3212: we may sometimes attempt to free the same memory segment twice.  do better checking to make sure we don't do that.
------------------------------------------------------------------------
r9859 | quinlan | 2004-04-04 08:57:28 +0000 (Sun, 04 Apr 2004) | 3 lines

promote T_MISSING_SUBJECT to MISSING_SUBJECT
rename DATE_MISSING to MISSING_DATE

------------------------------------------------------------------------
r9858 | quinlan | 2004-04-04 08:46:16 +0000 (Sun, 04 Apr 2004) | 5 lines

replace HTML_IMAGE_ONLY* with new rules
promote new HTML_SHORT_* rules
remove T_HTML_TAGS_* for poor performance
remove T_HTML_SHORT_IMG_* since it is the same as HTML_IMAGE_ONLY

------------------------------------------------------------------------
r9855 | quinlan | 2004-04-03 22:01:55 +0000 (Sat, 03 Apr 2004) | 2 lines

comment

------------------------------------------------------------------------
r9851 | quinlan | 2004-04-03 08:48:26 +0000 (Sat, 03 Apr 2004) | 2 lines

XBL changed A record format too!  @%$#*&!

------------------------------------------------------------------------
r9850 | quinlan | 2004-04-03 08:35:33 +0000 (Sat, 03 Apr 2004) | 2 lines

bug 3234: workaround XBL format change by reverting to using A queries only

------------------------------------------------------------------------
r9849 | quinlan | 2004-04-03 01:13:59 +0000 (Sat, 03 Apr 2004) | 3 lines

revisions of the new HTML rules
remove the T_LONGWORDS tests

------------------------------------------------------------------------
r9840 | felicity | 2004-04-01 23:47:48 +0000 (Thu, 01 Apr 2004) | 1 line

reworked the mpart_alt_diff code a little bit, added more comments, added code to handle html w/ no words and only images...
------------------------------------------------------------------------
r9836 | quinlan | 2004-04-01 20:01:37 +0000 (Thu, 01 Apr 2004) | 2 lines

add some potential HTML rules for short HTML spam

------------------------------------------------------------------------
r9832 | felicity | 2004-03-31 02:17:22 +0000 (Wed, 31 Mar 2004) | 1 line

bug 3209: added MISSING_SUBJECT rule
------------------------------------------------------------------------
r9831 | quinlan | 2004-03-31 01:09:32 +0000 (Wed, 31 Mar 2004) | 2 lines

minor change

------------------------------------------------------------------------
r9830 | felicity | 2004-03-30 23:53:21 +0000 (Tue, 30 Mar 2004) | 1 line

bug 3227: 'To: display-name: foo@bar ;' wasn't being properly handled (see RFC2822 for 'group').  I modified the code to trim out the address/name in the group situation, as well as cleaning off the excess whitespace in the address/name situations.
------------------------------------------------------------------------
r9829 | felicity | 2004-03-30 17:24:32 +0000 (Tue, 30 Mar 2004) | 1 line

bug 3230: don't allow 0-length tokens out of the bayes tokenizer
------------------------------------------------------------------------
r9812 | quinlan | 2004-03-29 21:15:28 +0000 (Mon, 29 Mar 2004) | 3 lines

make sure we're getting good incremental value from the LONGWORDS sub-rules
also aim for lower FP rate if possible

------------------------------------------------------------------------
r9810 | quinlan | 2004-03-29 20:52:13 +0000 (Mon, 29 Mar 2004) | 3 lines

update of IADB rules
still need to add http://www.isipp.com/iadb_query_sign_up1.php

------------------------------------------------------------------------
r9809 | felicity | 2004-03-29 17:59:15 +0000 (Mon, 29 Mar 2004) | 1 line

bug 3217: let init_learner() call init() so that callers can do a rebuild_learner_caches() call without doing a learn() or check() first, and leave init() as a non-public function.
------------------------------------------------------------------------
r9808 | jm | 2004-03-29 07:07:32 +0000 (Mon, 29 Mar 2004) | 1 line

rule_names.t again
------------------------------------------------------------------------
r9807 | jm | 2004-03-29 06:28:19 +0000 (Mon, 29 Mar 2004) | 1 line

rule_names.t again.  this time *removed* STOP_OFFERS, it's a rule with a .72 hitrate, with what can be a 128-character lookahead -- so terrible speed impact too
------------------------------------------------------------------------
r9806 | jm | 2004-03-29 05:24:13 +0000 (Mon, 29 Mar 2004) | 1 line

bug 2415: avoid Bat forgery FPs due to MailMan adding MIME boundaries
------------------------------------------------------------------------
r9805 | jm | 2004-03-29 05:18:25 +0000 (Mon, 29 Mar 2004) | 1 line

a little bit of cleanup on trusted_networks doco
------------------------------------------------------------------------
r9804 | quinlan | 2004-03-28 23:50:08 +0000 (Sun, 28 Mar 2004) | 2 lines

add T_URIBL_SC_SURBL

------------------------------------------------------------------------
r9803 | quinlan | 2004-03-28 23:05:12 +0000 (Sun, 28 Mar 2004) | 4 lines

revert combined backhair rules - I'm not really happy with the method
revision SenderBase domain age/volume rules - test per-IP instead of
  per-message

------------------------------------------------------------------------
r9802 | felicity | 2004-03-28 16:31:55 +0000 (Sun, 28 Mar 2004) | 1 line

add the SA version to the debug output...  I can't believe we didn't do that before.
------------------------------------------------------------------------
r9801 | felicity | 2004-03-28 16:26:04 +0000 (Sun, 28 Mar 2004) | 1 line

allow sa-learn --force-expire or sa-learn --expire to be used...
------------------------------------------------------------------------
r9800 | zelgadis | 2004-03-28 09:03:51 +0000 (Sun, 28 Mar 2004) | 2 lines

Bug #3223: RelayCountry: IP::Country::Fast can return undef

------------------------------------------------------------------------
r9799 | quinlan | 2004-03-28 06:17:46 +0000 (Sun, 28 Mar 2004) | 6 lines

merge T_FROM_EUDORA and FAKE_FROM_ALTAVISTA into FROM_NONSENDING_DOMAIN
delete FAKE_REPTO_ALTAVISTA and FAKE_ENVFROM_ALTAVISTA since
  FROM_NONSENDING_DOMAIN hits everything they do
delete T_FROM_DELPHI_BASIC - some FPs and it's a real company!
delete extra font rules not needed

------------------------------------------------------------------------
r9798 | felicity | 2004-03-28 04:16:40 +0000 (Sun, 28 Mar 2004) | 1 line

added a little more commenting on the default to ham mode...
------------------------------------------------------------------------
r9797 | felicity | 2004-03-28 04:13:24 +0000 (Sun, 28 Mar 2004) | 1 line

3.0 requires perl 5.6.1, so remove more code that is kluging around 5.005, etc.  also, found that ArchiveIterator was unnecessarily figuring out the class letter (h vs s) more often than was required...
------------------------------------------------------------------------
r9796 | quinlan | 2004-03-28 02:53:11 +0000 (Sun, 28 Mar 2004) | 2 lines

keep wheedling down backhair

------------------------------------------------------------------------
r9795 | quinlan | 2004-03-28 00:15:25 +0000 (Sun, 28 Mar 2004) | 3 lines

promote T_LONGWORDS_* to LONGWORDS
delete T_BAYESBUSTER_LINE_* because it overlaps LONGWORDS almost completely

------------------------------------------------------------------------
r9794 | sidney | 2004-03-27 22:31:27 +0000 (Sat, 27 Mar 2004) | 4 lines

bug #3192: anonymous sub spawned in spamd was sometimes not returning a value,
causing a cryptic undef warning in spawn's exit call. Fixed by always
returning some value.

------------------------------------------------------------------------
r9789 | quinlan | 2004-03-27 07:53:38 +0000 (Sat, 27 Mar 2004) | 2 lines

inf, undef, whatever

------------------------------------------------------------------------
r9788 | quinlan | 2004-03-27 07:52:31 +0000 (Sat, 27 Mar 2004) | 2 lines

typo

------------------------------------------------------------------------
r9787 | quinlan | 2004-03-27 07:44:34 +0000 (Sat, 27 Mar 2004) | 2 lines

HTML tests

------------------------------------------------------------------------
r9786 | quinlan | 2004-03-27 07:43:52 +0000 (Sat, 27 Mar 2004) | 2 lines

cosmetic

------------------------------------------------------------------------
r9785 | parker | 2004-03-27 07:38:56 +0000 (Sat, 27 Mar 2004) | 7 lines

Bug 3214 - Spamd not using per-user Bayes settings

When using -q/--sql-config or --ldap-config spamd was not switching to
the proper user.  Added call to signal_user_changed when those are
set.


------------------------------------------------------------------------
r9784 | quinlan | 2004-03-27 07:22:33 +0000 (Sat, 27 Mar 2004) | 2 lines

iterate on T_BAYESBUSTER_LINE_*

------------------------------------------------------------------------
r9783 | quinlan | 2004-03-27 07:11:30 +0000 (Sat, 27 Mar 2004) | 2 lines

fix a rule_names.t failure

------------------------------------------------------------------------
r9782 | quinlan | 2004-03-27 07:03:38 +0000 (Sat, 27 Mar 2004) | 2 lines

remove descriptions for deleted rules

------------------------------------------------------------------------
r9781 | quinlan | 2004-03-27 07:02:41 +0000 (Sat, 27 Mar 2004) | 5 lines

remove HTML_COMMENT_EMAIL (low performer)
remove HTML_COMMENT_8BITS (locale-specific, 0.5 S/O)
promote T_HTML_COMMENT_TINY6 to HTML_COMMENT_SHORT (T_HTML_TINY_COMMENTS had
  better accuracy, but seemed too specific/fragile)

------------------------------------------------------------------------
r9780 | quinlan | 2004-03-27 06:47:51 +0000 (Sat, 27 Mar 2004) | 2 lines

finally trim down the LONGWORDS rules

------------------------------------------------------------------------
r9779 | quinlan | 2004-03-27 06:35:22 +0000 (Sat, 27 Mar 2004) | 3 lines

remove extra low contrast tests
more backhair stuff

------------------------------------------------------------------------
r9778 | quinlan | 2004-03-27 05:03:29 +0000 (Sat, 27 Mar 2004) | 3 lines

fix undef readline bug
cosmetic changes

------------------------------------------------------------------------
r9777 | quinlan | 2004-03-27 05:02:36 +0000 (Sat, 27 Mar 2004) | 2 lines

get count right

------------------------------------------------------------------------
r9744 | jm | 2004-03-25 18:16:44 +0000 (Thu, 25 Mar 2004) | 1 line

number of tests increased
------------------------------------------------------------------------
r9740 | felicity | 2004-03-24 20:18:58 +0000 (Wed, 24 Mar 2004) | 1 line

remove some unneeded anon subroutines in get_tag() code.
------------------------------------------------------------------------
r9739 | felicity | 2004-03-24 19:54:31 +0000 (Wed, 24 Mar 2004) | 1 line

due to cpan's 'issues' with x.y.z version numbers, our internal numbering scheme will be based on perl's (x.yyyzzz), and convert to x.y.z for display...  also added coded, commented out for now, to allow 'require_version 3.0' to work for all 3.0.z versions.
------------------------------------------------------------------------
r9737 | quinlan | 2004-03-24 07:02:11 +0000 (Wed, 24 Mar 2004) | 2 lines

restoring tabs mysteriously removed

------------------------------------------------------------------------
r9736 | quinlan | 2004-03-24 06:54:55 +0000 (Wed, 24 Mar 2004) | 2 lines

some SenderBase rules for testing this weekend

------------------------------------------------------------------------
r9735 | quinlan | 2004-03-24 06:10:31 +0000 (Wed, 24 Mar 2004) | 2 lines

don't warn if a SenderBase field is undefined

------------------------------------------------------------------------
r9734 | jm | 2004-03-24 05:57:19 +0000 (Wed, 24 Mar 2004) | 1 line

bug 2326: add support for IPv4-in-v6 addrs and couriertcpd
------------------------------------------------------------------------
r9733 | jm | 2004-03-24 05:48:18 +0000 (Wed, 24 Mar 2004) | 1 line

bug 3173: add invisible tokens with special prefix
------------------------------------------------------------------------
r9732 | jm | 2004-03-24 05:31:09 +0000 (Wed, 24 Mar 2004) | 1 line

updated BUGGY_CGI for newer NMS FormMail releases, thx to Jonathan Stowe
------------------------------------------------------------------------
r9731 | jm | 2004-03-24 04:12:14 +0000 (Wed, 24 Mar 2004) | 1 line

bug 2342: remove vestigial descriptions for removed rules
------------------------------------------------------------------------
r9730 | quinlan | 2004-03-24 03:45:19 +0000 (Wed, 24 Mar 2004) | 2 lines

bug 3153: promote T_HTML_PLAIN_TEXT to HTML_MISSING_CTYPE

------------------------------------------------------------------------
r9729 | quinlan | 2004-03-24 03:42:40 +0000 (Wed, 24 Mar 2004) | 4 lines

promote T_RCVD_HELO_NE_IP1 to RCVD_HELO_IP_MISMATCH
  9.887  12.1696   0.0051    1.000   0.96    0.01  T_RCVD_HELO_NE_IP1
more tiny comment rules

------------------------------------------------------------------------
r9728 | jm | 2004-03-24 03:38:47 +0000 (Wed, 24 Mar 2004) | 1 line

fixed up last rules_names.t failures; also ditched a whole load of rules that were no longer hitting anything useful -- with particular emphasis on obsolete ratware rules and low-accuracy, hit-runtime phrases.
------------------------------------------------------------------------
r9721 | felicity | 2004-03-23 15:55:53 +0000 (Tue, 23 Mar 2004) | 1 line

make sure that bayes journal entries have the token in them appropriately ...
------------------------------------------------------------------------
r9696 | quinlan | 2004-03-23 01:31:00 +0000 (Tue, 23 Mar 2004) | 2 lines

somewhat less confusing logic (and maybe more correct)

------------------------------------------------------------------------
r9686 | jm | 2004-03-22 20:59:10 +0000 (Mon, 22 Mar 2004) | 1 line

updated MANIFEST
------------------------------------------------------------------------
r9685 | jm | 2004-03-22 20:56:47 +0000 (Mon, 22 Mar 2004) | 1 line

oops. thanks Mike, caught it again
------------------------------------------------------------------------
r9684 | parker | 2004-03-22 19:33:38 +0000 (Mon, 22 Mar 2004) | 1 line

bump number of tests
------------------------------------------------------------------------
r9660 | jm | 2004-03-22 08:16:09 +0000 (Mon, 22 Mar 2004) | 1 line

SPF now providing no FPs or FNs for me that are bug-related; so, promoting to main ruleset.  (if you're getting bug-related FPs/FNs, post them please.)   also, moved into a plugin and added a test
------------------------------------------------------------------------
r9659 | jm | 2004-03-21 02:50:26 +0000 (Sun, 21 Mar 2004) | 1 line

added new spamsign: T_SUBJ_2_NUM_PARENS
------------------------------------------------------------------------
r9634 | quinlan | 2004-03-19 20:59:38 +0000 (Fri, 19 Mar 2004) | 2 lines

remove T_HTML_WEB_BUGS

------------------------------------------------------------------------
r9612 | quinlan | 2004-03-19 08:21:35 +0000 (Fri, 19 Mar 2004) | 2 lines

bug 2996: HTML attribute testing

------------------------------------------------------------------------
r9611 | quinlan | 2004-03-19 08:06:57 +0000 (Fri, 19 Mar 2004) | 2 lines

promote T_HTML_OBFUSCATE5* to HTML_OBFUSCATE* starting with 5% instead of 0%

------------------------------------------------------------------------
r9610 | quinlan | 2004-03-19 07:46:31 +0000 (Fri, 19 Mar 2004) | 4 lines

promote T_DOMAIN_RATIO_026 to DOMAIN_RATIO
at least cache URIs in get_uri_list()
tidy some code

------------------------------------------------------------------------
r9606 | quinlan | 2004-03-19 05:24:02 +0000 (Fri, 19 Mar 2004) | 2 lines

bug 3194: constants can't be used directly in RE

------------------------------------------------------------------------
r9598 | felicity | 2004-03-19 01:22:28 +0000 (Fri, 19 Mar 2004) | 1 line

bug 3193: find_parts() wasn't going deep enough due to a bug introduced when find_parts() and _find_parts() got split... :(
------------------------------------------------------------------------
r9595 | quinlan | 2004-03-19 00:32:51 +0000 (Fri, 19 Mar 2004) | 2 lines

add new tests to check for when a HELO IP address is wrong

------------------------------------------------------------------------
r9593 | quinlan | 2004-03-18 19:58:26 +0000 (Thu, 18 Mar 2004) | 3 lines

remove HTML_COMMENT_RATIO
fix T_HTML_WEB_BUGS regular expression

------------------------------------------------------------------------
r9592 | felicity | 2004-03-18 18:16:35 +0000 (Thu, 18 Mar 2004) | 1 line

bug 3189: report_safe 1  and rewrite_headers weren't working together...  fixed.
------------------------------------------------------------------------
r9591 | parker | 2004-03-18 16:51:03 +0000 (Thu, 18 Mar 2004) | 1 line

upped number of tests
------------------------------------------------------------------------
r9590 | parker | 2004-03-18 07:24:05 +0000 (Thu, 18 Mar 2004) | 8 lines


Bug 3187 - trim_rules broke

trim_rules was not aware of the new rule priorities.  Created helper
methods in Conf.pm to hide the whole priority thing.  Also moved
trim_rules and add_meta_depends into Conf.pm.


------------------------------------------------------------------------
r9589 | quinlan | 2004-03-18 07:21:25 +0000 (Thu, 18 Mar 2004) | 2 lines

delete score

------------------------------------------------------------------------
r9588 | quinlan | 2004-03-18 07:10:19 +0000 (Thu, 18 Mar 2004) | 2 lines

invert weird negation

------------------------------------------------------------------------
r9587 | quinlan | 2004-03-18 06:59:41 +0000 (Thu, 18 Mar 2004) | 3 lines

fix test failure - I don't really think we need to do a ham test here
anyway

------------------------------------------------------------------------
r9586 | quinlan | 2004-03-18 06:34:00 +0000 (Thu, 18 Mar 2004) | 4 lines

check_for_mime_text_only is not needed yet
promote T_BILL_1618 to BILL_1618, remove UNDER_BILL_1618
T_DIGEST_MULTIPLE is a net test

------------------------------------------------------------------------
r9582 | jm | 2004-03-18 04:58:24 +0000 (Thu, 18 Mar 2004) | 1 line

bug 3048: noted sleep(1) libdb bug
------------------------------------------------------------------------
r9581 | jm | 2004-03-18 04:50:42 +0000 (Thu, 18 Mar 2004) | 1 line

bug 3183: Received line with extra space misparsed
------------------------------------------------------------------------
r9580 | jm | 2004-03-18 04:48:08 +0000 (Thu, 18 Mar 2004) | 1 line

oops, typo and too-long desc
------------------------------------------------------------------------
r9578 | jm | 2004-03-18 03:33:01 +0000 (Thu, 18 Mar 2004) | 1 line

killed T_REPLY_WITHOUT_HDRS, made JS charcode one harder
------------------------------------------------------------------------
r9577 | jm | 2004-03-18 03:27:01 +0000 (Thu, 18 Mar 2004) | 1 line

promoted remaining HELO_DYNAMIC rules, working well
------------------------------------------------------------------------
r9576 | jm | 2004-03-18 02:52:38 +0000 (Thu, 18 Mar 2004) | 1 line

bug 3176: inviz text that should be ignored, was not; bug 3137: BAYES rules were modifying body, fixed; bug 3173: invisible text investigation, still ongoing
------------------------------------------------------------------------
r9575 | quinlan | 2004-03-18 00:11:22 +0000 (Thu, 18 Mar 2004) | 3 lines

one last try before we bail on HTML_COMMENT_RATIO


------------------------------------------------------------------------
r9573 | quinlan | 2004-03-17 22:06:01 +0000 (Wed, 17 Mar 2004) | 2 lines

try variation of HTML_WEB_BUGS instead since the other rules weren't good

------------------------------------------------------------------------
r9572 | sidney | 2004-03-17 17:42:36 +0000 (Wed, 17 Mar 2004) | 2 lines

Bug 3021: Use whitelist_from_rcvd for a new forgery rule

------------------------------------------------------------------------
r9571 | parker | 2004-03-17 17:32:54 +0000 (Wed, 17 Mar 2004) | 10 lines

Bug 2912 - Allow test order to be controlled by "priority" setting

Added ability to assign priority to tests (ignored for RBL tests).
Meta tests must have a priority of at least 500. Moved all (except
starting of RBL queries) test methods into priority loop.  Optimized
test methods to make up for speed lost by running methods multiple
times for each message.  Set AWL test to priority 1000 to make sure
that it runs after all other tests have been run.


------------------------------------------------------------------------
r9570 | sidney | 2004-03-17 15:43:15 +0000 (Wed, 17 Mar 2004) | 2 lines

Add comment to rule_names test output so people will stop filing bug reports about it

------------------------------------------------------------------------
r9565 | quinlan | 2004-03-17 08:29:37 +0000 (Wed, 17 Mar 2004) | 2 lines

oops

------------------------------------------------------------------------
r9564 | quinlan | 2004-03-17 08:26:20 +0000 (Wed, 17 Mar 2004) | 3 lines

fix comment ratio code
test new thresholds for HTML_COMMENT_RATIO test

------------------------------------------------------------------------
r9557 | quinlan | 2004-03-17 08:03:45 +0000 (Wed, 17 Mar 2004) | 2 lines

minor change to UNWANTED_LANGUAGE_BODY

------------------------------------------------------------------------
r9556 | quinlan | 2004-03-17 08:00:05 +0000 (Wed, 17 Mar 2004) | 2 lines

add img_src text array for tests 

------------------------------------------------------------------------
r9547 | jm | 2004-03-17 05:56:23 +0000 (Wed, 17 Mar 2004) | 1 line

oops, typo
------------------------------------------------------------------------
r9546 | jm | 2004-03-17 05:48:33 +0000 (Wed, 17 Mar 2004) | 1 line

bug 2017: add rule for IMGs ending in /
------------------------------------------------------------------------
r9541 | jm | 2004-03-17 03:47:47 +0000 (Wed, 17 Mar 2004) | 1 line

promoted the 1.0-S/O HELO_DYNAMIC_* rules; removed some FAKE_HELO rules with lousy scores.
------------------------------------------------------------------------
r9540 | jm | 2004-03-17 03:23:22 +0000 (Wed, 17 Mar 2004) | 1 line

oops, didn't mean to check those in
------------------------------------------------------------------------
r9539 | jm | 2004-03-17 03:22:05 +0000 (Wed, 17 Mar 2004) | 1 line

fix T_HELO_DYNAMIC fps; add a load more patterns too
------------------------------------------------------------------------
r9536 | quinlan | 2004-03-16 20:14:01 +0000 (Tue, 16 Mar 2004) | 3 lines

add T_HTML_PLAIN_TEXT2 for kicks
revisions of the drug rules

------------------------------------------------------------------------
r9535 | quinlan | 2004-03-16 20:08:13 +0000 (Tue, 16 Mar 2004) | 2 lines

just provide the fragile HABEAS_SWE rule as a commented-out example

------------------------------------------------------------------------
r9531 | felicity | 2004-03-16 15:01:02 +0000 (Tue, 16 Mar 2004) | 1 line

updates to the accessdb code -- some versions of makemap/postmap add nulls to the end of values and keys so look for that, accept \d+ as an error code (postfix).
------------------------------------------------------------------------
r9530 | felicity | 2004-03-16 14:58:43 +0000 (Tue, 16 Mar 2004) | 1 line

bug 3180: if matching headers with RE, make sure to use ':[ \t]' and not ':\s' since the \s matches \n, which works great on blank headers, leaving the rest of the RE likely to explode in your face.
------------------------------------------------------------------------
r9523 | jm | 2004-03-16 06:34:32 +0000 (Tue, 16 Mar 2004) | 1 line

plugin speedup: cache the list of plugins and method refs for each subroutine name
------------------------------------------------------------------------
r9520 | jm | 2004-03-16 06:23:50 +0000 (Tue, 16 Mar 2004) | 1 line

fix basic_lint.t failure; multiple plugins registered meant that return value from one was overwritten by the next
------------------------------------------------------------------------
r9519 | jm | 2004-03-16 05:56:35 +0000 (Tue, 16 Mar 2004) | 1 line

oops, test failure in hashcash.t
------------------------------------------------------------------------
r9515 | jm | 2004-03-16 03:58:17 +0000 (Tue, 16 Mar 2004) | 1 line

bug 3027: bayes_dump_to_trusted_networks missing prereq warning
------------------------------------------------------------------------
r9509 | jm | 2004-03-16 03:02:50 +0000 (Tue, 16 Mar 2004) | 1 line

dammit! conditional code due to plugin use and --lint behaviour for scores with no rules
------------------------------------------------------------------------
r9508 | jm | 2004-03-16 03:01:06 +0000 (Tue, 16 Mar 2004) | 1 line

oops, score in the rules file
------------------------------------------------------------------------
r9507 | jm | 2004-03-16 03:00:58 +0000 (Tue, 16 Mar 2004) | 1 line

oops, score in the rules file
------------------------------------------------------------------------
r9506 | jm | 2004-03-16 02:41:24 +0000 (Tue, 16 Mar 2004) | 1 line

Hashcash moved to main ruleset.  Scores may need manual tweaking
------------------------------------------------------------------------
r9505 | jm | 2004-03-16 02:40:33 +0000 (Tue, 16 Mar 2004) | 1 line

look for init.pre in system rules dir if not in /etc/mail; used to support running from build dir
------------------------------------------------------------------------
r9499 | jm | 2004-03-15 23:09:38 +0000 (Mon, 15 Mar 2004) | 1 line

oops, thx Mike
------------------------------------------------------------------------
r9491 | jm | 2004-03-15 08:37:39 +0000 (Mon, 15 Mar 2004) | 1 line

Theo, pls review.  think you meant this; avoids undef errors
------------------------------------------------------------------------
r9490 | jm | 2004-03-15 08:34:25 +0000 (Mon, 15 Mar 2004) | 1 line

moved hashcash code into a plugin (bug 3170)
------------------------------------------------------------------------
r9489 | jm | 2004-03-15 08:34:04 +0000 (Mon, 15 Mar 2004) | 1 line

moved hashcash code into a plugin (bug 3170)
------------------------------------------------------------------------
r9485 | jm | 2004-03-15 06:07:57 +0000 (Mon, 15 Mar 2004) | 1 line

added init.pre file.  NOTE: filename will probably change based on review, so get making suggestions ;)
------------------------------------------------------------------------
r9482 | jm | 2004-03-15 05:45:03 +0000 (Mon, 15 Mar 2004) | 1 line

allow user override of plugins through a specially-treated file, '/etc/mail/spamassassin/init.pre'
------------------------------------------------------------------------
r9481 | jm | 2004-03-15 05:22:17 +0000 (Mon, 15 Mar 2004) | 1 line

adding test for bug 2906 - Courier received header format
------------------------------------------------------------------------
r9480 | jm | 2004-03-15 05:16:39 +0000 (Mon, 15 Mar 2004) | 1 line

bug 1923: multicast and other 'very reserved' IANA addresses should not appear in Received headers; they're forgeries.   also noted some failures to catch those in Constants.pm
------------------------------------------------------------------------
r9460 | jm | 2004-03-14 05:49:08 +0000 (Sun, 14 Mar 2004) | 1 line

bug 2129: bayes tweak -- use only visible text for Bayesian classification and learning, in other words ignore invisible or low-contrast text.
------------------------------------------------------------------------
r9448 | jm | 2004-03-14 02:05:14 +0000 (Sun, 14 Mar 2004) | 1 line

22-char limit
------------------------------------------------------------------------
r9447 | jm | 2004-03-14 01:16:48 +0000 (Sun, 14 Mar 2004) | 1 line

bug 2129: results of new Bayes tweaking -- numeric token decomposition no longer useful, dropped; decomposed text tokens (Foo? is duped as foo? Foo foo) added; dual header-mapping tweaks added for Message-Id, In-Reply-To, From/To/Cc, X-Mailer and User-Agent headers; and Henry's fix for bug 3118 for dealing with unbalanced corpora.
------------------------------------------------------------------------
r9446 | jm | 2004-03-14 01:03:48 +0000 (Sun, 14 Mar 2004) | 1 line

updated bayes-testing with corrected details on how to run a 10-fold cross-validation run for testing Bayes.  Go forth and tweak -- please...
------------------------------------------------------------------------
r9445 | jm | 2004-03-14 00:52:59 +0000 (Sun, 14 Mar 2004) | 1 line

added test case for bug 3004
------------------------------------------------------------------------
r9433 | felicity | 2004-03-13 17:52:39 +0000 (Sat, 13 Mar 2004) | 1 line

bug 3167: a few more places needed to be aware that bayes_score can be undef now via bug 2279
------------------------------------------------------------------------
r9402 | quinlan | 2004-03-13 06:58:39 +0000 (Sat, 13 Mar 2004) | 2 lines

add IADB trusted

------------------------------------------------------------------------
r9397 | quinlan | 2004-03-13 05:27:43 +0000 (Sat, 13 Mar 2004) | 2 lines

bug 3128: change AUTHOR to project

------------------------------------------------------------------------
r9396 | felicity | 2004-03-13 05:08:10 +0000 (Sat, 13 Mar 2004) | 1 line

Making BayesStoreSQL and BayesStoreDBM to BayesStore/SQL and BayesStore/DBM ...  It's a bit cleaner this way. :)
------------------------------------------------------------------------
r9394 | quinlan | 2004-03-13 02:18:27 +0000 (Sat, 13 Mar 2004) | 2 lines

more HTML obfuscation

------------------------------------------------------------------------
r9392 | quinlan | 2004-03-13 00:04:55 +0000 (Sat, 13 Mar 2004) | 2 lines

assume this paren is wanted

------------------------------------------------------------------------
r9391 | felicity | 2004-03-12 21:07:34 +0000 (Fri, 12 Mar 2004) | 1 line

update sa-learn docs.  rename (but keep backwards compat support for) --rebuild and --no-rebuild to be the more accurate --sync and --nosync since the option specifies that a journal sync should/should not occur... there's really no rebuilding involved.
------------------------------------------------------------------------
r9390 | felicity | 2004-03-12 21:06:07 +0000 (Fri, 12 Mar 2004) | 1 line

bug 3164: 2.6x allowed old databaes to be used for check(), dump(), etc (anything that didn't write to the db).  for 3.0 we're dropping that support -- databases must now be upgraded before they're usable.
------------------------------------------------------------------------
r9389 | quinlan | 2004-03-12 20:46:12 +0000 (Fri, 12 Mar 2004) | 2 lines

more work on HTML obfuscation rules

------------------------------------------------------------------------
r9388 | felicity | 2004-03-12 20:31:17 +0000 (Fri, 12 Mar 2004) | 1 line

no more PORN_4, so kill the score.
------------------------------------------------------------------------
r9387 | quinlan | 2004-03-12 19:00:18 +0000 (Fri, 12 Mar 2004) | 2 lines

bug 3163: probable improvement of HTML obfuscation test

------------------------------------------------------------------------
r9386 | felicity | 2004-03-12 16:44:31 +0000 (Fri, 12 Mar 2004) | 1 line

bug 3155: parts which claim to be message/rfc822 but have no body content would cause the parser to wait on STDIN...  if there is no body content, don't bother parsing into a subtree.
------------------------------------------------------------------------
r9385 | parker | 2004-03-12 16:15:05 +0000 (Fri, 12 Mar 2004) | 1 line

Bug 3162: document noautolearn tflag
------------------------------------------------------------------------
r9384 | climent | 2004-03-12 13:12:16 +0000 (Fri, 12 Mar 2004) | 2 lines

Uploading Spanish ruls...

------------------------------------------------------------------------
r9381 | quinlan | 2004-03-12 07:07:13 +0000 (Fri, 12 Mar 2004) | 2 lines

some drug rules

------------------------------------------------------------------------
r9374 | jm | 2004-03-12 02:18:43 +0000 (Fri, 12 Mar 2004) | 1 line

moved PORN URI rules to 20_porn.cf, and shortened descs
------------------------------------------------------------------------
r9373 | jm | 2004-03-12 01:21:47 +0000 (Fri, 12 Mar 2004) | 1 line

bug 3150: removed PORN_4 and split up into the worthwhile sub-rule parts; dropped the 'teen' rule and a few long-dead spammer domains
------------------------------------------------------------------------
r9372 | jm | 2004-03-12 00:56:42 +0000 (Fri, 12 Mar 2004) | 1 line

bug 2713: removed code from Dustin Sallings, since we never got a CLA on-paper and it's holding up ASF migration.  This means the --virtual-config switch is now gone; but --virtual-config-dir is still present, so users can migrate to that
------------------------------------------------------------------------
r9371 | zelgadis | 2004-03-12 00:56:12 +0000 (Fri, 12 Mar 2004) | 4 lines

I modified this intead of /etc/mail/spamassassin/local.cf; I feel so stupid.

*whacks self with a clue-stick*

------------------------------------------------------------------------
r9364 | felicity | 2004-03-11 23:26:30 +0000 (Thu, 11 Mar 2004) | 1 line

bug 1843: try less complex S.1618 matching
------------------------------------------------------------------------
r9362 | felicity | 2004-03-11 22:42:59 +0000 (Thu, 11 Mar 2004) | 1 line

bug 2168: look for malformed/non-existent mozilla user-agent ...
------------------------------------------------------------------------
r9361 | felicity | 2004-03-11 22:30:11 +0000 (Thu, 11 Mar 2004) | 1 line

bug 2279: bayes shouldn't use 0.5 as an error condition.  leave that up to the calling functions.  we now return undef when a probability can't be calculated.  the BAYES_* rules can now include 0.5 as that's a valid probabality now.
------------------------------------------------------------------------
r9360 | felicity | 2004-03-11 18:52:14 +0000 (Thu, 11 Mar 2004) | 1 line

bug 3112: if at least one bayes token was found in the db, but they were all discounted due to their overall strength, we'd potentially continue and get division by zero errors when calculating probability.  so exit out if there are no 'strong' tokens available.
------------------------------------------------------------------------
r9359 | felicity | 2004-03-11 18:40:30 +0000 (Thu, 11 Mar 2004) | 1 line

bug 3152: ldap/README had attr and scope in the wrong order in the ldap url.  corrected to be compliant with rfc 2255.
------------------------------------------------------------------------
r9348 | zelgadis | 2004-03-11 05:07:36 +0000 (Thu, 11 Mar 2004) | 2 lines

Bug 3153: Detect HTML pretending to be text

------------------------------------------------------------------------
r9347 | felicity | 2004-03-11 04:22:46 +0000 (Thu, 11 Mar 2004) | 1 line

get_magic_re can just use db_version ...
------------------------------------------------------------------------
r9346 | felicity | 2004-03-11 03:28:15 +0000 (Thu, 11 Mar 2004) | 1 line

tokenize_line was making lots of subroutine calls to get_magic_re in its tight loop of token checking.  let's just make the call once and cache it.
------------------------------------------------------------------------
r9345 | quinlan | 2004-03-10 23:26:55 +0000 (Wed, 10 Mar 2004) | 2 lines

even tinier

------------------------------------------------------------------------
r9344 | quinlan | 2004-03-10 23:25:05 +0000 (Wed, 10 Mar 2004) | 2 lines

very tiny speed-up

------------------------------------------------------------------------
r9340 | quinlan | 2004-03-10 08:25:46 +0000 (Wed, 10 Mar 2004) | 2 lines

revise Habeas rules

------------------------------------------------------------------------
r9337 | jm | 2004-03-10 05:58:37 +0000 (Wed, 10 Mar 2004) | 1 line

bug 3121: added test suite for Received-header parser
------------------------------------------------------------------------
r9330 | felicity | 2004-03-10 03:52:57 +0000 (Wed, 10 Mar 2004) | 1 line

move the receive_date code after the probability check in case we exit before using the atime value
------------------------------------------------------------------------
r9329 | jm | 2004-03-10 03:44:17 +0000 (Wed, 10 Mar 2004) | 1 line

bug 2811: Polish translations from Jerzy Szczudlowski and radek at alter dot pl
------------------------------------------------------------------------
r9328 | jm | 2004-03-10 03:31:40 +0000 (Wed, 10 Mar 2004) | 1 line

URIBL: stop querying against XBL, it provides 0 hits
------------------------------------------------------------------------
r9327 | felicity | 2004-03-10 03:17:43 +0000 (Wed, 10 Mar 2004) | 1 line

fix a typo and make dump more efficient (use while/each instead of foreach).
------------------------------------------------------------------------
r9321 | felicity | 2004-03-10 00:53:49 +0000 (Wed, 10 Mar 2004) | 1 line

fix up a few small issues related to the previous bayes changes
------------------------------------------------------------------------
r9320 | felicity | 2004-03-10 00:48:54 +0000 (Wed, 10 Mar 2004) | 1 line

make the bayes scan/tokenize code work a bit more straight forward.  for instance, have tokenize() uniq the list of tokens, not each function which calls it...
------------------------------------------------------------------------
r9319 | felicity | 2004-03-09 23:57:12 +0000 (Tue, 09 Mar 2004) | 1 line

fix up a comment...
------------------------------------------------------------------------
r9316 | felicity | 2004-03-09 23:34:23 +0000 (Tue, 09 Mar 2004) | 1 line

put the html results in metadata!
------------------------------------------------------------------------
r9315 | quinlan | 2004-03-09 20:39:16 +0000 (Tue, 09 Mar 2004) | 2 lines

promote new double IP rules

------------------------------------------------------------------------
r9314 | quinlan | 2004-03-09 20:30:05 +0000 (Tue, 09 Mar 2004) | 2 lines

add net tflag

------------------------------------------------------------------------
r9309 | felicity | 2004-03-09 07:38:25 +0000 (Tue, 09 Mar 2004) | 1 line

made the --mbox docs a little more verbose
------------------------------------------------------------------------
r9307 | felicity | 2004-03-09 06:04:09 +0000 (Tue, 09 Mar 2004) | 1 line

bug 3077: more work to speed up remove_spamassassin_markup...  'report_safe 0' now saves a pristine copy of the header to X-Spam-Prev-Header, and remove_sa_markup properly moves it back.  it also keep backward compatibility for pre-3.0's rewrite headers, which unfortunately means the config is loaded.  but now we only load the config when necessary (ie: if the message(s) are report_safe encapsulated, no config is read. ;)    made a few other efficiency improvements, and fixed the stripmarkup test to deal with the new way the markup is removed.
------------------------------------------------------------------------
r9306 | quinlan | 2004-03-09 06:01:56 +0000 (Tue, 09 Mar 2004) | 2 lines

bug 3146: add test rules for the ISIPP Accreditation Database

------------------------------------------------------------------------
r7059 | jm | 2004-03-09 03:14:36 +0000 (Tue, 09 Mar 2004) | 1 line

fixed a constants-related test failure.  also reimplemented code that needed reimplementation in Constants.pm, which I think will fix the ALL_IN_TRUSTED fps
------------------------------------------------------------------------
r7058 | jm | 2004-03-09 02:59:49 +0000 (Tue, 09 Mar 2004) | 1 line

took Michael's advice and made the constants into REAL constants
------------------------------------------------------------------------
r7057 | quinlan | 2004-03-09 00:26:06 +0000 (Tue, 09 Mar 2004) | 2 lines

a few changes to double IP rules

------------------------------------------------------------------------
r7056 | felicity | 2004-03-09 00:23:49 +0000 (Tue, 09 Mar 2004) | 1 line

have ArchiveIterator -j1 --restart do a forking thing...
------------------------------------------------------------------------
r7055 | felicity | 2004-03-08 22:58:48 +0000 (Mon, 08 Mar 2004) | 1 line

the rendered and decoded generation code is now in Message instead of Metadata
------------------------------------------------------------------------
r7054 | felicity | 2004-03-08 22:48:07 +0000 (Mon, 08 Mar 2004) | 1 line

running in test mode caused confusion...
------------------------------------------------------------------------
r7053 | felicity | 2004-03-08 21:30:26 +0000 (Mon, 08 Mar 2004) | 1 line

bug 3144: don't subparse message/* types if the whole message claims to be message/* ...   also, make sure we parse the decoded version of the part...
------------------------------------------------------------------------
r7052 | quinlan | 2004-03-08 08:05:22 +0000 (Mon, 08 Mar 2004) | 3 lines

a backhair variant
revision of double IP rules

------------------------------------------------------------------------
r7051 | jm | 2004-03-08 07:10:19 +0000 (Mon, 08 Mar 2004) | 1 line

updated MANIFEST
------------------------------------------------------------------------
r7050 | quinlan | 2004-03-08 06:53:57 +0000 (Mon, 08 Mar 2004) | 2 lines

add backhair rules based on idea from Jennifer Wheeler and Adam Lopresto

------------------------------------------------------------------------
r7049 | jm | 2004-03-08 06:17:50 +0000 (Mon, 08 Mar 2004) | 1 line

removed comment I meant to remove before ;)
------------------------------------------------------------------------
r7048 | jm | 2004-03-08 05:58:04 +0000 (Mon, 08 Mar 2004) | 1 line

a whole load of rules promoted, several removed, including OPT_HEADER (which was giving a .64 S/O)
------------------------------------------------------------------------
r7047 | jm | 2004-03-08 04:58:59 +0000 (Mon, 08 Mar 2004) | 1 line

trimmed down desc lengths
------------------------------------------------------------------------
r7046 | jm | 2004-03-08 04:53:19 +0000 (Mon, 08 Mar 2004) | 1 line

added rule to catch 'String.fromCharCode(chinner[encroach] ^ despairs[encroach % Rumford]);' type spams
------------------------------------------------------------------------
r7045 | quinlan | 2004-03-08 04:42:19 +0000 (Mon, 08 Mar 2004) | 2 lines

revision of drug rules

------------------------------------------------------------------------
r7044 | jm | 2004-03-08 04:31:11 +0000 (Mon, 08 Mar 2004) | 1 line

super-easy recent pattern
------------------------------------------------------------------------
r7043 | duncf | 2004-03-07 22:28:21 +0000 (Sun, 07 Mar 2004) | 1 line

Bug 2988: Patch from Bob Apthorpe for sa-stats.pl
------------------------------------------------------------------------
r7042 | felicity | 2004-03-07 08:51:33 +0000 (Sun, 07 Mar 2004) | 1 line

bug 2632: if running spamassassin in test mode, force disable things like autowhitelist and bayes autolearn (things that have a memory...)
------------------------------------------------------------------------
r7041 | felicity | 2004-03-07 08:43:10 +0000 (Sun, 07 Mar 2004) | 1 line

bug 2220: added test rule to check if more than 1 network digest check considers the mail spam
------------------------------------------------------------------------
r7040 | felicity | 2004-03-07 08:40:01 +0000 (Sun, 07 Mar 2004) | 1 line

bug 2201: allow relative scores to be put in the configuration file
------------------------------------------------------------------------
r7039 | felicity | 2004-03-07 06:10:14 +0000 (Sun, 07 Mar 2004) | 1 line

oops.  wrong paren thing.
------------------------------------------------------------------------
r7038 | felicity | 2004-03-07 06:08:01 +0000 (Sun, 07 Mar 2004) | 1 line

fix up a few small issues with the message/* parsing patch ...
------------------------------------------------------------------------
r7037 | felicity | 2004-03-07 06:05:09 +0000 (Sun, 07 Mar 2004) | 1 line

bug 3069: parse message/* parts into a subtree of the message/* part.  makes get_rendered/get_decoded only look for text parts (will go into the message tree), etc.
------------------------------------------------------------------------
r7036 | quinlan | 2004-03-07 05:31:02 +0000 (Sun, 07 Mar 2004) | 3 lines

add some more AHBL subtests
rename T_RCVD_IN_AHBL to __RCVD_IN_AHBL

------------------------------------------------------------------------
r7035 | quinlan | 2004-03-07 05:18:57 +0000 (Sun, 07 Mar 2004) | 2 lines

bug 3129: only load a plugin once, fix from Matthew Cline

------------------------------------------------------------------------
r7034 | quinlan | 2004-03-06 22:51:26 +0000 (Sat, 06 Mar 2004) | 3 lines

remove backup flag for rsync
chmod after rsync

------------------------------------------------------------------------
r7033 | quinlan | 2004-03-06 20:19:01 +0000 (Sat, 06 Mar 2004) | 2 lines

bug 3132: some more double IP rules to test

------------------------------------------------------------------------
r7032 | felicity | 2004-03-06 19:36:28 +0000 (Sat, 06 Mar 2004) | 1 line

make the decoded/rendered body part functions a bit more efficient and streamlined.
------------------------------------------------------------------------
r7030 | felicity | 2004-03-06 06:05:50 +0000 (Sat, 06 Mar 2004) | 1 line

let spamassassin report the number of messages examined as long as the examination doesn't produce output of its own.
------------------------------------------------------------------------
r7029 | quinlan | 2004-03-06 04:58:22 +0000 (Sat, 06 Mar 2004) | 2 lines

fix another t/rule_names.t failure

------------------------------------------------------------------------
r7025 | felicity | 2004-03-06 00:47:28 +0000 (Sat, 06 Mar 2004) | 1 line

bug 3127: autolearn now has a 'disabled' state which occurs if autolearning is, well, disabled.
------------------------------------------------------------------------
r7024 | felicity | 2004-03-05 23:47:47 +0000 (Fri, 05 Mar 2004) | 1 line

fix small pod oopsie
------------------------------------------------------------------------
r7023 | felicity | 2004-03-05 23:45:03 +0000 (Fri, 05 Mar 2004) | 1 line

fix more rule hitting itself issues...
------------------------------------------------------------------------
r7022 | felicity | 2004-03-05 23:15:46 +0000 (Fri, 05 Mar 2004) | 1 line

bug 1890: spamassassin now uses ArchiveIterator.  This lets us do things like 'spamassassin -d --mbox file1' and have the functionality go over the entire mbox file.  same for checks, adding to white/black-lists, etc.
------------------------------------------------------------------------
r7021 | felicity | 2004-03-05 22:20:59 +0000 (Fri, 05 Mar 2004) | 1 line

if we're looking at messages that aren't specified as spam or ham, message_array gets confused.  so default to ham.
------------------------------------------------------------------------
r7020 | quinlan | 2004-03-05 21:18:12 +0000 (Fri, 05 Mar 2004) | 2 lines

fix a t/rule_names.t failure

------------------------------------------------------------------------
r7019 | quinlan | 2004-03-05 20:54:09 +0000 (Fri, 05 Mar 2004) | 2 lines

don't change @$body since it affects other tests!

------------------------------------------------------------------------
r7014 | parker | 2004-03-05 16:43:25 +0000 (Fri, 05 Mar 2004) | 7 lines

PR3006 SQL user-prefs stopped working latest trunk
  When parsing the Conf object expected to be able call methods off of
  the main SA object.  The problem is that we delete the object in
  init so it's space can be re-used.  This fix sets the main SA object
  in conf before a call to parse the scores, and then deletes it
  afterward.

------------------------------------------------------------------------
r7013 | parker | 2004-03-05 16:32:14 +0000 (Fri, 05 Mar 2004) | 1 line

removed extra debug statement
------------------------------------------------------------------------
r7012 | quinlan | 2004-03-05 08:57:45 +0000 (Fri, 05 Mar 2004) | 2 lines

Net::DNS 0.34 or higher is required to use Mail::SPF::Query

------------------------------------------------------------------------
r7011 | quinlan | 2004-03-05 05:31:30 +0000 (Fri, 05 Mar 2004) | 2 lines

fix another t/rule_names.t failure

------------------------------------------------------------------------
r7010 | quinlan | 2004-03-05 05:24:11 +0000 (Fri, 05 Mar 2004) | 2 lines

fix another t/rule_names.t failure by changing OFFERS_ETC to SPECIAL_OFFERS

------------------------------------------------------------------------
r7009 | quinlan | 2004-03-05 05:19:38 +0000 (Fri, 05 Mar 2004) | 2 lines

just a bit of trimming since I'm stalled on the CSS stuff

------------------------------------------------------------------------
r7008 | parker | 2004-03-05 05:16:17 +0000 (Fri, 05 Mar 2004) | 15 lines

PR1222: die on error connecting or querying the SQL database
  If we are unable to connect to the SQL database or if there is an
  error while performing the query, then we will return a service
  unavailable error to spamc.

PR1602/1079: Configurable SQL query/per domain defaults
  Allow customizable SQL queries to retrieve user preferences.

  This allows for all sorts of things, such as domain based overrides,
  integration with other systems (ie Horde/IMP).

Also removed use of GLOBAL username as a global override in
ConfSourceSQL.


------------------------------------------------------------------------
r7005 | quinlan | 2004-03-05 03:54:45 +0000 (Fri, 05 Mar 2004) | 2 lines

some rule renaming to fix t/rule_names.t failures

------------------------------------------------------------------------
r7004 | quinlan | 2004-03-05 03:08:19 +0000 (Fri, 05 Mar 2004) | 2 lines

Subject: drug rules

------------------------------------------------------------------------
r7003 | quinlan | 2004-03-05 03:05:31 +0000 (Fri, 05 Mar 2004) | 2 lines

replace VIAGRA with DRUG_ED_CAPS

------------------------------------------------------------------------
r7002 | jm | 2004-03-05 02:07:24 +0000 (Fri, 05 Mar 2004) | 23 lines

a few changes from last night I hadn't checked in yet:

- Fixed fd leak in URIBL code, which was pretty serious after a big mass-check
  run.  my bad!

- URIBL code now correctly disables itself if mass-check --rules is used and it
  is not selected; previously it did not.

- added more paranoia to envelope-from retrieval, to deal with the case where
  an intermediate relay added an X-Envelope-From header (for example) then
  relayed into a mailing list, which in turn used a new env-from.  old code
  would have picked up X-Envelope-From, even though that was no longer
  appropriate.  New code checks for Received headers before that hdr, and
  ignores it if they exist.

- SPF now working well; only FPs I now get are from ISPs who've set up over-
  permissive SPF records (*cough BlueYonder.co.uk cough*) and from a couple
  of domains with buggy SPF records.

- added another (infrequent) Received line format (I think it's TIS -- now NAI
  -- fwtk).


------------------------------------------------------------------------
r7001 | quinlan | 2004-03-05 01:47:17 +0000 (Fri, 05 Mar 2004) | 5 lines

never say never...
- add domain spoofing test (getting good results now)
- move uri_to_domain to Util.pm
- drop #fragments from URIs

------------------------------------------------------------------------
r7000 | jm | 2004-03-04 07:21:38 +0000 (Thu, 04 Mar 2004) | 1 line

bug 2603: stop-list for numeric Received tokens not working too well
------------------------------------------------------------------------
r6999 | jm | 2004-03-04 07:19:35 +0000 (Thu, 04 Mar 2004) | 1 line

bug 2189: add bayes compression tokens for X-Spam-Relays-Trusted, X-Spam-Relays-Untrusted
------------------------------------------------------------------------
r6998 | jm | 2004-03-04 07:14:58 +0000 (Thu, 04 Mar 2004) | 1 line

bug 3016: avoid serious delays from mails with non-resolvable domains
------------------------------------------------------------------------
r6997 | jm | 2004-03-04 06:46:55 +0000 (Thu, 04 Mar 2004) | 1 line

added some header-order rules
------------------------------------------------------------------------
r6994 | quinlan | 2004-03-04 06:26:04 +0000 (Thu, 04 Mar 2004) | 2 lines

drop the /i

------------------------------------------------------------------------
r6992 | jm | 2004-03-04 05:56:34 +0000 (Thu, 04 Mar 2004) | 1 line

bug 2876: catch faked reply messages
------------------------------------------------------------------------
r6990 | jm | 2004-03-04 05:45:07 +0000 (Thu, 04 Mar 2004) | 1 line

bug 2983: a mistimed timeout results in spurious errors in spamc
------------------------------------------------------------------------
r6989 | jm | 2004-03-04 05:35:36 +0000 (Thu, 04 Mar 2004) | 1 line

bug 2809: added rule to work around PRIORITY_NO_NAME fps
------------------------------------------------------------------------
r6988 | jm | 2004-03-04 05:25:07 +0000 (Thu, 04 Mar 2004) | 1 line

bug 2952: document :raw suffix
------------------------------------------------------------------------
r6987 | jm | 2004-03-04 05:16:31 +0000 (Thu, 04 Mar 2004) | 1 line

added a rule for long hostnames in URIs
------------------------------------------------------------------------
r6984 | quinlan | 2004-03-04 02:50:36 +0000 (Thu, 04 Mar 2004) | 2 lines

variations of some drug rules that FP a bit too much

------------------------------------------------------------------------
r6983 | quinlan | 2004-03-04 02:45:23 +0000 (Thu, 04 Mar 2004) | 2 lines

promote T_RCVD_BY_IP_2 to RCVD_BY_IP

------------------------------------------------------------------------
r6982 | quinlan | 2004-03-04 02:38:23 +0000 (Thu, 04 Mar 2004) | 2 lines

some drug rules

------------------------------------------------------------------------
r6981 | quinlan | 2004-03-04 02:21:50 +0000 (Thu, 04 Mar 2004) | 2 lines

separate drug rules (enough for a separate file to make sense)

------------------------------------------------------------------------
r6980 | quinlan | 2004-03-04 02:14:52 +0000 (Thu, 04 Mar 2004) | 2 lines

fix CELL_PHONE_BOOST self-hits

------------------------------------------------------------------------
r6979 | quinlan | 2004-03-04 01:01:21 +0000 (Thu, 04 Mar 2004) | 2 lines

bug 887: t script to test that rules don't trigger on their own names

------------------------------------------------------------------------
r6978 | parker | 2004-03-03 20:57:00 +0000 (Wed, 03 Mar 2004) | 1 line

opps, obviously wrong column in username index
------------------------------------------------------------------------
r6977 | quinlan | 2004-03-03 06:43:17 +0000 (Wed, 03 Mar 2004) | 3 lines

promote T_FAKED_AUTHWARN_2 to X_AUTH_WARN_FAKED
revisions of T_RCVD_BY_IP

------------------------------------------------------------------------
r6976 | quinlan | 2004-03-03 04:05:44 +0000 (Wed, 03 Mar 2004) | 2 lines

remove some unnecessary translations and scores

------------------------------------------------------------------------
r6975 | quinlan | 2004-03-03 04:03:56 +0000 (Wed, 03 Mar 2004) | 7 lines

remove some really low eval tests, 7day results:
  0.000   0.0000   0.0000    0.500   0.12    0.00  HTML_TAG_BALANCE_FONT
  0.013   0.0125   0.0129    0.493   0.11    2.90  FAKE_HELO_BIGFOOT
  0.009   0.0085   0.0103    0.453   0.09    0.07  HTML_TAG_BALANCE_A
  0.003   0.0015   0.0103    0.129   0.00    2.80  FAKE_HELO_USA_NET
  0.007   0.0015   0.0283    0.051   0.00    0.00  FAKE_HELO_NETZERO

------------------------------------------------------------------------
r6974 | quinlan | 2004-03-03 03:50:58 +0000 (Wed, 03 Mar 2004) | 2 lines

remove some old spam signature rules

------------------------------------------------------------------------
r6973 | quinlan | 2004-03-03 03:32:47 +0000 (Wed, 03 Mar 2004) | 7 lines

share same eval test between HTML comments and HTML titles
promote new RCVD_DOUBLE_IP rules
promote T_MIME_BOUND_DIGITS15 to MIME_BOUND_DIGITS_15
demote T_RCVD_BY_IP
demote T_FAKED_IP_IN_RCVD
remove HTML_COMMENT_SKY

------------------------------------------------------------------------
r6972 | felicity | 2004-03-03 01:00:44 +0000 (Wed, 03 Mar 2004) | 1 line

another update
------------------------------------------------------------------------
r6971 | felicity | 2004-03-02 22:08:28 +0000 (Tue, 02 Mar 2004) | 1 line

update the update_devel script a little bit -- clean up more after itself, etc.
------------------------------------------------------------------------
r6970 | felicity | 2004-03-02 19:45:42 +0000 (Tue, 02 Mar 2004) | 1 line

bug 2012: move anything that's not a check() out from check().  in this case, the report generation code -- moved to get_report().
------------------------------------------------------------------------
r6963 | jm | 2004-03-02 04:31:18 +0000 (Tue, 02 Mar 2004) | 1 line

fixed MANIFEST bug
------------------------------------------------------------------------
r6962 | felicity | 2004-03-02 04:26:16 +0000 (Tue, 02 Mar 2004) | 1 line

added some more meat to report_safe.  specifically, look for report_safe 0 to kill 'x-spam-status: no' in the original message
------------------------------------------------------------------------
r6961 | felicity | 2004-03-02 03:16:31 +0000 (Tue, 02 Mar 2004) | 1 line

bug 3117: merged sa-learn and CmdLearn together.  set --dump to work even if use_bayes is 0.  gave untie_db a return value. some bayes functions were returning 1 for error, fixed that around too...
------------------------------------------------------------------------
r6960 | jm | 2004-03-02 02:45:58 +0000 (Tue, 02 Mar 2004) | 1 line

updated MANIFEST for other people's additions ;)
------------------------------------------------------------------------
r6959 | jm | 2004-03-02 02:40:51 +0000 (Tue, 02 Mar 2004) | 1 line

added test to ensure various semantics of our rule types are working
------------------------------------------------------------------------
r6958 | quinlan | 2004-03-02 02:04:57 +0000 (Tue, 02 Mar 2004) | 2 lines

remove a few rules

------------------------------------------------------------------------
r6957 | quinlan | 2004-03-02 01:06:14 +0000 (Tue, 02 Mar 2004) | 2 lines

some basic tests for report_safe option

------------------------------------------------------------------------
r6956 | felicity | 2004-03-01 22:57:28 +0000 (Mon, 01 Mar 2004) | 1 line

bug 3113: for some reason 'report_safe 0' wasn't removing the original X-Spam- headers before adding the new ones.  doh!
------------------------------------------------------------------------
r6955 | quinlan | 2004-03-01 22:24:03 +0000 (Mon, 01 Mar 2004) | 2 lines

bug fix

------------------------------------------------------------------------
r6954 | quinlan | 2004-03-01 22:22:28 +0000 (Mon, 01 Mar 2004) | 2 lines

T_DOUBLE_IP_* evolves

------------------------------------------------------------------------
r6953 | quinlan | 2004-03-01 18:51:41 +0000 (Mon, 01 Mar 2004) | 3 lines

bug 3114: add T_HTML_COMMENT_TAG
add T_FAKED_AUTHWARN_2 to avoid using meta rule for this

------------------------------------------------------------------------
r6952 | quinlan | 2004-03-01 09:31:42 +0000 (Mon, 01 Mar 2004) | 5 lines

fix test (seems to be working although trusted_networks inference
seems to be having problems, 212.17.35.14 should be queried twice
and get back two 127.0.0.1 hits, one query for DNSBL_TEST_WHITELIST
and one for DNSBL_TEST_TOP)

------------------------------------------------------------------------
r6945 | jm | 2004-03-01 08:05:06 +0000 (Mon, 01 Mar 2004) | 1 line

try to reduce impact of really slow DNS servers on SA's lookups
------------------------------------------------------------------------
r6944 | jm | 2004-03-01 07:07:09 +0000 (Mon, 01 Mar 2004) | 1 line

fixed SPF failures; Received header parser was not working with new message object get_header() method's semantics
------------------------------------------------------------------------
r6943 | felicity | 2004-03-01 05:11:43 +0000 (Mon, 01 Mar 2004) | 1 line

add more pod docs
------------------------------------------------------------------------
r6942 | parker | 2004-03-01 05:09:39 +0000 (Mon, 01 Mar 2004) | 1 line

PR2457: Updated userpref create def, also re added the PHP admin stuff with a corrected URL
------------------------------------------------------------------------
r6941 | parker | 2004-03-01 04:07:29 +0000 (Mon, 01 Mar 2004) | 1 line

PR3095: Update sql documentation to include PostgreSQL examples and instructions, parts from Feargal Reilly
------------------------------------------------------------------------
r6940 | parker | 2004-03-01 03:20:27 +0000 (Mon, 01 Mar 2004) | 1 line

PR3091: Do not allow spam/ham counts to go negative on bayes tokens
------------------------------------------------------------------------
r6938 | jm | 2004-03-01 00:52:57 +0000 (Mon, 01 Mar 2004) | 1 line

added T_FAKED_AUTHWARN rule
------------------------------------------------------------------------
r6937 | quinlan | 2004-02-29 23:42:29 +0000 (Sun, 29 Feb 2004) | 2 lines

a few minor bug fixes

------------------------------------------------------------------------
r6936 | felicity | 2004-02-29 22:12:03 +0000 (Sun, 29 Feb 2004) | 1 line

doing a bunch of code touchups...  Made MsgNode and MsgMetadata Message::Node and Message::Metadata respectively.  merged MsgParser into Message.  made M::SA::parse() just call Message::new().  added/reworked some docuementation.  found a few places where Message->finish() wasn't being called.  etc.
------------------------------------------------------------------------
r6935 | felicity | 2004-02-29 20:06:03 +0000 (Sun, 29 Feb 2004) | 1 line

bug 3100: if the fs fills up, we'll get a partial write failure to the bayes journal.  we used to loop and keep attempting to write out the data, but this would crush systems...  we'll now only try to write out the journal 5 times before failing out, we'll also truncate the journal upon write failure so we don't do a partial journal commit.
------------------------------------------------------------------------
r6934 | quinlan | 2004-02-29 06:29:13 +0000 (Sun, 29 Feb 2004) | 2 lines

remember to add back the T_ prefix

------------------------------------------------------------------------
r6933 | quinlan | 2004-02-29 06:25:35 +0000 (Sun, 29 Feb 2004) | 2 lines

a different spin on the DOUBLE_IP rules

------------------------------------------------------------------------
r6932 | quinlan | 2004-02-29 05:49:04 +0000 (Sun, 29 Feb 2004) | 2 lines

die() if a meta test depends on itself

------------------------------------------------------------------------
r6931 | felicity | 2004-02-29 05:09:10 +0000 (Sun, 29 Feb 2004) | 1 line

we prefer /(foo)?/ instead of /(foo|)/ ...
------------------------------------------------------------------------
r6930 | jm | 2004-02-29 02:50:06 +0000 (Sun, 29 Feb 2004) | 1 line

oh yeah, LOCALHOST too
------------------------------------------------------------------------
r6929 | jm | 2004-02-29 02:36:50 +0000 (Sun, 29 Feb 2004) | 1 line

bug 1399: cannot tell window-blurring and widget-defocusing apart, so dropping HTML_WIN_BLUR rule
------------------------------------------------------------------------
r6928 | jm | 2004-02-29 02:32:29 +0000 (Sun, 29 Feb 2004) | 1 line

bug 2793: IP_ADDRESS re was matching IPv4-in-IPv6 addrs wrongly
------------------------------------------------------------------------
r6927 | quinlan | 2004-02-29 02:08:47 +0000 (Sun, 29 Feb 2004) | 2 lines

some updates and fixes

------------------------------------------------------------------------
r6926 | felicity | 2004-02-29 02:01:44 +0000 (Sun, 29 Feb 2004) | 1 line

bug 3108: make the mbox seperator not a header (take it out of pristine_headers, etc.)  remove the 'look for the mbox seperator and remove it' code in a few sections of the code.  added different report_safe remove markup tests to strip2.t, etc.
------------------------------------------------------------------------
r6925 | quinlan | 2004-02-29 01:37:35 +0000 (Sun, 29 Feb 2004) | 2 lines

comments

------------------------------------------------------------------------
r6924 | jm | 2004-02-29 00:18:31 +0000 (Sun, 29 Feb 2004) | 1 line

bug 3087: order of loadplugin conf lines was wrong
------------------------------------------------------------------------
r6923 | jm | 2004-02-29 00:04:38 +0000 (Sun, 29 Feb 2004) | 1 line

bug 2973: possible replacement for OPT_HEADER to avoid fps
------------------------------------------------------------------------
r6922 | jm | 2004-02-28 23:32:26 +0000 (Sat, 28 Feb 2004) | 1 line

bug 2525: workaround for IMS sending HTML-only mail
------------------------------------------------------------------------
r6921 | jm | 2004-02-28 22:57:32 +0000 (Sat, 28 Feb 2004) | 1 line

bug 2164: catch pipe- and apostrophe obfuscation, thx to David Skoll
------------------------------------------------------------------------
r6918 | quinlan | 2004-02-28 03:11:33 +0000 (Sat, 28 Feb 2004) | 3 lines

only process HTML elements
stub subroutine for CSS styles

------------------------------------------------------------------------
r6916 | quinlan | 2004-02-27 22:08:06 +0000 (Fri, 27 Feb 2004) | 2 lines

merge stuff into incubator status page

------------------------------------------------------------------------
r6914 | parker | 2004-02-27 20:19:13 +0000 (Fri, 27 Feb 2004) | 1 line

Account for change in name of dns.t to dnsbl.t
------------------------------------------------------------------------
r6913 | jm | 2004-02-27 17:44:40 +0000 (Fri, 27 Feb 2004) | 1 line

fix undef warnings
------------------------------------------------------------------------
r6912 | quinlan | 2004-02-27 09:21:46 +0000 (Fri, 27 Feb 2004) | 2 lines

some revisions

------------------------------------------------------------------------
r6911 | quinlan | 2004-02-27 08:11:58 +0000 (Fri, 27 Feb 2004) | 2 lines

move to new name

------------------------------------------------------------------------
r6910 | quinlan | 2004-02-27 08:11:40 +0000 (Fri, 27 Feb 2004) | 2 lines

add new DNS tests for better coverage (some are currently failing)

------------------------------------------------------------------------
r6909 | parker | 2004-02-27 07:48:41 +0000 (Fri, 27 Feb 2004) | 1 line

Fix double not
------------------------------------------------------------------------
r6908 | felicity | 2004-02-27 07:39:32 +0000 (Fri, 27 Feb 2004) | 1 line

bug 2657: default body-based rule descriptions wouldn't specify between body, rawbody, full, and uri as expected.  I merged got_body_pattern_hit and got_uri_pattern_hit into a single got_pattern_hit, which accepts a description prefix.  now using BODY, RAW, FULL, and URI as appropriate.
------------------------------------------------------------------------
r6907 | felicity | 2004-02-27 06:49:09 +0000 (Fri, 27 Feb 2004) | 1 line

bug 2836: scan_directories() would require that there be no whitespace in filenames, but spaces are valid in file names, so fix the RE to ignore what we don't want (starts with . or ,) and allow anything else.
------------------------------------------------------------------------
r6906 | felicity | 2004-02-27 06:37:34 +0000 (Fri, 27 Feb 2004) | 1 line

fix description to fit within standard convention
------------------------------------------------------------------------
r6899 | jm | 2004-02-27 05:22:40 +0000 (Fri, 27 Feb 2004) | 2 lines

updated MANIFEST

------------------------------------------------------------------------
r6898 | jm | 2004-02-27 05:07:57 +0000 (Fri, 27 Feb 2004) | 1 line

bug 1375: do DNSBL lookups on URLs, implemented as plugin Mail::SpamAssassin::Plugin::URIDNSBL
------------------------------------------------------------------------
r6897 | jm | 2004-02-27 04:49:48 +0000 (Fri, 27 Feb 2004) | 1 line

added documentation for the newly-added asynch-event-loop support plugin hooks
------------------------------------------------------------------------
r6896 | quinlan | 2004-02-27 04:43:49 +0000 (Fri, 27 Feb 2004) | 2 lines

add line break for <div> tag

------------------------------------------------------------------------
r6895 | jm | 2004-02-27 04:42:47 +0000 (Fri, 27 Feb 2004) | 1 line

bug 1375: do DNSBL lookups on URLs, implemented as plugin Mail::SpamAssassin::Plugin::URIDNSBL
------------------------------------------------------------------------
r6894 | felicity | 2004-02-27 02:42:12 +0000 (Fri, 27 Feb 2004) | 1 line

remove scores for rules that don't exist, shorten some rule names to fit convention...
------------------------------------------------------------------------
r6893 | felicity | 2004-02-27 00:11:12 +0000 (Fri, 27 Feb 2004) | 1 line

bug 3093: add lint tests for rule names, descriptions, scores, etc.  fix some documentation...
------------------------------------------------------------------------
r6890 | parker | 2004-02-26 22:49:15 +0000 (Thu, 26 Feb 2004) | 1 line

Add Makefile.old to the ignore list
------------------------------------------------------------------------
r6889 | parker | 2004-02-26 22:43:28 +0000 (Thu, 26 Feb 2004) | 1 line

when reading a file specified with -f it was adding more than one target, one of which was bogus
------------------------------------------------------------------------
r6887 | parker | 2004-02-26 22:21:02 +0000 (Thu, 26 Feb 2004) | 1 line

PR3079: Moved actual connect to tie_db_writable because when using spamd there are a couple of cases where a new BayesStoreSQL object are not created and we tried to use the database handle from before the fork
------------------------------------------------------------------------
r6880 | parker | 2004-02-26 16:14:24 +0000 (Thu, 26 Feb 2004) | 1 line

If the DBI module is not found, do not offer the bayes/awl sql tests
------------------------------------------------------------------------
r6879 | quinlan | 2004-02-26 11:01:30 +0000 (Thu, 26 Feb 2004) | 2 lines

trim down T_RM_BPT_LONGWORDS a bit

------------------------------------------------------------------------
r6861 | quinlan | 2004-02-26 04:25:25 +0000 (Thu, 26 Feb 2004) | 3 lines

remove low performing rawbody and body rules based on nightly corpus
results, not including userconf rules

------------------------------------------------------------------------
r6860 | quinlan | 2004-02-26 03:41:27 +0000 (Thu, 26 Feb 2004) | 3 lines

remove T_SPRINTF_5X
pretty up SPF rules

------------------------------------------------------------------------
r6859 | quinlan | 2004-02-26 03:22:56 +0000 (Thu, 26 Feb 2004) | 2 lines

nuking some more

------------------------------------------------------------------------
r6858 | quinlan | 2004-02-26 03:10:52 +0000 (Thu, 26 Feb 2004) | 2 lines

delete some poor rules

------------------------------------------------------------------------
r6857 | quinlan | 2004-02-26 00:35:55 +0000 (Thu, 26 Feb 2004) | 2 lines

rule promotions

------------------------------------------------------------------------
r6856 | quinlan | 2004-02-26 00:24:00 +0000 (Thu, 26 Feb 2004) | 3 lines

promote UNIQUE_WORDS test
tweak variations on a theme of double IP

------------------------------------------------------------------------
r6855 | duncf | 2004-02-25 14:57:41 +0000 (Wed, 25 Feb 2004) | 1 line

mass-check should be more verbose when dying if Time::ParseDate not installed
------------------------------------------------------------------------
r6854 | duncf | 2004-02-25 14:55:57 +0000 (Wed, 25 Feb 2004) | 1 line

ArchiveIterator should pass the class of the message to wanted -- this is needed for proper support of -f with sa-learn
------------------------------------------------------------------------
r6846 | parker | 2004-02-24 07:12:27 +0000 (Tue, 24 Feb 2004) | 1 line

Bring msgid test up to speed with code changes
------------------------------------------------------------------------
r6845 | quinlan | 2004-02-24 06:48:19 +0000 (Tue, 24 Feb 2004) | 2 lines

add some T_RCVD_DOUBLE_IP variants

------------------------------------------------------------------------
r6844 | parker | 2004-02-24 06:40:22 +0000 (Tue, 24 Feb 2004) | 1 line

Add missing # on comment
------------------------------------------------------------------------
r6843 | quinlan | 2004-02-24 06:14:49 +0000 (Tue, 24 Feb 2004) | 2 lines

some test rules for bug 2901

------------------------------------------------------------------------
r6841 | quinlan | 2004-02-24 04:57:38 +0000 (Tue, 24 Feb 2004) | 2 lines

another rule that doesn't hit any more -- too long since last release

------------------------------------------------------------------------
r6840 | quinlan | 2004-02-24 04:49:52 +0000 (Tue, 24 Feb 2004) | 2 lines

promote, delete, promote, delete

------------------------------------------------------------------------
r6839 | quinlan | 2004-02-24 04:19:17 +0000 (Tue, 24 Feb 2004) | 2 lines

some work on test rules

------------------------------------------------------------------------
r6838 | felicity | 2004-02-23 23:07:51 +0000 (Mon, 23 Feb 2004) | 1 line

bug 3074: when rewriting headers, the code assumed 'name:<spaces>something' which isn't always going to happen as 'name:<tab>something' is valid in a message.  fixed the RE to account for this.
------------------------------------------------------------------------
r6837 | quinlan | 2004-02-23 18:46:59 +0000 (Mon, 23 Feb 2004) | 3 lines

okay, I think the function-based method is better, so let's go with it
and explore that space a bit more precisely

------------------------------------------------------------------------
r6836 | quinlan | 2004-02-23 15:55:17 +0000 (Mon, 23 Feb 2004) | 2 lines

increase timeout (60 seconds was timing out)

------------------------------------------------------------------------
r6835 | quinlan | 2004-02-23 15:54:59 +0000 (Mon, 23 Feb 2004) | 2 lines

add way to ignore T_ tests

------------------------------------------------------------------------
r6834 | quinlan | 2004-02-23 08:18:56 +0000 (Mon, 23 Feb 2004) | 3 lines

HTML title code update
remove some unnecessary double quotes

------------------------------------------------------------------------
r6833 | quinlan | 2004-02-23 08:07:35 +0000 (Mon, 23 Feb 2004) | 2 lines

some test rule work

------------------------------------------------------------------------
r6832 | quinlan | 2004-02-23 07:25:51 +0000 (Mon, 23 Feb 2004) | 2 lines

best rule was _59A so I think we should explore the space a bit more

------------------------------------------------------------------------
r6831 | quinlan | 2004-02-23 07:10:41 +0000 (Mon, 23 Feb 2004) | 3 lines

consolidate Yahoo! Message-ID forgery rules into one final candidate
split out new Yahoo! redirector rules to figure out the FPs

------------------------------------------------------------------------
r6830 | quinlan | 2004-02-23 05:33:18 +0000 (Mon, 23 Feb 2004) | 2 lines

a probably better slice of the unique words test

------------------------------------------------------------------------
r6829 | duncf | 2004-02-23 04:42:47 +0000 (Mon, 23 Feb 2004) | 1 line

Fixes removal of rewritten heTo/From headers (bug 3075)
------------------------------------------------------------------------
r6820 | quinlan | 2004-02-22 07:02:16 +0000 (Sun, 22 Feb 2004) | 3 lines

bug 3023: detecting random garbage in emails
also tweak tests for illegal attributes

------------------------------------------------------------------------
r6819 | quinlan | 2004-02-22 01:56:21 +0000 (Sun, 22 Feb 2004) | 2 lines

test out higher range on low contrast text

------------------------------------------------------------------------
r6818 | quinlan | 2004-02-21 23:58:29 +0000 (Sat, 21 Feb 2004) | 2 lines

fix some typos

------------------------------------------------------------------------
r6817 | quinlan | 2004-02-21 23:56:43 +0000 (Sat, 21 Feb 2004) | 3 lines

remove HTML_TAG_EXISTS_BASE
promote T_HTML_TAG_EXISTS_MARQUEE to HTML_TAG_EXISTS_MARQUEE

------------------------------------------------------------------------
r6816 | quinlan | 2004-02-21 23:52:32 +0000 (Sat, 21 Feb 2004) | 2 lines

fix selection of logs for weekly on Saturdays

------------------------------------------------------------------------
r6806 | quinlan | 2004-02-21 03:21:07 +0000 (Sat, 21 Feb 2004) | 3 lines

promote T_MSGID_EVIL_32 to MSGID_RANDY
new Yahoo! redirector apparently

------------------------------------------------------------------------
r6792 | quinlan | 2004-02-20 08:32:07 +0000 (Fri, 20 Feb 2004) | 2 lines

some rules to try for Yahoo! forgeries

------------------------------------------------------------------------
r6789 | felicity | 2004-02-20 05:33:39 +0000 (Fri, 20 Feb 2004) | 1 line

make report_as_spam and revoke_as_spam deal with specificially the message passed in...  make sure when we call those functions that the message has SA markup removed.  do more calls to finish() to remove noticable memory leaks(), specifically when we do remove_spamassassin_markup...
------------------------------------------------------------------------
r6788 | felicity | 2004-02-20 05:13:18 +0000 (Fri, 20 Feb 2004) | 1 line

we don't need already_parsed since we have toparse.  implemented MsgNode::finish() and have things call it to be a good housekeeper.
------------------------------------------------------------------------
r6787 | felicity | 2004-02-20 04:34:47 +0000 (Fri, 20 Feb 2004) | 1 line

deal with already_parsed a little better
------------------------------------------------------------------------
r6786 | jm | 2004-02-20 03:35:49 +0000 (Fri, 20 Feb 2004) | 1 line

try out the AHBL blocklists
------------------------------------------------------------------------
r6785 | quinlan | 2004-02-20 01:45:47 +0000 (Fri, 20 Feb 2004) | 2 lines

return empty matches if message isn't long enough for language guessing

------------------------------------------------------------------------
r6784 | jm | 2004-02-19 23:47:10 +0000 (Thu, 19 Feb 2004) | 1 line

split up MsgContainer into two new classes - Message, for top-level node, and MsgNode for sub-nodes.  Message is a subclass of MsgNode with additional features to hold metadata, pristine message representation and top-level message-wide flags
------------------------------------------------------------------------
r6783 | jm | 2004-02-19 22:59:35 +0000 (Thu, 19 Feb 2004) | 1 line

moved constants to new module
------------------------------------------------------------------------
r6782 | jm | 2004-02-19 22:56:34 +0000 (Thu, 19 Feb 2004) | 1 line

did I check in?
------------------------------------------------------------------------
r6781 | jm | 2004-02-19 18:46:48 +0000 (Thu, 19 Feb 2004) | 1 line

moved finish_metadata() call in PMS to finish()
------------------------------------------------------------------------
r6780 | jm | 2004-02-19 18:45:24 +0000 (Thu, 19 Feb 2004) | 1 line

oops.  make sure finish_metadata can be called multiple times
------------------------------------------------------------------------
r6779 | jm | 2004-02-19 18:41:47 +0000 (Thu, 19 Feb 2004) | 1 line

some cleanup of last night's metadata code
------------------------------------------------------------------------
r6776 | quinlan | 2004-02-19 10:05:49 +0000 (Thu, 19 Feb 2004) | 2 lines

change two of the lesser subrules for evil message-id

------------------------------------------------------------------------
r6774 | jm | 2004-02-19 08:22:37 +0000 (Thu, 19 Feb 2004) | 1 line

rule_tests passes again
------------------------------------------------------------------------
r6773 | jm | 2004-02-19 08:11:54 +0000 (Thu, 19 Feb 2004) | 1 line

fixed 'make test' failures
------------------------------------------------------------------------
r6772 | jm | 2004-02-19 08:03:08 +0000 (Thu, 19 Feb 2004) | 1 line

sorted MANIFEST
------------------------------------------------------------------------
r6771 | jm | 2004-02-19 08:02:32 +0000 (Thu, 19 Feb 2004) | 1 line

added plugin to look up IP address of relays with IP::Country (bug 2575)
------------------------------------------------------------------------
r6768 | jm | 2004-02-19 07:34:09 +0000 (Thu, 19 Feb 2004) | 1 line

metadata support; sa-learn can now learn languages and trusted/untrusted relays, so these can now be Bayes tokens
------------------------------------------------------------------------
r6767 | quinlan | 2004-02-19 05:44:32 +0000 (Thu, 19 Feb 2004) | 2 lines

one variant

------------------------------------------------------------------------
r6766 | felicity | 2004-02-19 05:29:36 +0000 (Thu, 19 Feb 2004) | 1 line

deal with unneccessary hex uri encoding in addition to the decimal ones...
------------------------------------------------------------------------
r6765 | jm | 2004-02-19 04:58:18 +0000 (Thu, 19 Feb 2004) | 1 line

added T_SILDENAFIL in response to bug 2572
------------------------------------------------------------------------
r6764 | quinlan | 2004-02-19 04:42:17 +0000 (Thu, 19 Feb 2004) | 2 lines

regular expression mistake

------------------------------------------------------------------------
r6763 | quinlan | 2004-02-19 04:19:35 +0000 (Thu, 19 Feb 2004) | 3 lines

some teen variants
also use tabs

------------------------------------------------------------------------
r6762 | felicity | 2004-02-19 04:10:31 +0000 (Thu, 19 Feb 2004) | 1 line

bug 2897: 'sa-learn --rebuild' would always set --showdots due to passing a reference then an actual value...
------------------------------------------------------------------------
r6761 | quinlan | 2004-02-19 04:04:43 +0000 (Thu, 19 Feb 2004) | 2 lines

bug 2996: HTML attribute testing

------------------------------------------------------------------------
r6760 | felicity | 2004-02-19 03:59:16 +0000 (Thu, 19 Feb 2004) | 1 line

bug 2816: redhat rc script 'status' didn't set the return value.
------------------------------------------------------------------------
r6759 | felicity | 2004-02-19 03:48:19 +0000 (Thu, 19 Feb 2004) | 1 line

bug 2784: allow NICELEVEL to be specified for the redhat rc script to start spamd at a certain nice level
------------------------------------------------------------------------
r6758 | quinlan | 2004-02-19 03:07:17 +0000 (Thu, 19 Feb 2004) | 2 lines

allow negative numbers

------------------------------------------------------------------------
r6757 | felicity | 2004-02-19 02:58:57 +0000 (Thu, 19 Feb 2004) | 1 line

bug 2414: allow the hostname (_HOSTNAME_) used in reports/header rewriting to be set via a config option since the actual system hostname may not be the hostname most people look for (ie: mail CNAME hostfoo, we should report mail not hostfoo ...)
------------------------------------------------------------------------
r6756 | jm | 2004-02-19 02:55:42 +0000 (Thu, 19 Feb 2004) | 1 line

bug 2273: bayes_ignore_from, bayes_ignore_to added, thanks to David Koppelman
------------------------------------------------------------------------
r6755 | jm | 2004-02-19 02:52:03 +0000 (Thu, 19 Feb 2004) | 1 line

possible Red Hat bug with smrsh noted, thanks to Jim Severino for the heads-up (bug 2393)
------------------------------------------------------------------------
r6754 | jm | 2004-02-19 02:45:11 +0000 (Thu, 19 Feb 2004) | 1 line

bug 2935: PENIS_ENLARGE rule name rephrased more diplomatically, fix by Rich Puhek
------------------------------------------------------------------------
r6753 | felicity | 2004-02-19 02:33:17 +0000 (Thu, 19 Feb 2004) | 1 line

bug 2401: apparently perl on Windows doesn't seem to know what SIGHUP is, so we need to protect our HUP handler calls.
------------------------------------------------------------------------
r6752 | jm | 2004-02-19 02:16:12 +0000 (Thu, 19 Feb 2004) | 1 line

bug 2496: spamc usage should go to stderr
------------------------------------------------------------------------
r6751 | felicity | 2004-02-19 02:12:40 +0000 (Thu, 19 Feb 2004) | 1 line

bug 2261: change the 'db not initialised' message to be more meaningful -- none of the message's tokens were found in the db.
------------------------------------------------------------------------
r6750 | mss | 2004-02-19 02:05:20 +0000 (Thu, 19 Feb 2004) | 2 lines

*grmbl*

------------------------------------------------------------------------
r6749 | mss | 2004-02-19 02:02:37 +0000 (Thu, 19 Feb 2004) | 2 lines

Better rounding "fix" plus a bit refactoring.

------------------------------------------------------------------------
r6748 | mss | 2004-02-19 01:56:39 +0000 (Thu, 19 Feb 2004) | 2 lines

Make the syslog-SIGPIPE-handler more local and make sure its always removed again (to avoid it being called if pipes to helper apps break).

------------------------------------------------------------------------
r6747 | duncf | 2004-02-19 01:32:10 +0000 (Thu, 19 Feb 2004) | 1 line

Fix a few instances of _HITS_. Also, fix despamassassinification of _SCORE_ in spam with report_safe 0
------------------------------------------------------------------------
r6746 | duncf | 2004-02-19 01:24:48 +0000 (Thu, 19 Feb 2004) | 1 line

Bug 1332: replace hits with points (or score) internally and externally... Some variable names have changed, notably $self->{hits} is now $self->{score}. Backwards compatibility is maintained where possible
------------------------------------------------------------------------
r6745 | felicity | 2004-02-19 01:03:15 +0000 (Thu, 19 Feb 2004) | 1 line

bug 3014: allow dbpath for everything, not just dump and import
------------------------------------------------------------------------
r6744 | jm | 2004-02-19 00:51:37 +0000 (Thu, 19 Feb 2004) | 1 line

bug 2377: T_URI_HTTP_TO_HEX_IP added
------------------------------------------------------------------------
r6743 | jm | 2004-02-19 00:47:36 +0000 (Thu, 19 Feb 2004) | 1 line

added note about FDs re bug 2352
------------------------------------------------------------------------
r6742 | jm | 2004-02-19 00:45:08 +0000 (Thu, 19 Feb 2004) | 1 line

added note about FDs re bug 2352
------------------------------------------------------------------------
r6741 | felicity | 2004-02-19 00:35:47 +0000 (Thu, 19 Feb 2004) | 1 line

full tests get the raw header (no decoding).  also fix the comment about that
------------------------------------------------------------------------
r6740 | mss | 2004-02-19 00:30:14 +0000 (Thu, 19 Feb 2004) | 2 lines

bug 2607: Always round down to make the 5.0!=5.0-phenomenon go away (patch by Dan Kohn).

------------------------------------------------------------------------
r6739 | duncf | 2004-02-19 00:06:02 +0000 (Thu, 19 Feb 2004) | 1 line

Added support for ? : operator in meta tests (Bug 3038)
------------------------------------------------------------------------
r6738 | felicity | 2004-02-19 00:04:32 +0000 (Thu, 19 Feb 2004) | 1 line

bug 3061: if bayes_learn_to_journal was set (sa-learn --norebuild does this too), and no bayes DB already existed, the learn would fail because tie_db_readonly() wouldn't create a db if it didn't already exist.  so we now failback to tieing r/w if r/o fails only if learn_to_journal is set.  cleaned up a bit of bayesdbm.t as well.
------------------------------------------------------------------------
r6737 | quinlan | 2004-02-18 23:56:28 +0000 (Wed, 18 Feb 2004) | 2 lines

bug 2950: various redirector rules

------------------------------------------------------------------------
r6736 | jm | 2004-02-18 23:36:45 +0000 (Wed, 18 Feb 2004) | 1 line

added T_RATWARE_FAKED_AOL_UA from bug 2299
------------------------------------------------------------------------
r6735 | jm | 2004-02-18 23:34:13 +0000 (Wed, 18 Feb 2004) | 1 line

bug 2300: avoid FPs on Exchange messages sent with Priority set to High
------------------------------------------------------------------------
r6734 | jm | 2004-02-18 23:29:28 +0000 (Wed, 18 Feb 2004) | 1 line

bug 2542: translated X-Spam-Report header contains unencoded 8-bit chars
------------------------------------------------------------------------
r6733 | felicity | 2004-02-18 23:26:01 +0000 (Wed, 18 Feb 2004) | 1 line

bug 3055: spammers are using the same message id to get around bayes being able to learn different messages.  make the hash message-id the default now, but be backwards compatible with the seen db.
------------------------------------------------------------------------
r6729 | jm | 2004-02-18 23:07:49 +0000 (Wed, 18 Feb 2004) | 1 line

bug 3044: IT_PATTERN for find_all_addrs_in_line() is too restrictive
------------------------------------------------------------------------
r6728 | quinlan | 2004-02-18 22:49:36 +0000 (Wed, 18 Feb 2004) | 2 lines

bug 1780: fix for PORN_4

------------------------------------------------------------------------
r6727 | jm | 2004-02-18 22:09:20 +0000 (Wed, 18 Feb 2004) | 1 line

use 127.0.0.1 IP addr instead of 'localhost' to avoid test failure reported in bug 2749
------------------------------------------------------------------------
r6726 | jm | 2004-02-18 22:03:22 +0000 (Wed, 18 Feb 2004) | 1 line

bug 1677: generalise request header parsing in spamd for future new methods
------------------------------------------------------------------------
r6725 | jm | 2004-02-18 22:02:45 +0000 (Wed, 18 Feb 2004) | 1 line

bonus-space-in-Received line rule spotted last week
------------------------------------------------------------------------
r6724 | quinlan | 2004-02-18 21:52:14 +0000 (Wed, 18 Feb 2004) | 2 lines

bug 2891: Insert qpsmtpd parsing into Received.pm

------------------------------------------------------------------------
r6723 | felicity | 2004-02-18 21:05:38 +0000 (Wed, 18 Feb 2004) | 1 line

MsgContainer->rendered() was calling the HTML renderer twice per part for no apparent reason.
------------------------------------------------------------------------
r6722 | mss | 2004-02-18 21:01:35 +0000 (Wed, 18 Feb 2004) | 2 lines

bug 2927: Added possibility to skip messages if RELAYCLIENT is set (configure check to follow). Also get rid of some vars.

------------------------------------------------------------------------
r6721 | quinlan | 2004-02-18 20:51:19 +0000 (Wed, 18 Feb 2004) | 2 lines

clean up hue sub, add white and black "hues"

------------------------------------------------------------------------
r6720 | quinlan | 2004-02-18 20:44:56 +0000 (Wed, 18 Feb 2004) | 3 lines

add minimal support for <marquee> and a marquee rule
turn hue code into a sub

------------------------------------------------------------------------
r6719 | quinlan | 2004-02-18 07:51:15 +0000 (Wed, 18 Feb 2004) | 2 lines

remove some old URI code not needed now

------------------------------------------------------------------------
r6718 | quinlan | 2004-02-18 07:12:02 +0000 (Wed, 18 Feb 2004) | 3 lines

tweak to guess whether getting a file or a file.offset
(maybe this behavior should have a flag?)

------------------------------------------------------------------------
r6717 | quinlan | 2004-02-18 07:02:45 +0000 (Wed, 18 Feb 2004) | 2 lines

more evil message-id rules to test

------------------------------------------------------------------------
r6716 | felicity | 2004-02-18 06:47:19 +0000 (Wed, 18 Feb 2004) | 1 line

make M::SA::parse() not do the full recursive mime tree generation.  let M::SA::MsgContainer::find_parts() do it as necessary.  this makes check() run at about the same speed, but things like 'spamassassin -d' should run a little faster due to the reduced amount of work that needs to occur.
------------------------------------------------------------------------
r6715 | quinlan | 2004-02-18 05:52:52 +0000 (Wed, 18 Feb 2004) | 7 lines

add min/max font size support using new font code
add <basefont> support
add remaining CSS3 colors to avoid missing invisible or low contrast text
encode HTML and CSS3 colors using hex (saves about 2k of memory)
merge tr/td handling into one routine
fix some minor bugs with new font code

------------------------------------------------------------------------
r6714 | felicity | 2004-02-18 03:47:44 +0000 (Wed, 18 Feb 2004) | 1 line

MsgContainer::is_root() is a misnomer in a way, it checks whether or not the tree node is a leaf.  'root' sounds like the top of the tree, where it actually means a root of the tree or any subtree there-under.  I just renamed it is_leaf to make it more correct.
------------------------------------------------------------------------
r6713 | felicity | 2004-02-18 02:41:34 +0000 (Wed, 18 Feb 2004) | 1 line

API CHANGE!  Moving from MsgParser->parse() to M::SA->parse(), so future changes to how we parse do not mean a change in the backend. Everything else is the same for now.
------------------------------------------------------------------------
r6711 | felicity | 2004-02-17 21:25:31 +0000 (Tue, 17 Feb 2004) | 1 line

rewrite_mail() now just returns a scalar with the rewritten message instead of a fully parsed object
------------------------------------------------------------------------
r6710 | quinlan | 2004-02-17 20:55:39 +0000 (Tue, 17 Feb 2004) | 4 lines

rewrite font attribute handling:
 - fix invisibility FPs in Theo's corpus
 - add handling of text attributes in addition to bgcolor and fgcolor

------------------------------------------------------------------------
r6703 | felicity | 2004-02-17 05:11:48 +0000 (Tue, 17 Feb 2004) | 1 line

bug 3053: the strip2.t test was severely broken.  the output redirection would fail, so it would end up comparing a blank file to a blank file, which of course always works ...
------------------------------------------------------------------------
r6702 | felicity | 2004-02-17 04:26:57 +0000 (Tue, 17 Feb 2004) | 1 line

if a complete blank message is passed to parse(), pristine_headers would be undef which causes lots of error checking to have to go in...  just default it to ''.  also, _parse_body() was doing a CRLF->LF conversion on the whole message body, and then again for each multipart part, which is a waste since we did it all the first time.  got rid of that.
------------------------------------------------------------------------
r6701 | felicity | 2004-02-17 03:42:35 +0000 (Tue, 17 Feb 2004) | 1 line

get rid of MsgContainer::ignore() which nothing calls ...   this also lets us get rid of the noexit setting code which is only used in ignore...
------------------------------------------------------------------------
r6700 | felicity | 2004-02-17 03:16:51 +0000 (Tue, 17 Feb 2004) | 1 line

bug 1971: 'spamassassin -d -t' used to only remove the markup of the input mail, but will now remove the markup and run through -t as usual.  also got rid of the calls to MsgContainer->ignore() from spamassassin and replaced with a simple exit() command.  also found that -d wasn't working correctly due to the new API so that's fixed. :)
------------------------------------------------------------------------
r6699 | felicity | 2004-02-17 02:58:16 +0000 (Tue, 17 Feb 2004) | 1 line

bug 1985: new version of urgent_biz for testing
------------------------------------------------------------------------
r6698 | felicity | 2004-02-17 02:10:58 +0000 (Tue, 17 Feb 2004) | 1 line

bug 3050: 'spamassassin -D' would only show the rewritten message being parsed, and not the original due to the debug code being setup after the parse had occured.
------------------------------------------------------------------------
r6697 | quinlan | 2004-02-16 23:19:29 +0000 (Mon, 16 Feb 2004) | 2 lines

typo

------------------------------------------------------------------------
r6696 | quinlan | 2004-02-16 23:18:40 +0000 (Mon, 16 Feb 2004) | 2 lines

promote T_HTML_FONT_TINY

------------------------------------------------------------------------
r6695 | quinlan | 2004-02-16 20:12:11 +0000 (Mon, 16 Feb 2004) | 2 lines

new URI tests

------------------------------------------------------------------------
r6691 | mss | 2004-02-16 12:02:02 +0000 (Mon, 16 Feb 2004) | 2 lines

Got rid of warnings, made it fail a bit more gracefully.

------------------------------------------------------------------------
r6690 | quinlan | 2004-02-16 09:18:40 +0000 (Mon, 16 Feb 2004) | 2 lines

rewrite most of the URI handling code

------------------------------------------------------------------------
r6689 | quinlan | 2004-02-16 09:11:09 +0000 (Mon, 16 Feb 2004) | 2 lines

some more HTML test rules

------------------------------------------------------------------------
r6687 | quinlan | 2004-02-16 04:33:15 +0000 (Mon, 16 Feb 2004) | 2 lines

typo

------------------------------------------------------------------------
r6686 | quinlan | 2004-02-16 04:21:18 +0000 (Mon, 16 Feb 2004) | 3 lines

bump up score for MPART_ALT_DIFF
add another evil message-id rule to try

------------------------------------------------------------------------
r6685 | felicity | 2004-02-16 04:10:12 +0000 (Mon, 16 Feb 2004) | 1 line

bug 3028: FAKED_HOTMAIL_DAV wasn't allowing uppercase hotmail.com.
------------------------------------------------------------------------
r6672 | felicity | 2004-02-16 01:12:42 +0000 (Mon, 16 Feb 2004) | 1 line

bug 2635: if the bayes_journal file can't be opened for some reason, spit out the error string from the system call.
------------------------------------------------------------------------
r6671 | felicity | 2004-02-16 01:07:10 +0000 (Mon, 16 Feb 2004) | 1 line

bug 2840: if spamc was passed '-d non.existant.host', the message wouldn't be sent back out to STDOUT as it does with a host that exists but is not able to be contacted.
------------------------------------------------------------------------
r6670 | felicity | 2004-02-15 23:29:45 +0000 (Sun, 15 Feb 2004) | 1 line

bug 3026: update the redhat rc script to be correct via their specifications
------------------------------------------------------------------------
r6669 | felicity | 2004-02-15 23:25:09 +0000 (Sun, 15 Feb 2004) | 1 line

bug 3024: trying to forget() a message that hasn't been learned caused a fatal error to be reported incorrectly.  also added in code to learn() to check the result of the forget() call (if it was called) and propagate up fatal errors appropriately.
------------------------------------------------------------------------
r6664 | felicity | 2004-02-15 22:22:25 +0000 (Sun, 15 Feb 2004) | 1 line

3.0.0 isn't numeric... stupid perl. <G>
------------------------------------------------------------------------
r6660 | felicity | 2004-02-15 21:56:11 +0000 (Sun, 15 Feb 2004) | 1 line

renumber the release from 2.70 to 3.0.0
------------------------------------------------------------------------
r6659 | felicity | 2004-02-15 21:46:14 +0000 (Sun, 15 Feb 2004) | 1 line

split up the meta token RE to be a bit more readable
------------------------------------------------------------------------
r6658 | quinlan | 2004-02-15 19:53:39 +0000 (Sun, 15 Feb 2004) | 3 lines

add major overhaul of URI parsing to HTML parser
also remove HTML order code and unclickable anchor test code

------------------------------------------------------------------------
r6657 | quinlan | 2004-02-15 12:41:53 +0000 (Sun, 15 Feb 2004) | 2 lines

remove HTML order tests

------------------------------------------------------------------------
r6656 | quinlan | 2004-02-15 12:40:48 +0000 (Sun, 15 Feb 2004) | 4 lines

replace HTML_TITLE_EMPTY with T_HTML_TITLE_EMPTY
remove T_HTML_LINK_UNCLICKABLE
remove HTML order rules

------------------------------------------------------------------------
r6653 | quinlan | 2004-02-15 01:53:37 +0000 (Sun, 15 Feb 2004) | 2 lines

spell mutable correctly

------------------------------------------------------------------------
r6652 | quinlan | 2004-02-14 21:19:50 +0000 (Sat, 14 Feb 2004) | 4 lines

fix T_RCVD_IN_XBL_NFH rule (-notfirsthop should really be an argument to
make it clearer that only check_rbl and check_rbl_txt support notfirsthop
mode)

------------------------------------------------------------------------
r6651 | quinlan | 2004-02-14 08:42:53 +0000 (Sat, 14 Feb 2004) | 2 lines

revisions of the evil spam Message-ID rules

------------------------------------------------------------------------
r6646 | mss | 2004-02-14 01:06:10 +0000 (Sat, 14 Feb 2004) | 2 lines

Two more typos which I didn't see.

------------------------------------------------------------------------
r6645 | mss | 2004-02-14 00:04:02 +0000 (Sat, 14 Feb 2004) | 2 lines

Some more sorting.

------------------------------------------------------------------------
r6644 | mss | 2004-02-13 23:38:59 +0000 (Fri, 13 Feb 2004) | 2 lines

Forgot a newline.

------------------------------------------------------------------------
r6643 | mss | 2004-02-13 23:35:05 +0000 (Fri, 13 Feb 2004) | 2 lines

Cleaned up the usage a bit.

------------------------------------------------------------------------
r6642 | quinlan | 2004-02-13 21:05:09 +0000 (Fri, 13 Feb 2004) | 3 lines

promote T_MSGID_DOLLARS_1 to T_MSGID_DOLLARS
remove other T_MSGID_DOLLARS_* variants (equal or worse accuracy)

------------------------------------------------------------------------
r6641 | quinlan | 2004-02-13 20:57:38 +0000 (Fri, 13 Feb 2004) | 2 lines

remove T_HTML_ALT_LONGEST_* rules, poor results for theo and rodbegbie

------------------------------------------------------------------------
r6640 | mss | 2004-02-13 20:06:22 +0000 (Fri, 13 Feb 2004) | 2 lines

Just a small change, feels better.

------------------------------------------------------------------------
r6639 | mss | 2004-02-13 20:03:38 +0000 (Fri, 13 Feb 2004) | 2 lines

Updated license.

------------------------------------------------------------------------
r6638 | mss | 2004-02-13 13:37:51 +0000 (Fri, 13 Feb 2004) | 2 lines

bug 3041: Some Windows-related fixes sumbitted by Sidney.

------------------------------------------------------------------------
r6637 | quinlan | 2004-02-13 09:51:08 +0000 (Fri, 13 Feb 2004) | 2 lines

more evil message-id stuff

------------------------------------------------------------------------
r6636 | quinlan | 2004-02-13 07:59:45 +0000 (Fri, 13 Feb 2004) | 3 lines

stop rendering ALT text since most mailers don't
add a test for excessively long ALT text (total length did not work well)

------------------------------------------------------------------------
r6635 | quinlan | 2004-02-12 22:24:48 +0000 (Thu, 12 Feb 2004) | 2 lines

fix rewriting

------------------------------------------------------------------------
r6634 | mss | 2004-02-12 13:40:07 +0000 (Thu, 12 Feb 2004) | 2 lines

bug 3022: Applied Michael Parker's patch to skip the DBI/DB_File tests on platforms where they're not supported.

------------------------------------------------------------------------
r6633 | quinlan | 2004-02-12 10:31:35 +0000 (Thu, 12 Feb 2004) | 2 lines

a few more T_XORIGIP_INVALID variants

------------------------------------------------------------------------
r6629 | quinlan | 2004-02-12 07:16:17 +0000 (Thu, 12 Feb 2004) | 9 lines

promote T_MPART_ALT_DIFF_99 to MPART_ALT_DIFF (lowest FNs by far)
promote T_HTML_BADTAGS_* to HTML_BADTAGS_*
promote T_HTML_BADTAGS_U_* to HTML_NONELEMENT_*
promote T_HTML_MESSAGE_1 to HTML_MESSAGE
add T_HTML_LINK_UNCLICKABLE (anchor with no image or text)
add HTML_OBFUSCATION_* descriptions
make MsgContainer post-rendering texts somewhat more readable
move RATWARE_HASH_DASH to 20_ratware.cf

------------------------------------------------------------------------
r6628 | quinlan | 2004-02-12 06:26:46 +0000 (Thu, 12 Feb 2004) | 4 lines

bug 3030: nightly corpus DETAILS to include temporal data
don't bother if nothing has been uploaded (reduce load on my poor machine)
minor speedup for sorting routine

------------------------------------------------------------------------
r6625 | jm | 2004-02-11 20:41:19 +0000 (Wed, 11 Feb 2004) | 1 line

added reply to FIXME
------------------------------------------------------------------------
r6624 | mss | 2004-02-11 19:42:46 +0000 (Wed, 11 Feb 2004) | 4 lines

bug 1360: Add support for logging to a file instead of syslog.

There might be a bug in this code, I'm not sure how the logfile should be shared; see line 618.

------------------------------------------------------------------------
r6617 | jm | 2004-02-11 07:25:23 +0000 (Wed, 11 Feb 2004) | 1 line

missing entire hostnames
------------------------------------------------------------------------
r6616 | jm | 2004-02-11 07:18:42 +0000 (Wed, 11 Feb 2004) | 1 line

bug 2895: fixed description for 'rawbody' rules
------------------------------------------------------------------------
r6615 | jm | 2004-02-11 07:17:40 +0000 (Wed, 11 Feb 2004) | 1 line

QP decoding should deal with lowercase QP as well
------------------------------------------------------------------------
r6612 | quinlan | 2004-02-11 06:21:51 +0000 (Wed, 11 Feb 2004) | 2 lines

trivial spacing change

------------------------------------------------------------------------
r6611 | quinlan | 2004-02-11 06:21:29 +0000 (Wed, 11 Feb 2004) | 2 lines

revise T_HTML_MESSAGE_*

------------------------------------------------------------------------
r6610 | quinlan | 2004-02-11 05:02:26 +0000 (Wed, 11 Feb 2004) | 2 lines

add HTML order rules and some possible HTML_MESSAGE replacements

------------------------------------------------------------------------
r6609 | jm | 2004-02-11 03:16:34 +0000 (Wed, 11 Feb 2004) | 1 line

wantonly updated Changes from svn log
------------------------------------------------------------------------
r6608 | jm | 2004-02-11 03:16:03 +0000 (Wed, 11 Feb 2004) | 1 line

fixed T_REGSOFT, added T_DATE_COMMA
------------------------------------------------------------------------
r6607 | quinlan | 2004-02-11 00:20:09 +0000 (Wed, 11 Feb 2004) | 2 lines

move 70_cvs_rules_under_test.cf to rules/70_testing.cf

------------------------------------------------------------------------
r6606 | quinlan | 2004-02-11 00:04:07 +0000 (Wed, 11 Feb 2004) | 3 lines

test XBL as -notfirsthop to compare against current rule before changing
current rule

------------------------------------------------------------------------
r6605 | quinlan | 2004-02-10 21:14:16 +0000 (Tue, 10 Feb 2004) | 2 lines

XBL is supposed to be a DUL list according to Steve Linford

------------------------------------------------------------------------
r6603 | felicity | 2004-02-10 17:37:06 +0000 (Tue, 10 Feb 2004) | 1 line

PerMsgStatus shouldn't go digging into the internal message format.  bayes wants the mbox seperator if it exists.  and let's not use future atimes in the bayes db since that should never happen.
------------------------------------------------------------------------
r6601 | jm | 2004-02-10 01:13:10 +0000 (Tue, 10 Feb 2004) | 1 line

added T_REGSOFT ratware-forgery sign
------------------------------------------------------------------------
r6586 | jm | 2004-02-08 05:13:39 +0000 (Sun, 08 Feb 2004) | 1 line

couple more patterns
------------------------------------------------------------------------
r6585 | jm | 2004-02-08 05:12:39 +0000 (Sun, 08 Feb 2004) | 1 line

couple more patterns
------------------------------------------------------------------------
r6584 | jm | 2004-02-08 05:10:31 +0000 (Sun, 08 Feb 2004) | 1 line

couple more patterns
------------------------------------------------------------------------
r6583 | jm | 2004-02-08 04:56:16 +0000 (Sun, 08 Feb 2004) | 1 line

redo T_HELO_DYNAMIC rules using last-untrusted semantics
------------------------------------------------------------------------
r6582 | jm | 2004-02-08 04:51:57 +0000 (Sun, 08 Feb 2004) | 1 line

oops, forgot to shorten the ip
------------------------------------------------------------------------
r6579 | jm | 2004-02-08 04:40:12 +0000 (Sun, 08 Feb 2004) | 1 line

use Net::CIDR::Lite to consolidate into ranges where possible
------------------------------------------------------------------------
r6578 | jm | 2004-02-08 04:19:52 +0000 (Sun, 08 Feb 2004) | 1 line

fixed bug: bayes was picking up non-IP tokens as IPs
------------------------------------------------------------------------
r6577 | jm | 2004-02-08 02:44:20 +0000 (Sun, 08 Feb 2004) | 1 line

sorted MANIFEST
------------------------------------------------------------------------
r6576 | jm | 2004-02-08 02:44:03 +0000 (Sun, 08 Feb 2004) | 1 line

added tool
------------------------------------------------------------------------
r6575 | jm | 2004-02-08 02:15:13 +0000 (Sun, 08 Feb 2004) | 1 line

added tool to generate 'trusted_networks' lines from a Bayes db dump
------------------------------------------------------------------------
r6574 | jm | 2004-02-08 01:45:16 +0000 (Sun, 08 Feb 2004) | 1 line

bayes: track IP addresses from Received for trusted_networks mining
------------------------------------------------------------------------
r6573 | jm | 2004-02-08 01:44:52 +0000 (Sun, 08 Feb 2004) | 16 lines

Plugins:

  - allow loading from @INC

  - allow loading with relative paths

  - added 'ifplugin' and 'endif' conditional-loading keywords for Conf

  - added a Test plugin class

  - added test for above (and for plugins in general)

  - cleaned up a few more cases where Conf uses regexps instead of
    $key and $value


------------------------------------------------------------------------
r6572 | jm | 2004-02-08 00:45:27 +0000 (Sun, 08 Feb 2004) | 1 line

added relative-path support to loadplugin
------------------------------------------------------------------------
r6571 | jm | 2004-02-07 23:55:22 +0000 (Sat, 07 Feb 2004) | 1 line

bug 2556: added 'auto_whitelist_db_modules' to provide way for user to specify db module preference so that old AWL files can be used
------------------------------------------------------------------------
r6570 | jm | 2004-02-07 23:47:08 +0000 (Sat, 07 Feb 2004) | 1 line

bug 2898: GTUBE mails should not affect the AWL
------------------------------------------------------------------------
r6569 | jm | 2004-02-07 23:28:52 +0000 (Sat, 07 Feb 2004) | 1 line

added POD documentation and --clean switch to tools/check_whitelist, allowing AWL to be cleaned of single-hit old entries.   fixes bug 1883: record number of emails received in AWL; bug 2103: AWL needs a way to be cleaned out
------------------------------------------------------------------------
r6565 | jm | 2004-02-07 22:36:16 +0000 (Sat, 07 Feb 2004) | 1 line

bug 3006: SQL user-prefs stop working due to use of self->{main} in Conf.pm.   Fixed by setting {main} in Conf ctor, and providing a finish() method on the main object as we should have been doing all along
------------------------------------------------------------------------
r6564 | jm | 2004-02-07 22:18:45 +0000 (Sat, 07 Feb 2004) | 1 line

affiliate_id rule, suggestion from sa-users list
------------------------------------------------------------------------
r6558 | jm | 2004-02-07 03:54:20 +0000 (Sat, 07 Feb 2004) | 1 line

some new rules for testing
------------------------------------------------------------------------
r6553 | jm | 2004-02-06 20:25:59 +0000 (Fri, 06 Feb 2004) | 1 line

rule development helper script: scan a corpus of mail for one or more named headers, producing easilly-greppable output, to spot correlations between header patterns
------------------------------------------------------------------------
r6550 | jm | 2004-02-06 17:55:57 +0000 (Fri, 06 Feb 2004) | 1 line

more simple drugs-in-subject rules for testing
------------------------------------------------------------------------
r6549 | jm | 2004-02-06 17:52:14 +0000 (Fri, 06 Feb 2004) | 1 line

simple xanax-in-subject rule
------------------------------------------------------------------------
r6548 | jm | 2004-02-06 17:39:06 +0000 (Fri, 06 Feb 2004) | 1 line

some errors in MANIFEST discovered; all files with 'o' in the name may have been skipped
------------------------------------------------------------------------
r6539 | jm | 2004-02-06 07:00:31 +0000 (Fri, 06 Feb 2004) | 1 line

bug 2205: LDAP support, from Kristian Koehntopp <kk(at)netuse.de>. spamd can now read configs from LDAP
------------------------------------------------------------------------
r6536 | jm | 2004-02-06 06:49:55 +0000 (Fri, 06 Feb 2004) | 1 line

bug 2205: LDAP support, from Kristian Koehntopp <kk(at)netuse.de>. spamd can now read configs from LDAP
------------------------------------------------------------------------
r6532 | felicity | 2004-02-06 04:30:44 +0000 (Fri, 06 Feb 2004) | 1 line

updated sa-learn doco a little
------------------------------------------------------------------------
r6531 | jm | 2004-02-06 04:04:28 +0000 (Fri, 06 Feb 2004) | 1 line

added a whole load more plugin APIs, for scanning start/end events, autolearning, and when the user is changed
------------------------------------------------------------------------
r6529 | jm | 2004-02-06 03:36:06 +0000 (Fri, 06 Feb 2004) | 1 line

some error-avoidance in plugin support
------------------------------------------------------------------------
r6528 | jm | 2004-02-06 03:35:41 +0000 (Fri, 06 Feb 2004) | 1 line

trying out some new rules to detect spamware which attempts to evade rDNS/HELO crosschecks by using correct rDNS for HELO; however, if we see HELOs from dynamic IPs using their rDNS names, I bet it's a good rule.  idea from CL
------------------------------------------------------------------------
r6524 | quinlan | 2004-02-05 23:10:44 +0000 (Thu, 05 Feb 2004) | 7 lines

DNSBL changes
- rename RCVD_IN_DYNABLOCK to RCVD_IN_SORBS_DUL
- change multi-RBLs into prerequisite tests for better stability
- promote RCVD_IN_XBL, switch to new version of SBL+XBL rule
- fix T_RCVD_IN_SORBS_NOMAIL and T_RCVD_IN_SORBS_BADCONF to query
  the SORBS RHSBL

------------------------------------------------------------------------
r6523 | quinlan | 2004-02-05 23:08:02 +0000 (Thu, 05 Feb 2004) | 2 lines

remove some debugging accidentally committed

------------------------------------------------------------------------
r6522 | felicity | 2004-02-05 22:48:10 +0000 (Thu, 05 Feb 2004) | 1 line

reverted the last score checkin, forced the 0 scores to 0.001 to get the same result as I was going for...
------------------------------------------------------------------------
r6520 | felicity | 2004-02-05 21:10:30 +0000 (Thu, 05 Feb 2004) | 4 lines

since we had a bunch of scores still at 0, weren't not testing all of the
rules ...  killed the generated scores so everything will default to 1.
enabled net rules that were disabled with 0.001 score.

------------------------------------------------------------------------
r6519 | felicity | 2004-02-05 20:40:15 +0000 (Thu, 05 Feb 2004) | 1 line

bug 2869: sa-learn would fail if run with --mbox and reading from STDIN in certain circumstances.  this commit lets sa-learn make a temp file to store the contents from STDIN, runs the appropriate code over the temp file, then removes it.
------------------------------------------------------------------------
r6518 | felicity | 2004-02-05 20:26:15 +0000 (Thu, 05 Feb 2004) | 1 line

the loop should deal with the file name, not the folder name ...
------------------------------------------------------------------------
r6515 | felicity | 2004-02-05 18:03:42 +0000 (Thu, 05 Feb 2004) | 1 line

more mime parsing tests
------------------------------------------------------------------------
r6514 | felicity | 2004-02-05 17:50:11 +0000 (Thu, 05 Feb 2004) | 1 line

found spam trying to use blank mime boundaries, in violation of the rfc.  it's not clear if we should accept or ignore the blank boundary (muas are all over the board wrt how they handle it), so this commit will have us accept the blank boundary.  we can easily change it to ignore the blank boundary with a 2-line comment change if we later decide to do things differently.
------------------------------------------------------------------------
r6513 | felicity | 2004-02-05 16:03:25 +0000 (Thu, 05 Feb 2004) | 1 line

solve a div by zero error
------------------------------------------------------------------------
r6509 | quinlan | 2004-02-05 07:34:27 +0000 (Thu, 05 Feb 2004) | 3 lines

promote HTML_CONVERTED
add a new test rule (not usable yet)

------------------------------------------------------------------------
r6504 | felicity | 2004-02-05 04:08:59 +0000 (Thu, 05 Feb 2004) | 1 line

remove MICROSOFT_EXECUTABLE
------------------------------------------------------------------------
r6503 | felicity | 2004-02-05 03:19:20 +0000 (Thu, 05 Feb 2004) | 1 line

don't bother looking for uuencoded parts, since we don't use that knowledge for anything
------------------------------------------------------------------------
r6502 | felicity | 2004-02-04 22:28:34 +0000 (Wed, 04 Feb 2004) | 3 lines

bug 3000: make check_attachments() use the mime tree instead of trying
to figure out what is going on by itself.

------------------------------------------------------------------------
r6501 | felicity | 2004-02-04 21:11:54 +0000 (Wed, 04 Feb 2004) | 1 line

fixed no-self issue...
------------------------------------------------------------------------
r6500 | felicity | 2004-02-04 20:27:53 +0000 (Wed, 04 Feb 2004) | 1 line

allow access to raw data if necessary
------------------------------------------------------------------------
r6499 | felicity | 2004-02-04 20:24:58 +0000 (Wed, 04 Feb 2004) | 1 line

parse more things out of content-type
------------------------------------------------------------------------
r6494 | quinlan | 2004-02-04 08:12:19 +0000 (Wed, 04 Feb 2004) | 2 lines

remove HTML bad tag count rules - not as good as ratios

------------------------------------------------------------------------
r6493 | quinlan | 2004-02-04 08:09:34 +0000 (Wed, 04 Feb 2004) | 4 lines

Promote one of the parser-based HTML obfuscation rule sets
(not quite the best results, but seems least easily evaded).
This blows OBFUSCATING_COMMENT out of the water, by the way.

------------------------------------------------------------------------
r6466 | quinlan | 2004-02-04 04:35:49 +0000 (Wed, 04 Feb 2004) | 2 lines

remove in-memory cache of probabilities since code was not being used

------------------------------------------------------------------------
r6463 | quinlan | 2004-02-04 00:29:53 +0000 (Wed, 04 Feb 2004) | 4 lines

add HTML parser-based version of T_HTML_CONVERTED
add xbl+sbl support
a few other new test rules

------------------------------------------------------------------------
r6441 | quinlan | 2004-02-03 06:02:22 +0000 (Tue, 03 Feb 2004) | 2 lines

allow HTML comment rules to be specified in html_eval, convert current rules

------------------------------------------------------------------------
r6440 | quinlan | 2004-02-03 05:54:48 +0000 (Tue, 03 Feb 2004) | 2 lines

add parser-based HTML obfuscation tests and a few tweaks to HTML rendering

------------------------------------------------------------------------
r6436 | felicity | 2004-02-03 00:30:30 +0000 (Tue, 03 Feb 2004) | 1 line

don't need MsgContainer::as_string() anymore.  instead of rendering as HTML any text* attachment, only do 'text' and 'text/plain'.  fixes some FPs for MPART_ALT_DIFF, etc.
------------------------------------------------------------------------
r6435 | felicity | 2004-02-02 21:36:50 +0000 (Mon, 02 Feb 2004) | 1 line

spamd wasn't putting the mbox seperator back ... <grrr>
------------------------------------------------------------------------
r6434 | quinlan | 2004-02-02 21:34:33 +0000 (Mon, 02 Feb 2004) | 2 lines

add some Message-ID rules for test

------------------------------------------------------------------------
r6433 | felicity | 2004-02-02 15:57:07 +0000 (Mon, 02 Feb 2004) | 1 line

if the raw size is 0, there's nothing to render, so don't bother.  (solves a div by 0 error too)
------------------------------------------------------------------------
r6432 | quinlan | 2004-02-02 06:39:05 +0000 (Mon, 02 Feb 2004) | 3 lines

testing moving some comment rules from code to here
bug 2992: a few proposed new rules by Martin Radford

------------------------------------------------------------------------
r6431 | quinlan | 2004-02-02 06:38:03 +0000 (Mon, 02 Feb 2004) | 2 lines

allow HTML comment tests to be specified in html_eval rules

------------------------------------------------------------------------
r6430 | felicity | 2004-02-02 02:50:25 +0000 (Mon, 02 Feb 2004) | 1 line

deal with the mbox seperator ...
------------------------------------------------------------------------
r6421 | felicity | 2004-02-01 21:14:39 +0000 (Sun, 01 Feb 2004) | 1 line

use 3 different states for ArchiveIterator, 1 for sa-learn (do everything in memory), 2 for mass-check: tempfile to keep memory use down, 1 process (no forking/etc), 2+ processes (forking, IPC, etc.)
------------------------------------------------------------------------
r6400 | duncf | 2004-02-01 05:41:34 +0000 (Sun, 01 Feb 2004) | 1 line

Fixed credits to avoid belittling some contributions... removed references to bugzilla and dates (we really dont need to be so specific...)
------------------------------------------------------------------------
r6399 | felicity | 2004-02-01 05:12:49 +0000 (Sun, 01 Feb 2004) | 1 line

previous change broke sa-learn -- we now only use external files for message passing if -j > 1, also just stick # of messages at top of temp file, skip the whole IO child/parent thing ...
------------------------------------------------------------------------
r6398 | jm | 2004-02-01 04:37:29 +0000 (Sun, 01 Feb 2004) | 2 lines

Michael Parker: Fixing up the license in several files, also moves over to the new key/value
Conf stuff and makes it so BayesStoreSQL no longer returns undef in new.
------------------------------------------------------------------------
r6393 | mss | 2004-02-01 01:46:46 +0000 (Sun, 01 Feb 2004) | 4 lines

Tried to find out why 'make test' fails with
  t/bayesdbm....ok 32/43Can't use an undefined value as a symbol reference at ../lib/Mail/SpamAssassin/ArchiveIterator.pm line 296.
Anybody an idea?

------------------------------------------------------------------------
r6390 | mss | 2004-02-01 01:17:14 +0000 (Sun, 01 Feb 2004) | 1 line

"clean-room" re-implementation of the spamc $(EXE_EXT) stuff
------------------------------------------------------------------------
r6385 | felicity | 2004-01-31 21:40:05 +0000 (Sat, 31 Jan 2004) | 1 line

reduce memory usage during mass-check -- for me I go from 110-250 to 50-60MB
------------------------------------------------------------------------
r6383 | felicity | 2004-01-31 14:35:51 +0000 (Sat, 31 Jan 2004) | 1 line

use nightly/weekly as appropriate, not just nightly ... <grrr>
------------------------------------------------------------------------
r6381 | jm | 2004-01-31 05:26:58 +0000 (Sat, 31 Jan 2004) | 1 line

reverted patch from bug 1031: removed EXE_EXT use from code to save having to get a written CLA from Reini Urban
------------------------------------------------------------------------
r6380 | jm | 2004-01-31 05:21:25 +0000 (Sat, 31 Jan 2004) | 1 line

bug 2949: add wiki link to README
------------------------------------------------------------------------
r6379 | jm | 2004-01-31 05:08:39 +0000 (Sat, 31 Jan 2004) | 1 line

updated CREDITS list to be comprehensive and up-to-date
------------------------------------------------------------------------
r6378 | jm | 2004-01-31 04:43:04 +0000 (Sat, 31 Jan 2004) | 1 line

removed copyright notices from all files, apart from the ASF one.  Moved authorship and credits information into a new top-level file, CREDITS
------------------------------------------------------------------------
r6377 | jm | 2004-01-31 04:18:08 +0000 (Sat, 31 Jan 2004) | 1 line

ran indent -i4 -npsl -di0 -br -nce -d0 -cli0 -npcs -nfc1 (the Apache C style, http://www.apache.org/dev/styleguide.html) over the .c and .h files in spamc
------------------------------------------------------------------------
r6376 | jm | 2004-01-31 04:12:48 +0000 (Sat, 31 Jan 2004) | 1 line

noted some warnings about implicit declarations and unused vars; cleaned
------------------------------------------------------------------------
r6375 | jm | 2004-01-31 04:10:17 +0000 (Sat, 31 Jan 2004) | 1 line

bug 2959: spamc -d causes seg fault when hostname used does not resolve
------------------------------------------------------------------------
r6374 | jm | 2004-01-31 04:00:18 +0000 (Sat, 31 Jan 2004) | 1 line

bug 1642: remove use of AnyDBM_File, since it pollutes the global namespace
------------------------------------------------------------------------
r6371 | quinlan | 2004-01-31 03:28:18 +0000 (Sat, 31 Jan 2004) | 4 lines

store list of messages in a temporary file
restore offset as byte offset of message starting at "From "
move secure_tmpfile to Util.pm

------------------------------------------------------------------------
r6370 | quinlan | 2004-01-31 03:26:41 +0000 (Sat, 31 Jan 2004) | 2 lines

fix a warning from new test code

------------------------------------------------------------------------
r6365 | felicity | 2004-01-30 21:03:54 +0000 (Fri, 30 Jan 2004) | 1 line

quinlan didn't like my sha1.t modifications, so I'm backing out the patch since it's not a hot issue for me.
------------------------------------------------------------------------
r6364 | felicity | 2004-01-30 18:49:59 +0000 (Fri, 30 Jan 2004) | 1 line

when bayes learns a message, put the atime of that message in the debug output
------------------------------------------------------------------------
r6363 | felicity | 2004-01-30 18:45:19 +0000 (Fri, 30 Jan 2004) | 1 line

if sa-learn is run but the configuration disables bayes, tell the user!
------------------------------------------------------------------------
r6361 | jm | 2004-01-30 06:12:57 +0000 (Fri, 30 Jan 2004) | 1 line

T_HTTP_77 now a uri rule
------------------------------------------------------------------------
r6360 | jm | 2004-01-30 05:54:01 +0000 (Fri, 30 Jan 2004) | 1 line

oops, typo in T_HTTP_77
------------------------------------------------------------------------
r6359 | felicity | 2004-01-30 04:15:38 +0000 (Fri, 30 Jan 2004) | 2 lines

faster version of scan_mailbox.  brings the time for me from 55s to 44s.

------------------------------------------------------------------------
r6358 | felicity | 2004-01-30 03:43:03 +0000 (Fri, 30 Jan 2004) | 2 lines

more removal of deprecated options and such

------------------------------------------------------------------------
r6357 | jm | 2004-01-30 03:09:51 +0000 (Fri, 30 Jan 2004) | 1 line

minor doco update
------------------------------------------------------------------------
r6356 | jm | 2004-01-30 03:04:54 +0000 (Fri, 30 Jan 2004) | 1 line

catch encoded 'www' in URLs
------------------------------------------------------------------------
r6355 | jm | 2004-01-30 03:04:47 +0000 (Fri, 30 Jan 2004) | 1 line

catch encoded 'www' in URLs
------------------------------------------------------------------------
r6354 | jm | 2004-01-30 03:04:17 +0000 (Fri, 30 Jan 2004) | 1 line

this went in with last change. highlighting independently
------------------------------------------------------------------------
r6353 | jm | 2004-01-30 02:54:33 +0000 (Fri, 30 Jan 2004) | 1 line

bug 195: SQL support for AWL and Bayes storage, thanks to Michael Parker
------------------------------------------------------------------------
r6352 | felicity | 2004-01-29 19:43:38 +0000 (Thu, 29 Jan 2004) | 1 line

more housekeeping -- check_bayes_db no longer exists, and modified some of the sha1 test code (more text blobs ...)
------------------------------------------------------------------------
r6351 | felicity | 2004-01-29 19:27:12 +0000 (Thu, 29 Jan 2004) | 1 line

first pass at removing deprecated options
------------------------------------------------------------------------
r6350 | felicity | 2004-01-29 19:09:45 +0000 (Thu, 29 Jan 2004) | 1 line

fixed up some doco test bits
------------------------------------------------------------------------
r6349 | felicity | 2004-01-29 18:47:23 +0000 (Thu, 29 Jan 2004) | 1 line

here's cpucount ...
------------------------------------------------------------------------
r6348 | quinlan | 2004-01-29 18:44:56 +0000 (Thu, 29 Jan 2004) | 2 lines

find number of processors without cpucount

------------------------------------------------------------------------
r6347 | felicity | 2004-01-29 14:18:15 +0000 (Thu, 29 Jan 2004) | 1 line

another stupid typo
------------------------------------------------------------------------
r6346 | quinlan | 2004-01-29 01:57:58 +0000 (Thu, 29 Jan 2004) | 2 lines

more SVN updates

------------------------------------------------------------------------
r6343 | felicity | 2004-01-28 22:29:01 +0000 (Wed, 28 Jan 2004) | 1 line

remove out-of-date tools that aren't used anyway
------------------------------------------------------------------------
r6342 | felicity | 2004-01-28 22:27:18 +0000 (Wed, 28 Jan 2004) | 1 line

added license text to calling scripts
------------------------------------------------------------------------
r6341 | felicity | 2004-01-28 22:24:05 +0000 (Wed, 28 Jan 2004) | 1 line

need to kill it from MANIFEST too... <sigh>
------------------------------------------------------------------------
r6340 | felicity | 2004-01-28 22:23:21 +0000 (Wed, 28 Jan 2004) | 1 line

people won't run it if it's not there ... ;)
------------------------------------------------------------------------
r6336 | felicity | 2004-01-28 16:02:39 +0000 (Wed, 28 Jan 2004) | 1 line

fixed svnversion issue
------------------------------------------------------------------------
r6335 | quinlan | 2004-01-28 06:40:25 +0000 (Wed, 28 Jan 2004) | 2 lines

switch to SVN version (does anyone actually use the tag of mass-check itself?)

------------------------------------------------------------------------
r6334 | quinlan | 2004-01-28 06:34:10 +0000 (Wed, 28 Jan 2004) | 2 lines

add $Rev$

------------------------------------------------------------------------
r6333 | jm | 2004-01-28 06:13:17 +0000 (Wed, 28 Jan 2004) | 1 line

updating instructions for svn
------------------------------------------------------------------------
r6331 | felicity | 2004-01-28 00:57:39 +0000 (Wed, 28 Jan 2004) | 1 line

updates for the corpora run scripts
------------------------------------------------------------------------
r6330 | quinlan | 2004-01-28 00:37:10 +0000 (Wed, 28 Jan 2004) | 2 lines

update scripts for SVN

------------------------------------------------------------------------
r6329 | quinlan | 2004-01-27 22:50:11 +0000 (Tue, 27 Jan 2004) | 2 lines

bug 2211: tests to detect invalid HTML tags

------------------------------------------------------------------------
r6328 | quinlan | 2004-01-27 22:35:08 +0000 (Tue, 27 Jan 2004) | 2 lines

naming convention for html_results that are still in testing

------------------------------------------------------------------------
r6327 | felicity | 2004-01-27 21:26:56 +0000 (Tue, 27 Jan 2004) | 1 line

finish removing this stuff
------------------------------------------------------------------------
r6324 | felicity | 2004-01-27 21:00:17 +0000 (Tue, 27 Jan 2004) | 1 line

removing old changes file
------------------------------------------------------------------------
r6323 | felicity | 2004-01-27 20:58:39 +0000 (Tue, 27 Jan 2004) | 1 line

require razor 2.40 or later
------------------------------------------------------------------------
r6322 | jm | 2004-01-27 20:11:42 +0000 (Tue, 27 Jan 2004) | 1 line

oops. thanks Theo for spotting that. fixed a bug
------------------------------------------------------------------------
r6321 | felicity | 2004-01-27 19:19:10 +0000 (Tue, 27 Jan 2004) | 2 lines

bug 2910: looks like these weren't "svn add"ed ... oops!

------------------------------------------------------------------------
r6319 | jm | 2004-01-27 08:24:29 +0000 (Tue, 27 Jan 2004) | 1 line

bug 2910: replaced evolver with fast perceptron score generation tool by Henry Stern; also cleaned up a few old scripts that aren't used anymore
------------------------------------------------------------------------
r6318 | jm | 2004-01-27 08:04:58 +0000 (Tue, 27 Jan 2004) | 1 line

metadata's not going away that easily ;)
------------------------------------------------------------------------
r6317 | jm | 2004-01-27 08:01:27 +0000 (Tue, 27 Jan 2004) | 1 line

bug 2970: Bob Menschel's 'longwords' rules
------------------------------------------------------------------------
r6316 | jm | 2004-01-27 07:55:25 +0000 (Tue, 27 Jan 2004) | 1 line

bug 2965: hit-frequencies -x header was wrong
------------------------------------------------------------------------
r6312 | felicity | 2004-01-27 03:29:54 +0000 (Tue, 27 Jan 2004) | 1 line

bug 2968: sa-learn failed because there's no more 'get' function...
------------------------------------------------------------------------
r6305 | felicity | 2004-01-26 23:27:57 +0000 (Mon, 26 Jan 2004) | 1 line

mime parser test code and related data files
------------------------------------------------------------------------
r6304 | jm | 2004-01-26 22:20:21 +0000 (Mon, 26 Jan 2004) | 1 line

added bogusmx DNSBL test
------------------------------------------------------------------------
r6303 | felicity | 2004-01-26 22:09:05 +0000 (Mon, 26 Jan 2004) | 30 lines

- bug 2267-related: I found that M::SA::Conf::_parse() was sucking
  up a lot of the time of a single message run.  I modified the
  majority of configuration options to do string equality instead of
  REs and got an improvement.  It probably still needs some tweaks,
  but it's working for me. :)

- started removing backwards compatibility options -- for instance,
  bayes_auto_learn is now the required version, auto_learn alone won't
  work.

- the previous Conf code would set the default scores whenever a
  rule was defined in the config files.  unfortunately, since we
  typically define the rule, and then the score, this means we're
  setting the scores to the default, then again when the real scores
  are read in.  I moved the default score setting to the end of the
  parsing routine, so all the real scores are set, then anything
  that's left without a score gets the appropriate default.

- more documentation bits around the MsgContainer and MsgParser code

- got rid of some module code not required in PerMsgStatus

- added a quick n' dirty useless entity modification to the URL list

- added license jargon to MsgParser

- fixed dns.t to exit if it actually shouldn't test anything

- killed useless Data::Dumper from rule_tests.t

------------------------------------------------------------------------
r6299 | felicity | 2004-01-26 04:41:00 +0000 (Mon, 26 Jan 2004) | 1 line

bug 2071: gevalia coffee rule
------------------------------------------------------------------------
r6298 | felicity | 2004-01-26 04:12:26 +0000 (Mon, 26 Jan 2004) | 1 line

bug 2844: web browsers will correctly parse 'http://www.foo.biz?id=3' to be 'http://www.foo.biz/?id=3', so we should too...
------------------------------------------------------------------------
r6297 | felicity | 2004-01-26 03:27:09 +0000 (Mon, 26 Jan 2004) | 1 line

bug 2963: make rule_tests work with the new mime parser.  also make sure the tests run against the test configs and don't read the site or user prefs files.
------------------------------------------------------------------------
r6295 | felicity | 2004-01-25 22:24:35 +0000 (Sun, 25 Jan 2004) | 1 line

stop running body rules a little faster ...
------------------------------------------------------------------------
r6282 | felicity | 2004-01-25 20:06:33 +0000 (Sun, 25 Jan 2004) | 1 line

potentially mark when a bad uri encoding occurs.
------------------------------------------------------------------------
r6265 | felicity | 2004-01-25 03:17:01 +0000 (Sun, 25 Jan 2004) | 1 line

merge the new html rendering with the old html rules ...
------------------------------------------------------------------------
r6263 | mss | 2004-01-24 20:11:43 +0000 (Sat, 24 Jan 2004) | 1 line

Some more standardized copyrights.
------------------------------------------------------------------------
r6262 | mss | 2004-01-24 20:05:23 +0000 (Sat, 24 Jan 2004) | 1 line

Added some license/copyright headers
------------------------------------------------------------------------
r6261 | quinlan | 2004-01-24 19:54:44 +0000 (Sat, 24 Jan 2004) | 2 lines

use standard copyright format

------------------------------------------------------------------------
r6260 | felicity | 2004-01-24 18:36:47 +0000 (Sat, 24 Jan 2004) | 1 line

bug 2956: uri tests weren't matching where they should if uris were encoded improperly.  we now reencode the uris we found correctly and check them too.
------------------------------------------------------------------------
r6259 | felicity | 2004-01-24 18:10:34 +0000 (Sat, 24 Jan 2004) | 1 line

bug 2957: add INFO_TLD, same as BIZ_TLD
------------------------------------------------------------------------
r6258 | felicity | 2004-01-24 18:07:38 +0000 (Sat, 24 Jan 2004) | 4 lines

bug 2858: add a "PING" protocol command to spamd which allows for remote
monitoring to see if spamd is alive without it complaining there was no
message sent.

------------------------------------------------------------------------
r6257 | felicity | 2004-01-24 05:33:24 +0000 (Sat, 24 Jan 2004) | 1 line

more parser work, replaced the get_*body functions in PerMsgStatus, etc, etc.
------------------------------------------------------------------------
r6256 | quinlan | 2004-01-24 01:15:36 +0000 (Sat, 24 Jan 2004) | 2 lines

update to Apache License Version 2.0

------------------------------------------------------------------------
r6255 | quinlan | 2004-01-24 01:11:57 +0000 (Sat, 24 Jan 2004) | 2 lines

minor fix

------------------------------------------------------------------------
r6250 | jm | 2004-01-23 06:01:21 +0000 (Fri, 23 Jan 2004) | 1 line

plugin support, using new loadplugin configuration command
------------------------------------------------------------------------
r6249 | felicity | 2004-01-21 21:49:00 +0000 (Wed, 21 Jan 2004) | 1 line

work towards merging new parser into other areas ...
------------------------------------------------------------------------
r6248 | mss | 2004-01-21 19:21:42 +0000 (Wed, 21 Jan 2004) | 2 lines

I wonder why this file is suddenly executabel again...

------------------------------------------------------------------------
r6247 | felicity | 2004-01-20 22:33:37 +0000 (Tue, 20 Jan 2004) | 1 line

bug 2939: initial work to remove Mail::Audit code
------------------------------------------------------------------------
r6245 | jm | 2004-01-20 21:37:01 +0000 (Tue, 20 Jan 2004) | 1 line

added details of spamtrap machine etc.
------------------------------------------------------------------------
r6244 | jm | 2004-01-20 20:59:39 +0000 (Tue, 20 Jan 2004) | 1 line

minor status updates
------------------------------------------------------------------------
r6240 | felicity | 2004-01-20 20:32:27 +0000 (Tue, 20 Jan 2004) | 2 lines

bug 2291: routines to process body text could be run multiple times due to lack of caching of results.

------------------------------------------------------------------------
r6235 | jm | 2004-01-20 07:57:55 +0000 (Tue, 20 Jan 2004) | 1 line

bug 2791: qmail Received headers may still be misinterpreted, fix from Michel Bouissou
------------------------------------------------------------------------
r6234 | jm | 2004-01-20 07:55:55 +0000 (Tue, 20 Jan 2004) | 1 line

more SPF work; added test for numeric HELOs as the non-first Received line; added test to find images/hrefs to terra.es, which seems to have a serious problem with hosting spammers
------------------------------------------------------------------------
r6233 | jm | 2004-01-20 07:54:11 +0000 (Tue, 20 Jan 2004) | 1 line

ok_locales now supports two new locales -- zh.big5 and zh.gb2312, to limit charsets more accurately; bug 2846
------------------------------------------------------------------------
r6228 | mss | 2004-01-19 11:46:23 +0000 (Mon, 19 Jan 2004) | 1 line

vim likes tabs...
------------------------------------------------------------------------
r6227 | mss | 2004-01-19 11:36:57 +0000 (Mon, 19 Jan 2004) | 2 lines

More magic for Windows.

------------------------------------------------------------------------
r6226 | mss | 2004-01-19 11:27:04 +0000 (Mon, 19 Jan 2004) | 2 lines

English lesson: We're RUNNING_ON_WINDOWS, *not* IN (stupid me).

------------------------------------------------------------------------
r6216 | mss | 2004-01-18 22:44:05 +0000 (Sun, 18 Jan 2004) | 2 lines

Some refactoring of our test environment to make it work smoother with Windows.

------------------------------------------------------------------------
r6215 | mss | 2004-01-18 22:43:24 +0000 (Sun, 18 Jan 2004) | 2 lines

Corrected a changed filename.

------------------------------------------------------------------------
r6212 | felicity | 2004-01-18 18:58:37 +0000 (Sun, 18 Jan 2004) | 1 line

get rid of the last 'delivery' code (log-to-mbox), move pristine header into the mime parser.
------------------------------------------------------------------------
r6211 | mss | 2004-01-18 18:36:44 +0000 (Sun, 18 Jan 2004) | 2 lines

Add t/SATest.pl which I forgot, sorted this bloody file alphabetically while I was around.

------------------------------------------------------------------------
r6209 | mss | 2004-01-18 18:21:14 +0000 (Sun, 18 Jan 2004) | 2 lines

Add workaround for systems/shells (esp. Windows) which do not support calls a la 'cmd >file 2>&1 &'. Hope this really works under Windows, will test it in afew hours.

------------------------------------------------------------------------
r6206 | mss | 2004-01-18 16:56:24 +0000 (Sun, 18 Jan 2004) | 2 lines

Don't knock over the slashes under Windows -- the apps have to handle it themselves.

------------------------------------------------------------------------
r6200 | felicity | 2004-01-18 06:28:02 +0000 (Sun, 18 Jan 2004) | 4 lines

starting to get rid of the Mail::Audit stuff
mime parser will now accept parse data that's already an array or a
file descriptor.

------------------------------------------------------------------------
r6199 | felicity | 2004-01-18 05:55:08 +0000 (Sun, 18 Jan 2004) | 1 line

updated spec file, removed unkempt polish translations, etc.
------------------------------------------------------------------------
r6197 | felicity | 2004-01-18 05:06:21 +0000 (Sun, 18 Jan 2004) | 8 lines

More parser work ...
- be a little smarter when parsing the boundary.  pay a little more attention to the rfc.
- do decode/render on-first-request.  this'll save time during parsing
  and memory until the need arises for a decoded/rendered part.
- generalized the text v. html difference rule to not know about internal data formats
- the parser will now deal with all of the message headers, not just mime-related ones
- decoding and rendering are now done in the object, not in the parser

------------------------------------------------------------------------
r6189 | felicity | 2004-01-17 22:33:54 +0000 (Sat, 17 Jan 2004) | 1 line

add warning to build doc
------------------------------------------------------------------------
r6188 | felicity | 2004-01-17 22:30:58 +0000 (Sat, 17 Jan 2004) | 1 line

update extra_versions and docs for svn
------------------------------------------------------------------------
r6182 | mss | 2004-01-17 17:56:19 +0000 (Sat, 17 Jan 2004) | 2 lines

Set svn:ignore values for spamc.

------------------------------------------------------------------------
r6181 | mss | 2004-01-17 17:50:25 +0000 (Sat, 17 Jan 2004) | 2 lines

The spamd directory was getting too crowded and became a mess of EU::MM and autoconf generated stuff. So all spamc stuff (including qmail-spamc) was moved to its own directory. 'make disttest' finished successfully both on Linux and Windows but YMMV so please test. Especially packagers might want to check their scripts.

------------------------------------------------------------------------
r6180 | mss | 2004-01-16 21:33:33 +0000 (Fri, 16 Jan 2004) | 1 line

remove some obsolete entries
------------------------------------------------------------------------
r6177 | mss | 2004-01-16 01:19:47 +0000 (Fri, 16 Jan 2004) | 1 line

Set some svn:keywords properties.
------------------------------------------------------------------------
r6171 | mss | 2004-01-15 19:26:43 +0000 (Thu, 15 Jan 2004) | 11 lines

bug 2928: avoid syslog-hickups on weird Message-Ids:
* check(): be more specific when parsing the id, replace all control and high chars with question marks
* logmsg(): also replace all control chars with underscores

also made the "processing" log message easier to parse. its format is now:
  logmsg =  ("processing" | "checking")
              WSP "message" (("<" msgid ">") | "(unknown)")
	      [ WSP "aka" "<" resent-msgid ">" ]
	      WSP "for" (uname | "(unknown)") ":" uid
	    "."

------------------------------------------------------------------------
r6170 | mss | 2004-01-15 00:34:30 +0000 (Thu, 15 Jan 2004) | 2 lines

bug 2924: Don't create a malformed ("from" Domain Address-literal) Received header.

------------------------------------------------------------------------
r6169 | felicity | 2004-01-14 07:44:26 +0000 (Wed, 14 Jan 2004) | 10 lines

More parser work.  Cleaned up debug statements some, got rid of
some more code that is unneeded now that we do a tree as opposed to
a pseudo-tree, resolved a potential recursion issue with leaf nodes
pointing to themselves, simplified some code to use -1 for the last
element in an array instead of "scalar @array - 1", find_parts() will
now look at the tree structure to find children instead of just looking
for children under multipart/* nodes (it's the same thing, but now it's
not tied to the content-type, just the fact there are children nodes...)


------------------------------------------------------------------------
r6167 | jm | 2004-01-14 07:41:56 +0000 (Wed, 14 Jan 2004) | 1 line

bug 2787: Received header misunderstood; bug 2896: debug code to report unparseable received header incorrect
------------------------------------------------------------------------
r6166 | felicity | 2004-01-14 06:16:30 +0000 (Wed, 14 Jan 2004) | 4 lines

Added new rules to determine the % difference between text/html and text/*
attachments in a multipart/alternative mail.  It's got amazing hit-rate
and accuracy on my corpus even given the simple algorithm I used.

------------------------------------------------------------------------
r6165 | felicity | 2004-01-14 06:12:43 +0000 (Wed, 14 Jan 2004) | 10 lines

More parser work.  The parser now handles all of my test messages
including rather annoying corner cases.  I added some comment/pod
documentation so the process is a little less cloudy (I'm still not quite
sure where tree nodes are created ...)  I got rid of a bunch of duplicated
code and made some of the parser more generic.  The tree that's made is
now actually a full tree instead of a sorta-tree (root nodes had leaf
data, but no actual leaves ...)  Renamed private functions to have an
underscore in front of their names.  Implemented a find_parts() function
to search the tree and return leaves/sub-trees that match.  Phew!

------------------------------------------------------------------------
r6164 | felicity | 2004-01-14 05:54:21 +0000 (Wed, 14 Jan 2004) | 4 lines

bug 2569: MSGID_FROM_MTA_SHORT was FPing on certain postfix received 
headers due to its reliance on what old Postfix versions did.  updated to
be more accurate although the hit rate goes down.

------------------------------------------------------------------------
r6161 | felicity | 2004-01-14 05:46:04 +0000 (Wed, 14 Jan 2004) | 3 lines

per bug 2822, added a section around the bayes expiry debug statements to completely ignore expiry
histogram output if debug is disabled.  this will cause a for() loop to be skipped. :)

------------------------------------------------------------------------
r6160 | felicity | 2004-01-14 05:39:22 +0000 (Wed, 14 Jan 2004) | 2 lines

bug 2871: fixes for FORGED_YAHOO_RCVD fps

------------------------------------------------------------------------
r6157 | mss | 2004-01-13 23:56:20 +0000 (Tue, 13 Jan 2004) | 2 lines

bug 2900: log also an existing Resent-Message-Id to ease log-analysis.

------------------------------------------------------------------------
r6156 | mss | 2004-01-13 23:05:15 +0000 (Tue, 13 Jan 2004) | 2 lines

Skip spamd regression tests on Windows (based on patches by Sidney Markowitz).

------------------------------------------------------------------------
r6155 | felicity | 2004-01-13 18:14:35 +0000 (Tue, 13 Jan 2004) | 3 lines

make sure content-type is valid, parse all multipart/* types the same
(don't make exception for alternative)

------------------------------------------------------------------------
r6154 | jm | 2004-01-13 08:03:18 +0000 (Tue, 13 Jan 2004) | 1 line

spamd -m default was not taking effect; fixed
------------------------------------------------------------------------
r6152 | jm | 2004-01-13 07:45:46 +0000 (Tue, 13 Jan 2004) | 1 line

bug 2919: bayes expiry may fail if a previous expiry was killed
------------------------------------------------------------------------
r6148 | felicity | 2004-01-13 03:12:53 +0000 (Tue, 13 Jan 2004) | 2 lines

I've found that at least HTML::Parser 3.31 will do something stupid with &nbsp; and render it into "?".

------------------------------------------------------------------------
r6147 | felicity | 2004-01-13 01:39:29 +0000 (Tue, 13 Jan 2004) | 2 lines

more fixing of the parser

------------------------------------------------------------------------
r6146 | jm | 2004-01-13 01:22:52 +0000 (Tue, 13 Jan 2004) | 1 line

now seeing this in spam/scam mails
------------------------------------------------------------------------
r6145 | felicity | 2004-01-12 19:32:44 +0000 (Mon, 12 Jan 2004) | 7 lines

the parser still had a few bugs ...  headers from previous same-level attachments  would carry over (ie:
content-type, content-type-encoding, etc.)  we wouldn't actually get a tree, but a flat parse of the
message, so things like mult/mixed(mult/alt(text/plain,text/html),application/msword) would become
text/plain, text/html, application/msword ...  we now get objectization in the parse tree so that the full
message is multipart/mixed which has a multipart/alternative and application/msword part, and the
multipart/alternative part has a text/plain and text/html part.

------------------------------------------------------------------------
r6143 | felicity | 2004-01-12 03:37:40 +0000 (Mon, 12 Jan 2004) | 4 lines

debug statements shouldn't put \n at the end.  fixed a slight bug with my last patch where m@^text/html$@
would be rendered, but it would ignore valid "text/html; ....."


------------------------------------------------------------------------
r6142 | felicity | 2004-01-11 23:54:08 +0000 (Sun, 11 Jan 2004) | 2 lines

we need to render text/html or text/* that looks like HTML ...

------------------------------------------------------------------------
r6141 | felicity | 2004-01-11 19:21:28 +0000 (Sun, 11 Jan 2004) | 3 lines

perl was complaining about the use of qw{} and text with a comma to
figure out last modified date of SA.pm.  changed to split instead.

------------------------------------------------------------------------
r6140 | felicity | 2004-01-11 18:19:04 +0000 (Sun, 11 Jan 2004) | 4 lines

bug 2917: Failure to remove /tmp/spamd-$$-init for certain settings of
auto_whitelist_path (and bayes_path)


------------------------------------------------------------------------
r6137 | mss | 2004-01-10 19:53:16 +0000 (Sat, 10 Jan 2004) | 2 lines

Fix some bugs Sidney pointed out in the Native Windows Build stuff.

------------------------------------------------------------------------
r6136 | mss | 2004-01-09 22:40:18 +0000 (Fri, 09 Jan 2004) | 2 lines

Set the correct mime-types on all files. Hopefully the next version of my IDE will pick up those SVN props and use them accordingly :)

------------------------------------------------------------------------
r6135 | mss | 2004-01-09 21:29:57 +0000 (Fri, 09 Jan 2004) | 2 lines

Adapted the versioning code to SVN.

------------------------------------------------------------------------
r6134 | jm | 2004-01-09 19:26:41 +0000 (Fri, 09 Jan 2004) | 1 line

bug 2915: added rule to detect Message-ID headers that don't match Received
------------------------------------------------------------------------
r6133 | jm | 2004-01-09 06:41:18 +0000 (Fri, 09 Jan 2004) | 1 line

added replacement for RCVD_NUMERIC_HELO using new Received parser; added 'tflags nice' for T_ALL_TRUSTED
------------------------------------------------------------------------
r6132 | jm | 2004-01-09 06:26:51 +0000 (Fri, 09 Jan 2004) | 1 line

added test for tiny font sizes
------------------------------------------------------------------------
r6127 | jm | 2004-01-09 01:37:40 +0000 (Fri, 09 Jan 2004) | 1 line

removed CBL again, since Spamhaus XBL includes all that database
------------------------------------------------------------------------
r6126 | felicity | 2004-01-08 23:56:37 +0000 (Thu, 08 Jan 2004) | 3 lines

bug 2608: HABEAS_SWE wasn't trigerring if the X-Habeas-SWE headers are 
out of order in the message header (some MUAs do this).

------------------------------------------------------------------------
r6123 | felicity | 2004-01-08 23:45:15 +0000 (Thu, 08 Jan 2004) | 2 lines

bug 2856: 'report_safe_copy_headers Received' would reverse the order of the Received headers  

------------------------------------------------------------------------
r6120 | jm | 2004-01-08 23:28:38 +0000 (Thu, 08 Jan 2004) | 1 line

use of UNUSED_VARIABLE cannot be interspersed between variable declarations with older compilers
------------------------------------------------------------------------
r6119 | jm | 2004-01-08 22:59:08 +0000 (Thu, 08 Jan 2004) | 1 line

added rule to catch the 'Re: UPPERCASE, word word word' spams by Subject
------------------------------------------------------------------------
r6117 | jm | 2004-01-08 07:06:31 +0000 (Thu, 08 Jan 2004) | 1 line

added ASL 1.1 text to all source, rules and many scripts
------------------------------------------------------------------------
r6116 | jm | 2004-01-08 06:59:30 +0000 (Thu, 08 Jan 2004) | 1 line

added license-replacing helper script
------------------------------------------------------------------------
r6115 | jm | 2004-01-08 06:42:45 +0000 (Thu, 08 Jan 2004) | 1 line

preparing to insert license text using an automated tool
------------------------------------------------------------------------
r6114 | jm | 2004-01-08 06:40:11 +0000 (Thu, 08 Jan 2004) | 1 line

some files showing up even though they were removed on sf.net
------------------------------------------------------------------------
r6112 | jm | 2004-01-08 04:40:47 +0000 (Thu, 08 Jan 2004) | 1 line

updating distro to use ASL instead of GPL/PAL; preparing for massive license fixup
------------------------------------------------------------------------
r6110 | duncf | 2004-01-08 03:06:36 +0000 (Thu, 08 Jan 2004) | 4 lines

Fixes backwards compat of rewrite_subject -> rewrite_header which I
screwed up the first time... Also removes any reference to
rewrite_subject in the docs. (Closes: #2905)

------------------------------------------------------------------------
r6109 | jm | 2004-01-08 02:57:34 +0000 (Thu, 08 Jan 2004) | 1 line

bug 2842: exiscan spamc passes empty User: on to spamd, fix support for this
------------------------------------------------------------------------
r6108 | jm | 2004-01-08 02:51:57 +0000 (Thu, 08 Jan 2004) | 1 line

bug 2842: empty User header breaks exiscan
------------------------------------------------------------------------
r6106 | jm | 2004-01-08 02:44:13 +0000 (Thu, 08 Jan 2004) | 2 lines

bug 2787: Received header parser not handling one type of header

------------------------------------------------------------------------
r6104 | jm | 2004-01-08 02:20:24 +0000 (Thu, 08 Jan 2004) | 2 lines

removed old GPL/PAL contrib cert

------------------------------------------------------------------------
r6103 | jm | 2004-01-08 02:19:28 +0000 (Thu, 08 Jan 2004) | 2 lines

Added STATUS file, Apache-style

------------------------------------------------------------------------
r6102 | mss | 2004-01-06 21:23:31 +0000 (Tue, 06 Jan 2004) | 1 line

Forgot to remove some debugging code.
------------------------------------------------------------------------
r6101 | mss | 2004-01-06 21:21:15 +0000 (Tue, 06 Jan 2004) | 2 lines

Some Native Windows fixes.

------------------------------------------------------------------------
r6100 | mss | 2004-01-06 14:19:46 +0000 (Tue, 06 Jan 2004) | 2 lines

Fixed a stupid bug which always enabled SSL on Windows.

------------------------------------------------------------------------
r6099 | mss | 2004-01-06 02:36:44 +0000 (Tue, 06 Jan 2004) | 2 lines

Added a modified version of Sidney's Native Windows Patch(tm). build/configure is now enabled.

------------------------------------------------------------------------
r6098 | mss | 2004-01-06 02:29:49 +0000 (Tue, 06 Jan 2004) | 1 line

Oops. Stupid typo. It's late.
------------------------------------------------------------------------
r6097 | mss | 2004-01-06 02:11:38 +0000 (Tue, 06 Jan 2004) | 2 lines

Added some autoconf wrapper/replacement to make it easier to incorporate Sidney's Native Windows Patches(tm) -- not yet enabled.

------------------------------------------------------------------------
r6096 | mss | 2004-01-06 02:08:14 +0000 (Tue, 06 Jan 2004) | 3 lines

* Make -Mvars work with uninitialized variables.
* Don't fiddle around with STDIN/-OUT. This is probably not really necessary but I changed it while hunting another bug and it won't hurt.

------------------------------------------------------------------------
r6095 | jm | 2004-01-05 22:57:49 +0000 (Mon, 05 Jan 2004) | 2 lines

added comment attribution

------------------------------------------------------------------------
r6094 | jm | 2004-01-05 22:55:57 +0000 (Mon, 05 Jan 2004) | 2 lines

added MSN redirector test rule

------------------------------------------------------------------------
r6093 | jm | 2004-01-05 22:52:25 +0000 (Mon, 05 Jan 2004) | 2 lines

added XBL test

------------------------------------------------------------------------
r6092 | felicity | 2004-01-05 16:28:02 +0000 (Mon, 05 Jan 2004) | 3 lines

bug 2864: RPM building on newer RPM versions would cause complaints for
files installed but not packaged, etc.  quell the warnings.

------------------------------------------------------------------------
r6090 | jm | 2004-01-05 08:20:43 +0000 (Mon, 05 Jan 2004) | 4 lines

SPF tweak; avoid fetchmail-incurred FPs, and use envelope-from data from
Received headers where available.


------------------------------------------------------------------------
r6089 | jm | 2004-01-05 07:57:49 +0000 (Mon, 05 Jan 2004) | 3 lines

Added some more test rules that seem good against the "DFKGJDFGJ, the blah etc"
spammer

------------------------------------------------------------------------
r6088 | mss | 2004-01-04 23:07:22 +0000 (Sun, 04 Jan 2004) | 2 lines

(Finally) corrected some executable bits

------------------------------------------------------------------------
r6087 | duncf | 2004-01-02 01:32:59 +0000 (Fri, 02 Jan 2004) | 4 lines

Updated sa-stats.pl from Bob Apthorpe (Bug 2870) Also included a hack
to fix Parse::Syslog brokenness and allow the script to work with log
files not in current year. (I.e. after new years)

------------------------------------------------------------------------
r6086 | mss | 2003-12-30 23:20:57 +0000 (Tue, 30 Dec 2003) | 2 lines

Add SVN files .r[0-9] and .mine to list of ignored files, remove obsolete windows_install.

------------------------------------------------------------------------
r6085 | duncf | 2003-12-30 06:10:04 +0000 (Tue, 30 Dec 2003) | 11 lines

Adds rewrite_header option to allow tagging of Subject, To and From
headers. For To and From headers, markup will be in the form of an RFC
2822 Comment (in parentheses separated by a tab from the
address). (Closes bug 478)

Also, fixes Subject tagging to allow for all tags to be used, noting
that remobval of markup will only work if report_safe is > 0, or only
_HITS_ and _REQD_ are used. (Closes 2550)

Thanks to Malte for some of the regexps I stole from him ;-)

------------------------------------------------------------------------
r6084 | duncf | 2003-12-29 19:22:09 +0000 (Mon, 29 Dec 2003) | 3 lines

Remove .cvsignore files and setting svn:ignore as suggested by Michael
Parker

------------------------------------------------------------------------
r6083 | duncf | 2003-12-29 19:06:08 +0000 (Mon, 29 Dec 2003) | 1 line

Have makefile.pl ignore .svn directory when building blib
------------------------------------------------------------------------
r6082 | duncf | 2003-12-29 18:14:12 +0000 (Mon, 29 Dec 2003) | 2 lines

Updating MAINFEST to deal with file removals (why do we always forget this?)

------------------------------------------------------------------------
r6081 | felicity | 2003-12-27 06:52:04 +0000 (Sat, 27 Dec 2003) | 5 lines

bug 2837: -w is a left over from early versions of SpamAssassin, but
the program is now designed to only filter mail, so it shouldn't try
responding with a bounce.  disabling/removing "spamassassin -w" code.


------------------------------------------------------------------------
r6080 | felicity | 2003-12-27 06:29:56 +0000 (Sat, 27 Dec 2003) | 6 lines

bug 2827: sometimes there is a "Argument "" isn't numeric in numeric lt
(<)" warning that gets printed from the Bayes code.  it turns out that
where the DB module ought to be returning undef, it sometimes returns
"", so add a check for that possibility.


------------------------------------------------------------------------
r6079 | felicity | 2003-12-27 06:18:44 +0000 (Sat, 27 Dec 2003) | 5 lines

bug 2851: when calling spamassassin -r and -k (report and revoke),
Bayes will see the modified message (ie: SA markup included), which is
a bad thing.  patched the functions to strip the markup pre-learn.


------------------------------------------------------------------------
r6077 | felicity | 2003-12-26 04:13:36 +0000 (Fri, 26 Dec 2003) | 3 lines

bug 2847: Let CmdLearn know whether or not the learning attempt completed
or failed.  If it failed, throw an error and die.

------------------------------------------------------------------------
r6040 | felicity | 2003-12-17 15:06:29 +0000 (Wed, 17 Dec 2003) | 4 lines

bug 2847: added an "unavailable" and "failed" state for _AUTOLEARN_
which describes when bayes isn't available (use_bayes 0, or no DB_File,
etc,) and when learning fails (see debug output) respectively.

------------------------------------------------------------------------
r6039 | jmason | 2003-12-17 08:09:00 +0000 (Wed, 17 Dec 2003) | 2 lines

SPF update

------------------------------------------------------------------------
r6038 | jmason | 2003-12-17 07:08:44 +0000 (Wed, 17 Dec 2003) | 2 lines

SPF code updated for latest Mail::SPF::Query release

------------------------------------------------------------------------
r6037 | jmason | 2003-12-17 06:23:48 +0000 (Wed, 17 Dec 2003) | 2 lines

interim checkin of SPF changes

------------------------------------------------------------------------
r6036 | jmason | 2003-12-17 06:18:25 +0000 (Wed, 17 Dec 2003) | 2 lines

promoted RCVD_IN_RSL and RCVD_IN_CBL, gave them approximate scores based on similar GA tests from http://www.pathname.com/~corpus/NET.7day

------------------------------------------------------------------------
r6035 | jmason | 2003-12-17 06:17:42 +0000 (Wed, 17 Dec 2003) | 2 lines

promoted RCVD_IN_RSL and RCVD_IN_CBL, gave them approximate scores based on similar GA tests from http://www.pathname.com/~corpus/NET.7day

------------------------------------------------------------------------
r6034 | jmason | 2003-12-17 06:14:52 +0000 (Wed, 17 Dec 2003) | 2 lines

promoted RCVD_IN_RSL and RCVD_IN_CBL, gave them approximate scores based on similar GA tests from http://www.pathname.com/~corpus/NET.7day

------------------------------------------------------------------------
r6033 | jmason | 2003-12-17 05:51:56 +0000 (Wed, 17 Dec 2003) | 2 lines

FINALLY fixed mass-check to have a usage msg

------------------------------------------------------------------------
r6032 | felicity | 2003-12-16 22:55:36 +0000 (Tue, 16 Dec 2003) | 2 lines

bug 2848: DB_File detection wasn't working properly in the Bayes tie_db_* functions.

------------------------------------------------------------------------
r6031 | jmason | 2003-12-16 20:14:11 +0000 (Tue, 16 Dec 2003) | 2 lines

added anti-Altavista-forgery rules

------------------------------------------------------------------------
r6030 | felicity | 2003-12-16 05:11:00 +0000 (Tue, 16 Dec 2003) | 2 lines

for debug information, display which configuration files are being read.

------------------------------------------------------------------------
r6029 | jmason | 2003-12-15 08:21:21 +0000 (Mon, 15 Dec 2003) | 2 lines

bug 1041: add a method to determine intended recipient's address; bug 796: add hashcash support; also a few doco cleanups

------------------------------------------------------------------------
r6028 | felicity | 2003-12-10 18:58:01 +0000 (Wed, 10 Dec 2003) | 3 lines

bug 2822: added a listing of atime deltas and reduction counts to help
people understand why expiry isn't occuring.

------------------------------------------------------------------------
r6027 | jmason | 2003-12-10 07:41:48 +0000 (Wed, 10 Dec 2003) | 2 lines

bug 2661: dropped rules from contributor Wolfgang Weisselberg due to missing CLA

------------------------------------------------------------------------
r6026 | jmason | 2003-12-10 07:26:04 +0000 (Wed, 10 Dec 2003) | 2 lines

bug 2688: removed contributor Radoslaw Stachowiak due to lack of CLA

------------------------------------------------------------------------
r6025 | jmason | 2003-12-10 07:25:02 +0000 (Wed, 10 Dec 2003) | 2 lines

some vestiges of code from Thomas Hurst removed; no CLA received

------------------------------------------------------------------------
r6024 | jmason | 2003-12-10 07:22:23 +0000 (Wed, 10 Dec 2003) | 2 lines

terse-report vestiges removed

------------------------------------------------------------------------
r6023 | jmason | 2003-12-10 07:18:03 +0000 (Wed, 10 Dec 2003) | 2 lines

clean-roomed pyzor_options

------------------------------------------------------------------------
r6022 | jmason | 2003-12-10 07:13:15 +0000 (Wed, 10 Dec 2003) | 2 lines

removed always_add_report, pyzor_options; didn't get CLA from Steve Abatangle

------------------------------------------------------------------------
r6021 | jmason | 2003-12-10 07:03:36 +0000 (Wed, 10 Dec 2003) | 2 lines

removed contributor David Barroso; no CLA received

------------------------------------------------------------------------
r6013 | jmason | 2003-12-09 06:15:53 +0000 (Tue, 09 Dec 2003) | 2 lines

bug 2787: Received line misparsed due to ordering problem

------------------------------------------------------------------------
r6012 | jmason | 2003-12-04 21:20:30 +0000 (Thu, 04 Dec 2003) | 2 lines

bug 2625: spamd -m5 now default

------------------------------------------------------------------------
r6011 | jmason | 2003-12-04 21:19:27 +0000 (Thu, 04 Dec 2003) | 2 lines

oops, typo

------------------------------------------------------------------------
r6009 | jmason | 2003-12-04 17:32:09 +0000 (Thu, 04 Dec 2003) | 2 lines

minor updates to SQL doco, note use of spamd -q switch

------------------------------------------------------------------------
r6008 | felicity | 2003-12-03 22:43:34 +0000 (Wed, 03 Dec 2003) | 2 lines

fixed documentation for bayes_journal_max_size.  0 disables opportunistic sync, not force once a day.

------------------------------------------------------------------------
r6006 | jmason | 2003-12-03 02:36:34 +0000 (Wed, 03 Dec 2003) | 2 lines

bug 2676: John Levine patch reinstated, received CLA

------------------------------------------------------------------------
r6005 | jmason | 2003-12-03 02:33:34 +0000 (Wed, 03 Dec 2003) | 2 lines

bug 2670, bug 2666: got CLAs for Brad Rathbun and Bob Apthorpe so can readd tools/sa-stats.pl

------------------------------------------------------------------------
r6004 | jmason | 2003-12-03 02:31:43 +0000 (Wed, 03 Dec 2003) | 2 lines

bug 2710: Anirvan Chatterjee rule reinstated on CLA

------------------------------------------------------------------------
r6003 | jmason | 2003-12-03 02:27:44 +0000 (Wed, 03 Dec 2003) | 2 lines

bug 2705: Dave Lugo's contribution reinstated

------------------------------------------------------------------------
r6002 | jmason | 2003-12-03 02:25:37 +0000 (Wed, 03 Dec 2003) | 2 lines

bug 2671: Chris Eykamp rules reinstated

------------------------------------------------------------------------
r6001 | jmason | 2003-12-03 02:22:07 +0000 (Wed, 03 Dec 2003) | 2 lines

bug 2662: Alexander Kourakos CLA received, reinstating patch

------------------------------------------------------------------------
r6000 | jmason | 2003-12-02 08:20:03 +0000 (Tue, 02 Dec 2003) | 2 lines

updated for new Dynablock DNSBL location; re-added PDL lookup

------------------------------------------------------------------------
r5999 | jmason | 2003-12-02 08:05:15 +0000 (Tue, 02 Dec 2003) | 2 lines

couple of new SORBS subrules to test

------------------------------------------------------------------------
r5997 | jmason | 2003-12-02 07:45:32 +0000 (Tue, 02 Dec 2003) | 2 lines

bug 2758: doco issue for _STARS_ capping

------------------------------------------------------------------------
r5996 | duncf | 2003-11-25 15:49:35 +0000 (Tue, 25 Nov 2003) | 10 lines

Removing the debian/ directory -- it's not elegant to begin with as I
have to fudge some stuff to get it to build from cvs anyways, and I'd
rather start an alioth site or something to collabratively maintain
the packaging. When I actually do this, I'll write a README on how to
build your own packages.

Also, since debian/rules was deleted(!), this is all useless anyways,
and I'm not going to reimplement the minor patches (like putting
quotes around $(CFLAGS))

------------------------------------------------------------------------
r5995 | jmason | 2003-11-25 07:47:29 +0000 (Tue, 25 Nov 2003) | 2 lines

file removed

------------------------------------------------------------------------
r5994 | jmason | 2003-11-25 07:33:42 +0000 (Tue, 25 Nov 2003) | 2 lines

bug 2685: removed contributor Michael Moose Dinn

------------------------------------------------------------------------
r5993 | jmason | 2003-11-25 07:19:01 +0000 (Tue, 25 Nov 2003) | 2 lines

removed contributions from Matt Simerson

------------------------------------------------------------------------
r5992 | jmason | 2003-11-25 07:09:11 +0000 (Tue, 25 Nov 2003) | 2 lines

removed contributor Marek Huda'k

------------------------------------------------------------------------
r5991 | jmason | 2003-11-25 07:03:38 +0000 (Tue, 25 Nov 2003) | 2 lines

oops, broke the rules files

------------------------------------------------------------------------
r5990 | jmason | 2003-11-25 07:01:52 +0000 (Tue, 25 Nov 2003) | 2 lines

bug 2674: removed contributions from David Kewley

------------------------------------------------------------------------
r5989 | jmason | 2003-11-25 03:02:49 +0000 (Tue, 25 Nov 2003) | 2 lines

dropped contributor Chris Eykamp

------------------------------------------------------------------------
r5988 | jmason | 2003-11-25 03:01:22 +0000 (Tue, 25 Nov 2003) | 2 lines

removed contributor Mike Nolan

------------------------------------------------------------------------
r5987 | jmason | 2003-11-25 02:57:27 +0000 (Tue, 25 Nov 2003) | 2 lines

dropped contributor Chris Eykamp

------------------------------------------------------------------------
r5986 | jmason | 2003-11-25 02:12:45 +0000 (Tue, 25 Nov 2003) | 2 lines

removed contributor Radoslaw Zielinski

------------------------------------------------------------------------
r5985 | jmason | 2003-11-25 02:08:59 +0000 (Tue, 25 Nov 2003) | 2 lines

removed contributor Robert James Kaes

------------------------------------------------------------------------
r5984 | jmason | 2003-11-25 02:05:47 +0000 (Tue, 25 Nov 2003) | 2 lines

bug 2672: removed 30_text_de.cf due to a lack of CLAs from some of the contributors

------------------------------------------------------------------------
r5983 | jmason | 2003-11-25 02:01:34 +0000 (Tue, 25 Nov 2003) | 2 lines

removed contributor Bob Apthorpe due to lack of CLA

------------------------------------------------------------------------
r5982 | jmason | 2003-11-25 01:50:23 +0000 (Tue, 25 Nov 2003) | 2 lines

removed contrib files that we still have no CLA for

------------------------------------------------------------------------
r5981 | jmason | 2003-11-25 01:45:17 +0000 (Tue, 25 Nov 2003) | 2 lines

removed contributor Ian Murdock (bug 2694)

------------------------------------------------------------------------
r5980 | jmason | 2003-11-25 01:43:27 +0000 (Tue, 25 Nov 2003) | 2 lines

bug 2695: removed contributor Tino Keitel

------------------------------------------------------------------------
r5979 | jmason | 2003-11-24 05:18:33 +0000 (Mon, 24 Nov 2003) | 2 lines

bug 2774: undef warnings fixed in qmail Received-header parsing

------------------------------------------------------------------------
r5978 | jmason | 2003-11-20 19:35:06 +0000 (Thu, 20 Nov 2003) | 2 lines

added more debugging to RBL code; found bug in interim list of reserved-IPs, fixed pending their clean-room reimplementation

------------------------------------------------------------------------
r5975 | jmason | 2003-11-20 07:22:48 +0000 (Thu, 20 Nov 2003) | 2 lines

bug 2759: Received parser can't deal with a variety of qmail formats

------------------------------------------------------------------------
r5974 | jmason | 2003-11-19 20:25:27 +0000 (Wed, 19 Nov 2003) | 2 lines

bug 2742: updated French translations, Michel Bouissou

------------------------------------------------------------------------
r5973 | jmason | 2003-11-19 02:37:50 +0000 (Wed, 19 Nov 2003) | 2 lines

bug 2742: new set of French translations from Michel Bouissou

------------------------------------------------------------------------
r5972 | duncf | 2003-11-18 17:04:49 +0000 (Tue, 18 Nov 2003) | 2 lines

Doh. $current_user was already declared... oops

------------------------------------------------------------------------
r5971 | duncf | 2003-11-18 16:49:17 +0000 (Tue, 18 Nov 2003) | 2 lines

Yes this is silly. Reimplementing set current_user to value in $1. I cant test this, so I hope for the best ;-)

------------------------------------------------------------------------
r5970 | jmason | 2003-11-18 07:15:08 +0000 (Tue, 18 Nov 2003) | 2 lines

bug 2692: removed contributor Tim Bell.  CVS HEAD IS NOW BROKEN -- SOMEONE ELSE PLEASE REIMPLEMENT ASAP

------------------------------------------------------------------------
r5969 | jmason | 2003-11-18 07:06:12 +0000 (Tue, 18 Nov 2003) | 2 lines

bug 2705: dropped contributor Dave Lugo

------------------------------------------------------------------------
r5968 | jmason | 2003-11-18 07:02:38 +0000 (Tue, 18 Nov 2003) | 2 lines

bug 2698: dropped contributor James Henstridge

------------------------------------------------------------------------
r5966 | jmason | 2003-11-15 04:17:06 +0000 (Sat, 15 Nov 2003) | 2 lines

oops, screwed up the rfc-2822 regexp

------------------------------------------------------------------------
r5965 | jmason | 2003-11-15 04:13:30 +0000 (Sat, 15 Nov 2003) | 2 lines

bug 2710: drop contributor Anirvan Chatterjee

------------------------------------------------------------------------
r5964 | jmason | 2003-11-15 04:05:28 +0000 (Sat, 15 Nov 2003) | 2 lines

bug 2715: dropped a regexp from Mail::Header, since the CLA from Graham Barr seems to have gone AWOL

------------------------------------------------------------------------
r5960 | jmason | 2003-11-15 02:58:12 +0000 (Sat, 15 Nov 2003) | 2 lines

bug 2745: pobox.com Received header format handled

------------------------------------------------------------------------
r5959 | jmason | 2003-11-15 02:55:30 +0000 (Sat, 15 Nov 2003) | 2 lines

bug 2633: spamd giving undef warnings if DNS is not available for spamc client

------------------------------------------------------------------------
r5956 | jmason | 2003-11-15 02:46:25 +0000 (Sat, 15 Nov 2003) | 2 lines

bug 2502: -H switch broken due to lack of srand seeding

------------------------------------------------------------------------
r5955 | jmason | 2003-11-15 02:44:49 +0000 (Sat, 15 Nov 2003) | 2 lines

bug 2591: Received header format for something called 'smtpd' supported; added internal_networks initial implementation

------------------------------------------------------------------------
r5954 | jmason | 2003-11-15 02:49:32 +0000 (Sat, 15 Nov 2003) | 2 lines

bug 2630: spamd_parallel test no longer distributed due to load problems it causes

------------------------------------------------------------------------
r5953 | jmason | 2003-11-15 02:47:42 +0000 (Sat, 15 Nov 2003) | 2 lines

bug 2504: fixed 'Use of uninitialized value in numeric eq' in spamd

------------------------------------------------------------------------
r5950 | jmason | 2003-11-13 02:49:46 +0000 (Thu, 13 Nov 2003) | 2 lines

updated MANIFEST

------------------------------------------------------------------------
r5949 | jmason | 2003-11-13 02:49:10 +0000 (Thu, 13 Nov 2003) | 2 lines

bug 2654: fix pattern to avoid FP on FORGED_MUA_EUDORA

------------------------------------------------------------------------
r5948 | jmason | 2003-11-12 07:36:19 +0000 (Wed, 12 Nov 2003) | 2 lines

bug 2294: removed FORGED_MUA_THEBAT due to FPs and 2 other better variants being present anyway

------------------------------------------------------------------------
r5945 | jmason | 2003-11-09 02:18:56 +0000 (Sun, 09 Nov 2003) | 2 lines

oops. a test failure which I thought was due to my user_prefs, was actually a bug in the test code; fixed

------------------------------------------------------------------------
r5944 | jmason | 2003-11-09 02:14:26 +0000 (Sun, 09 Nov 2003) | 2 lines

oops, typo in previous patch application in spamd request-header parser code

------------------------------------------------------------------------
r5943 | jmason | 2003-11-09 02:11:52 +0000 (Sun, 09 Nov 2003) | 2 lines

bug 2664: drop contributor Beniamino Galvani

------------------------------------------------------------------------
r5942 | jmason | 2003-11-09 02:07:03 +0000 (Sun, 09 Nov 2003) | 2 lines

bug 2676: dropped contributor John Levine

------------------------------------------------------------------------
r5941 | jmason | 2003-11-09 01:48:20 +0000 (Sun, 09 Nov 2003) | 2 lines

bug 2662: dropped contributor Alexander Kourakos

------------------------------------------------------------------------
r5940 | jmason | 2003-11-09 01:41:02 +0000 (Sun, 09 Nov 2003) | 2 lines

bug 2693: remove contributor Tony L. Svanstrom

------------------------------------------------------------------------
r5939 | jmason | 2003-11-09 01:31:53 +0000 (Sun, 09 Nov 2003) | 2 lines

bug 2665: drop contributor Bill O'Hanlon

------------------------------------------------------------------------
r5938 | jmason | 2003-11-09 01:25:02 +0000 (Sun, 09 Nov 2003) | 2 lines

bug 2560: removed build/cvs2cl-branch from CVS due to licensing

------------------------------------------------------------------------
r5937 | jmason | 2003-11-08 03:40:35 +0000 (Sat, 08 Nov 2003) | 2 lines

bug 2663: dropped contributor Antonello Nocchi

------------------------------------------------------------------------
r5936 | jmason | 2003-11-08 03:29:40 +0000 (Sat, 08 Nov 2003) | 2 lines

bug 2673: drop contributor David Greenaway

------------------------------------------------------------------------
r5935 | jmason | 2003-11-07 03:06:39 +0000 (Fri, 07 Nov 2003) | 2 lines

bug 2580: undefined value in spamd check()

------------------------------------------------------------------------
r5931 | jmason | 2003-11-05 04:53:13 +0000 (Wed, 05 Nov 2003) | 2 lines

bug 2122: FORGED_MUA rules matching for some mailing lists

------------------------------------------------------------------------
r5928 | jmason | 2003-10-29 05:39:51 +0000 (Wed, 29 Oct 2003) | 2 lines

try out delphi.com anti-joe-job rule

------------------------------------------------------------------------
r5927 | felicity | 2003-10-29 05:13:13 +0000 (Wed, 29 Oct 2003) | 3 lines

at the LISA postmaster BoF, the qualcomm postmaster commented that
no mail comes from eudora.com, but it is faked a lot...

------------------------------------------------------------------------
r5926 | jmason | 2003-10-28 07:09:34 +0000 (Tue, 28 Oct 2003) | 2 lines

updated MANIFEST

------------------------------------------------------------------------
r5925 | jmason | 2003-10-28 07:08:30 +0000 (Tue, 28 Oct 2003) | 2 lines

applied patch from bug 2505 to HEAD

------------------------------------------------------------------------
r5924 | jmason | 2003-10-28 07:02:50 +0000 (Tue, 28 Oct 2003) | 2 lines

added rules to catch 'rndmx' random tags, and newish ratware (using header samples from Steve Champeon)

------------------------------------------------------------------------
r5923 | jmason | 2003-10-28 07:02:03 +0000 (Tue, 28 Oct 2003) | 2 lines

dns.t fixed; blocked.secnap.net was closed down by owner, so replacement mini-zone set up on spamassassin.org instead.

------------------------------------------------------------------------
r5922 | jmason | 2003-10-28 06:53:51 +0000 (Tue, 28 Oct 2003) | 2 lines

avoid undef warning in t/strip2.t

------------------------------------------------------------------------
r5921 | jmason | 2003-10-28 06:47:51 +0000 (Tue, 28 Oct 2003) | 2 lines

removed windows_install.pl, obsolete

------------------------------------------------------------------------
r5920 | jmason | 2003-10-28 06:45:53 +0000 (Tue, 28 Oct 2003) | 2 lines

avoid an SPF failure

------------------------------------------------------------------------
r5919 | jmason | 2003-10-28 06:45:31 +0000 (Tue, 28 Oct 2003) | 2 lines

DCC installation docs updated

------------------------------------------------------------------------
r5916 | climent | 2003-10-23 14:38:42 +0000 (Thu, 23 Oct 2003) | 2 lines

Small change to avoid a critical session.

------------------------------------------------------------------------
r5915 | climent | 2003-10-23 12:48:55 +0000 (Thu, 23 Oct 2003) | 2 lines

FRIEND AT PUBLIC small change

------------------------------------------------------------------------
r5914 | quinlan | 2003-10-20 01:37:19 +0000 (Mon, 20 Oct 2003) | 2 lines

minor documentation clarification

------------------------------------------------------------------------
r5913 | msquadrat | 2003-10-15 21:16:11 +0000 (Wed, 15 Oct 2003) | 2 lines

removed stale qmail entries

------------------------------------------------------------------------
r5912 | msquadrat | 2003-10-15 16:01:40 +0000 (Wed, 15 Oct 2003) | 2 lines

bug 2596: missing space kept qmail/qmail-spamc and t/do_net from being removed on 'make clean'

------------------------------------------------------------------------
r5911 | quinlan | 2003-10-15 08:08:05 +0000 (Wed, 15 Oct 2003) | 2 lines

remove debugging statement

------------------------------------------------------------------------
r5910 | quinlan | 2003-10-15 07:53:12 +0000 (Wed, 15 Oct 2003) | 3 lines

improved title testing (test each title separately instead of together
or as a whole)

------------------------------------------------------------------------
r5909 | quinlan | 2003-10-15 07:51:49 +0000 (Wed, 15 Oct 2003) | 4 lines

small simplification of _get_date_header_time()
add html_title()
trailing line comment after { is just wrong

------------------------------------------------------------------------
r5908 | quinlan | 2003-10-15 04:58:10 +0000 (Wed, 15 Oct 2003) | 4 lines

add some HTML <title> test rules
bug 2589: problems detecting html titles (handling of titles is now same as
IE and Mozilla, first title is used regardless of position in document)

------------------------------------------------------------------------
r5907 | quinlan | 2003-10-14 05:17:23 +0000 (Tue, 14 Oct 2003) | 2 lines

add some HTML entity rules

------------------------------------------------------------------------
r5906 | quinlan | 2003-10-14 03:42:45 +0000 (Tue, 14 Oct 2003) | 3 lines

replace old fallback base64 decoder with new one
fix minor bug in base64 decoder

------------------------------------------------------------------------
r5905 | quinlan | 2003-10-13 21:51:21 +0000 (Mon, 13 Oct 2003) | 2 lines

speed up spamd testing on fast machines, wait longer before failing too

------------------------------------------------------------------------
r5904 | msquadrat | 2003-10-11 13:49:24 +0000 (Sat, 11 Oct 2003) | 2 lines

bug 2557: enhanced qmail-spamc can now feed command line options to spamc (thanks to John Peacock)

------------------------------------------------------------------------
r5903 | msquadrat | 2003-10-10 19:57:49 +0000 (Fri, 10 Oct 2003) | 2 lines

The previous commit still used $_ instead of $line in the first check.

------------------------------------------------------------------------
r5902 | msquadrat | 2003-10-10 19:49:39 +0000 (Fri, 10 Oct 2003) | 2 lines

bug 2580: calling subroutines can make $_ undef

------------------------------------------------------------------------
r5901 | quinlan | 2003-10-07 08:11:25 +0000 (Tue, 07 Oct 2003) | 2 lines

removing obsolete code

------------------------------------------------------------------------
r5900 | quinlan | 2003-10-07 04:15:36 +0000 (Tue, 07 Oct 2003) | 2 lines

note this was idea

------------------------------------------------------------------------
r5899 | quinlan | 2003-10-06 01:08:47 +0000 (Mon, 06 Oct 2003) | 2 lines

re-enable Habeas

------------------------------------------------------------------------
r5898 | quinlan | 2003-10-06 00:31:02 +0000 (Mon, 06 Oct 2003) | 2 lines

add HTML renderer

------------------------------------------------------------------------
r5897 | quinlan | 2003-10-06 00:19:35 +0000 (Mon, 06 Oct 2003) | 2 lines

modularize the HTML rendering code

------------------------------------------------------------------------
r5896 | quinlan | 2003-10-04 03:08:09 +0000 (Sat, 04 Oct 2003) | 2 lines

fix use_auto_whitelist

------------------------------------------------------------------------
r5895 | quinlan | 2003-10-04 02:55:13 +0000 (Sat, 04 Oct 2003) | 2 lines

add T_MSGID_DOLLARS_*

------------------------------------------------------------------------
r5894 | quinlan | 2003-10-04 02:44:45 +0000 (Sat, 04 Oct 2003) | 2 lines

bug 2538: address problems with Outlook forgery rules

------------------------------------------------------------------------
r5892 | jmason | 2003-10-03 20:37:38 +0000 (Fri, 03 Oct 2003) | 2 lines

re-added relays.visi.com, it's back

------------------------------------------------------------------------
r5891 | quinlan | 2003-10-03 00:39:12 +0000 (Fri, 03 Oct 2003) | 2 lines

disable Habeas tests by default

------------------------------------------------------------------------
r5890 | quinlan | 2003-10-02 23:01:01 +0000 (Thu, 02 Oct 2003) | 2 lines

add $re_start for HTML rendering heuristic

------------------------------------------------------------------------
r5889 | quinlan | 2003-10-02 22:59:00 +0000 (Thu, 02 Oct 2003) | 2 lines

add text rendering place-holder

------------------------------------------------------------------------
r5888 | felicity | 2003-10-02 19:29:36 +0000 (Thu, 02 Oct 2003) | 2 lines

Clean up the render area a little bit, add some docs.

------------------------------------------------------------------------
r5887 | quinlan | 2003-10-02 02:30:33 +0000 (Thu, 02 Oct 2003) | 4 lines

don't open results files until we get to the point of writing results
to avoid overwriting spam.log and ham.log accidentally (when trying to
use an option to print to stdout, but failing to find a message)

------------------------------------------------------------------------
r5886 | felicity | 2003-10-01 05:50:51 +0000 (Wed, 01 Oct 2003) | 2 lines

work on the docs a little bit

------------------------------------------------------------------------
r5885 | felicity | 2003-10-01 05:31:56 +0000 (Wed, 01 Oct 2003) | 5 lines

If a multipart message has no boundary defined, or the boundary is defined
but not found in the part, treat the whole part as the data to use.
Otherwise, if a boundary is defined and it's found, just use the data
between the boundaries.

------------------------------------------------------------------------
r5884 | felicity | 2003-10-01 04:39:48 +0000 (Wed, 01 Oct 2003) | 2 lines

Make everything but parse() a "private" function.

------------------------------------------------------------------------
r5883 | felicity | 2003-10-01 04:36:21 +0000 (Wed, 01 Oct 2003) | 3 lines

If there is no encoding, there will be no decoding.  So raw == decoded,
just point to the same data to save memory.

------------------------------------------------------------------------
r5882 | felicity | 2003-10-01 03:18:18 +0000 (Wed, 01 Oct 2003) | 2 lines

parsed -> rendered

------------------------------------------------------------------------
r5881 | felicity | 2003-10-01 01:49:42 +0000 (Wed, 01 Oct 2003) | 2 lines

more mime headers being kept, default text/plain charset per the RFC

------------------------------------------------------------------------
r5880 | felicity | 2003-10-01 01:39:19 +0000 (Wed, 01 Oct 2003) | 2 lines

Fixed decoding issue of main body if not multipart

------------------------------------------------------------------------
r5879 | msquadrat | 2003-09-30 23:11:50 +0000 (Tue, 30 Sep 2003) | 2 lines

Added a short comment about the optional module Time::HiRes and what its used for.

------------------------------------------------------------------------
r5878 | felicity | 2003-09-30 22:48:50 +0000 (Tue, 30 Sep 2003) | 2 lines

The MIME parser would miss the last header in a message.  Fixed. :)

------------------------------------------------------------------------
r5877 | felicity | 2003-09-30 18:57:24 +0000 (Tue, 30 Sep 2003) | 3 lines

bug 2140: eudora sometimes has a different message-id than we expected
before, so account for those differences.

------------------------------------------------------------------------
r5875 | quinlan | 2003-09-30 18:32:31 +0000 (Tue, 30 Sep 2003) | 2 lines

whoops, regexps can't work backwards

------------------------------------------------------------------------
r5874 | felicity | 2003-09-30 16:12:28 +0000 (Tue, 30 Sep 2003) | 2 lines

sometimes the parser can try to run through a null body part, so ignore those.

------------------------------------------------------------------------
r5873 | jmason | 2003-09-30 06:05:02 +0000 (Tue, 30 Sep 2003) | 2 lines

avoid duplicating headers in mass-check-results-to-mbox output

------------------------------------------------------------------------
r5872 | jmason | 2003-09-30 05:20:20 +0000 (Tue, 30 Sep 2003) | 2 lines

try using SPF in a DRIP style

------------------------------------------------------------------------
r5871 | jmason | 2003-09-30 05:19:19 +0000 (Tue, 30 Sep 2003) | 2 lines

try using SPF in a DRIP style

------------------------------------------------------------------------
r5870 | jmason | 2003-09-30 05:00:54 +0000 (Tue, 30 Sep 2003) | 2 lines

another Received-line format that was being missed

------------------------------------------------------------------------
r5869 | jmason | 2003-09-30 04:52:55 +0000 (Tue, 30 Sep 2003) | 2 lines

fixed 'use 5.6.1' to be better for backwards compat

------------------------------------------------------------------------
r5868 | felicity | 2003-09-30 03:34:11 +0000 (Tue, 30 Sep 2003) | 2 lines

initial step to get MIME parsing in place

------------------------------------------------------------------------
r5866 | msquadrat | 2003-09-29 21:58:46 +0000 (Mon, 29 Sep 2003) | 2 lines

Increase the required version of Perl.

------------------------------------------------------------------------
r5865 | msquadrat | 2003-09-29 21:45:38 +0000 (Mon, 29 Sep 2003) | 2 lines

bug 2492 revisited: somehow a part of the MICROSOFT_EXECUTABLE got lost

------------------------------------------------------------------------
r5863 | msquadrat | 2003-09-29 21:34:31 +0000 (Mon, 29 Sep 2003) | 3 lines

* Removed compatibility code for old (before 5.45) versions of ExtUtils::MakeMaker
* Updated the docu at several places

------------------------------------------------------------------------
r5862 | felicity | 2003-09-29 20:59:28 +0000 (Mon, 29 Sep 2003) | 2 lines

fixed comment typo in spec file

------------------------------------------------------------------------
r5860 | felicity | 2003-09-29 20:10:38 +0000 (Mon, 29 Sep 2003) | 9 lines

more username in subject tests:

  0.503   0.9122   0.0000    1.000   1.00    0.01  T_USERNAME_IN_SUBJECT3
  0.453   0.8213   0.0000    1.000   1.00    0.01  T_USERNAME_IN_SUBJECT2
  0.051   0.0928   0.0000    1.000   1.00    2.90  USERNAME_IN_SUBJECT
  2.679   4.8392   0.0243    0.995   0.99    0.01  T_USERNAME_IN_SUBJECT1

:)

------------------------------------------------------------------------
r5859 | felicity | 2003-09-29 19:42:00 +0000 (Mon, 29 Sep 2003) | 3 lines

bug 1889: rbl_check() wasn't able to parse a certain Received header if
an ident string was included

------------------------------------------------------------------------
r5857 | jmason | 2003-09-29 18:13:08 +0000 (Mon, 29 Sep 2003) | 2 lines

Received: use of MX data to compute trust turned off again, it's too slow.  Added timeout for ALL_RELAYS_NEAR_MXES test

------------------------------------------------------------------------
r5856 | jmason | 2003-09-29 05:58:50 +0000 (Mon, 29 Sep 2003) | 2 lines

avoid a warning

------------------------------------------------------------------------
r5855 | jmason | 2003-09-29 05:43:48 +0000 (Mon, 29 Sep 2003) | 2 lines

avoid new 'undefined value' warning

------------------------------------------------------------------------
r5854 | jmason | 2003-09-29 05:34:35 +0000 (Mon, 29 Sep 2003) | 2 lines

bug 2142: code to infer MAIL FROM: address from message added, using Return-Path, X-Envelope-From and a few other common ones, and producing a synthetic fake header, EnvelopeFrom.   bug 2143: SPF support added, first draft, using Mail::SPF::Query for now.   bug 2426: spamcop-ish trusted_networks determination scheme, using MX records added; seems to work well in most setups although may extend trust further than necessary in the open-relay case.   Added nice test to detect messages that travelled entirely via domains and IPs where the domain's MX and the IP correlate.

------------------------------------------------------------------------
r5853 | felicity | 2003-09-29 04:37:05 +0000 (Mon, 29 Sep 2003) | 2 lines

for quoted-printable, go call M::SA::Util ...

------------------------------------------------------------------------
r5852 | quinlan | 2003-09-29 04:33:41 +0000 (Mon, 29 Sep 2003) | 2 lines

add qp_decode()

------------------------------------------------------------------------
r5851 | felicity | 2003-09-29 04:21:21 +0000 (Mon, 29 Sep 2003) | 2 lines

we should test out some other "username in subject" style rules ...

------------------------------------------------------------------------
r5850 | felicity | 2003-09-29 04:03:35 +0000 (Mon, 29 Sep 2003) | 2 lines

more mime work

------------------------------------------------------------------------
r5849 | quinlan | 2003-09-29 04:02:29 +0000 (Mon, 29 Sep 2003) | 2 lines

add HAS_MIME_BASE64

------------------------------------------------------------------------
r5848 | quinlan | 2003-09-29 03:57:22 +0000 (Mon, 29 Sep 2003) | 2 lines

add base64_decode()

------------------------------------------------------------------------
r5847 | felicity | 2003-09-29 03:53:18 +0000 (Mon, 29 Sep 2003) | 3 lines

after a discussion with quinlan, changes to MIME parser to leave "raw"
parts raw, and not slightly cooked.

------------------------------------------------------------------------
r5846 | felicity | 2003-09-29 03:05:05 +0000 (Mon, 29 Sep 2003) | 2 lines

fixed a few issues ...

------------------------------------------------------------------------
r5845 | felicity | 2003-09-29 02:59:36 +0000 (Mon, 29 Sep 2003) | 2 lines

Deal with some bad base64 encoding details, etc.

------------------------------------------------------------------------
r5843 | felicity | 2003-09-29 01:10:32 +0000 (Mon, 29 Sep 2003) | 2 lines

added documentation about add_header name convention

------------------------------------------------------------------------
r5842 | felicity | 2003-09-28 16:38:44 +0000 (Sun, 28 Sep 2003) | 7 lines

bug 2494:
1) deal with bz2 builds... ;)
2) allow release to be overriden via commandline
3) allow CFLAGS to be modified in the usual method (RPM_OPT_FLAGS)
4) add more documentation to be installed
5) update to 2.61

------------------------------------------------------------------------
r5841 | felicity | 2003-09-28 16:24:41 +0000 (Sun, 28 Sep 2003) | 2 lines

re-remove the 2.60 announcement from MANIFEST

------------------------------------------------------------------------
r5840 | felicity | 2003-09-28 16:24:13 +0000 (Sun, 28 Sep 2003) | 2 lines

updated docs per bug 2501 (bayes changes in README and INSTALL)

------------------------------------------------------------------------
r5836 | felicity | 2003-09-27 01:46:55 +0000 (Sat, 27 Sep 2003) | 3 lines

bug 2510: we should remove world-writable directories from PATH since
it can cause issues with taint mode

------------------------------------------------------------------------
r5834 | felicity | 2003-09-27 01:26:29 +0000 (Sat, 27 Sep 2003) | 2 lines

bug 2511: clean the path before running Cwd

------------------------------------------------------------------------
r5833 | jmason | 2003-09-26 19:25:26 +0000 (Fri, 26 Sep 2003) | 2 lines

fix doco due to broken link

------------------------------------------------------------------------
r5832 | jmason | 2003-09-26 19:16:14 +0000 (Fri, 26 Sep 2003) | 2 lines

changed version for bleeding-edge website doc updater to build

------------------------------------------------------------------------
r5831 | climent | 2003-09-25 10:44:49 +0000 (Thu, 25 Sep 2003) | 2 lines

Postfix README added

------------------------------------------------------------------------
r5830 | felicity | 2003-09-25 03:38:04 +0000 (Thu, 25 Sep 2003) | 2 lines

more mime work

------------------------------------------------------------------------
r5829 | quinlan | 2003-09-25 03:11:24 +0000 (Thu, 25 Sep 2003) | 2 lines

bug 2459: more work on reorganizing auto-whitelist implementation

------------------------------------------------------------------------
r5828 | quinlan | 2003-09-25 03:11:01 +0000 (Thu, 25 Sep 2003) | 3 lines

bug 2459: more work on reorganizing auto-whitelist implementation
Bug 2492: MICROSOFT_EXECUTABLE slightly broken

------------------------------------------------------------------------
r5827 | jmason | 2003-09-24 22:47:43 +0000 (Wed, 24 Sep 2003) | 2 lines

fixed typo

------------------------------------------------------------------------
r5826 | felicity | 2003-09-24 22:06:03 +0000 (Wed, 24 Sep 2003) | 2 lines

bug 2501: put the release announcement mail into the distro.

------------------------------------------------------------------------
r5825 | felicity | 2003-09-24 22:01:12 +0000 (Wed, 24 Sep 2003) | 2 lines

convert CRLF->LF in decoded MIME parts

------------------------------------------------------------------------
r5824 | felicity | 2003-09-24 21:33:33 +0000 (Wed, 24 Sep 2003) | 2 lines

a bit more code cleanup

------------------------------------------------------------------------
r5823 | felicity | 2003-09-24 19:30:32 +0000 (Wed, 24 Sep 2003) | 2 lines

a few updates for MIME parsing

------------------------------------------------------------------------
r5822 | quinlan | 2003-09-24 08:37:25 +0000 (Wed, 24 Sep 2003) | 2 lines

minor change

------------------------------------------------------------------------
r5821 | felicity | 2003-09-24 06:18:38 +0000 (Wed, 24 Sep 2003) | 4 lines

Modules for new parsing code.  Mostly from Matt Sergeant's work in the SA3
tree.  I trimmed it down a lot, and got it to deal with variable/reference
passing instead of temporary files.

------------------------------------------------------------------------
r5820 | jmason | 2003-09-24 03:11:33 +0000 (Wed, 24 Sep 2003) | 2 lines

T_ rules enabled; a double-dash spam-sign

------------------------------------------------------------------------
r5819 | quinlan | 2003-09-23 23:58:03 +0000 (Tue, 23 Sep 2003) | 2 lines

use GTUBE for test email

------------------------------------------------------------------------
r5818 | quinlan | 2003-09-23 23:53:39 +0000 (Tue, 23 Sep 2003) | 2 lines

add CBL as test blacklist

------------------------------------------------------------------------
r5817 | quinlan | 2003-09-23 23:52:43 +0000 (Tue, 23 Sep 2003) | 2 lines

uncomment test rules!

------------------------------------------------------------------------
r5816 | quinlan | 2003-09-23 21:39:13 +0000 (Tue, 23 Sep 2003) | 2 lines

bug 2482: add DNSBL regression tests

------------------------------------------------------------------------
r5815 | quinlan | 2003-09-23 21:37:03 +0000 (Tue, 23 Sep 2003) | 2 lines

bug 2459: reorganize auto-whitelist implementation

------------------------------------------------------------------------
r5813 | felicity | 2003-09-23 20:34:39 +0000 (Tue, 23 Sep 2003) | 2 lines

fixed small doc thingy about razor patch

------------------------------------------------------------------------
r5812 | duncf | 2003-09-23 20:30:26 +0000 (Tue, 23 Sep 2003) | 2 lines

Bayes should ignore Gnus annotation, patch from Juergen Kreileder <jk@blackdown.de>

------------------------------------------------------------------------
r5811 | felicity | 2003-09-23 18:18:49 +0000 (Tue, 23 Sep 2003) | 3 lines

Allow "--define 'release 1_rh6'" and "--define 'srcext .bz2'" overrides
from the rpmbuild commandline.

------------------------------------------------------------------------
r5810 | felicity | 2003-09-23 14:45:50 +0000 (Tue, 23 Sep 2003) | 2 lines

2.70 devel cycle started

------------------------------------------------------------------------
